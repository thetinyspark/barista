(()=>{"use strict";var t={570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BLOB_TYPE=e.JSON_TYPE=e.SOUND_TYPE=e.VIDEO_TYPE=e.IMAGE_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=void 0;const n=r(4919);class i extends n.Emitter{constructor(){super(),this.uris=new Map,this._errorHandler=t=>{this.emit(e.LOAD_ERROR,t)},this.data=new Map,this.list=[]}getAll(){return this.data}queue(t,r=e.JSON_TYPE,n){this.list.push({uri:t,type:r,alias:n})}getQueue(){return this.list}freeQueue(){this.list=[]}loadQueue(){return Promise.all(this.list.map((t=>this.load(t.uri,t.type,t.alias)))).then((t=>(this.freeQueue(),t)))}getUris(){const t={};return this.uris.forEach(((e,r)=>{t[r]=e})),t}getUri(t){return this.uris.get(t)}get(t){return this.data.get(t)}load(t,r=e.JSON_TYPE,n){return this._loadBlob(t).then((t=>{switch(r){case e.IMAGE_TYPE:return i.blobToImage(t).catch(this._errorHandler);case e.JSON_TYPE:return i.blobToJSON(t).catch(this._errorHandler);case e.VIDEO_TYPE:return i.blobToVideo(t).catch(this._errorHandler);case e.SOUND_TYPE:return i.blobToSound(t).catch(this._errorHandler);default:return t}})).then((r=>(this.set(r,n,t),this.emit(e.LOAD_SUCCESS,r),r)))}set(t,e,r=""){this.uris.set(e,r),this.data.set(e,t)}delete(t){return this.getAll().delete(t)}destroy(){this.getAll().clear()}_loadBlob(t){return fetch(t).then((t=>{if(200===t.status)return t.blob();this._errorHandler(t.statusText)})).catch(this._errorHandler)}static blobToSound(t){return new Promise(((e,r)=>{const n=document.createElement("audio"),i=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",a),e(n)},a=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",a),r("unable to load audio from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",a),n.src=i,n.load()}))}static blobToJSON(t){return new Promise((e=>{const r=new FileReader;r.addEventListener("load",(()=>{e(JSON.parse(r.result.toString()))})),r.readAsText(t,"utf8")}))}static blobToImage(t){return new Promise(((e,r)=>{const n=new Image,i=t=>{n.removeEventListener("load",s),n.removeEventListener("error",i),r("unable to load image from source")},s=t=>{n.removeEventListener("load",s),n.removeEventListener("error",i),e(n)};n.addEventListener("load",s),n.addEventListener("error",i);const a=URL.createObjectURL(t);n.src=a}))}static blobToVideo(t){return new Promise(((e,r)=>{const n=document.createElement("video"),i=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",a),e(n)},a=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",a),r("unable to load video from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",a),n.src=i,n.load()}))}}e.default=i,e.LOAD_ERROR="LOAD_ERROR",e.LOAD_SUCCESS="LOAD_SUCCESS",e.IMAGE_TYPE="IMAGE_TYPE",e.VIDEO_TYPE="VIDEO_TYPE",e.SOUND_TYPE="SOUND_TYPE",e.JSON_TYPE="JSON_TYPE",e.BLOB_TYPE="BLOB_TYPE"},5983:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VIDEO_TYPE=e.SOUND_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=e.JSON_TYPE=e.IMAGE_TYPE=e.BLOB_TYPE=e.AssetsManager=void 0;const n=r(570);e.AssetsManager=n.default,Object.defineProperty(e,"BLOB_TYPE",{enumerable:!0,get:function(){return n.BLOB_TYPE}}),Object.defineProperty(e,"IMAGE_TYPE",{enumerable:!0,get:function(){return n.IMAGE_TYPE}}),Object.defineProperty(e,"JSON_TYPE",{enumerable:!0,get:function(){return n.JSON_TYPE}}),Object.defineProperty(e,"LOAD_ERROR",{enumerable:!0,get:function(){return n.LOAD_ERROR}}),Object.defineProperty(e,"LOAD_SUCCESS",{enumerable:!0,get:function(){return n.LOAD_SUCCESS}}),Object.defineProperty(e,"SOUND_TYPE",{enumerable:!0,get:function(){return n.SOUND_TYPE}}),Object.defineProperty(e,"VIDEO_TYPE",{enumerable:!0,get:function(){return n.VIDEO_TYPE}})},6033:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=void 0;const n=r(4919);class i extends n.Emitter{constructor(){super(...arguments),this._touches=[],this._pressed=[]}setTouches(t){this._touches=t}getTouches(){return this._touches}getTouchByKey(t){return this.getTouches().find((e=>e.key===t))||null}getTouchByValue(t){return this.getTouches().find((e=>e.value===t))||null}getPressedTouches(){return this._pressed}press(t,e=0){t.press(e),this._pressed.includes(t)||(this._pressed.push(t),this.emit(s.PRESS_KEY,t))}release(t,e=0){if(this._pressed.indexOf(t)>-1){this._pressed.splice(this._pressed.indexOf(t),1);const r=t.release(e);return this.emit(s.PRESS_KEY,t),r}return t.getElapsedTime()}}var s;e.default=i,function(t){t.PRESS_KEY="PRESS_KEY",t.RELEASE_KEY="RELEASE_KEY"}(s=e.GamePadTouchEvent||(e.GamePadTouchEvent={}))},5504:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="",e=""){this._pressing=!1,this._timestamp=0,this.value=e,this.key=t}get pressing(){return this._pressing}getElapsedTime(t=0){return this.pressing?t-this._timestamp:0}release(t=0){const e=this.getElapsedTime(t);return this._pressing=!1,e}press(t=0){this._pressing=!0,this._timestamp=t}}},4630:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MouseControlEvent=void 0;const n=r(2843),i=r(2727);var s;e.default=class{constructor(t){this._touchHandler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=0==t.touches.length?t.changedTouches[0].clientX:t.touches[0].clientX,n=0==t.touches.length?t.changedTouches[0].clientY:t.touches[0].clientY,i=r-e.x>>0,a=n-e.y>>0;switch(t.preventDefault(),t.type){case"touchstart":this.dispatchAt(i,a,s.MOUSE_CONTROL_DOWN);break;case"touchend":this.dispatchAt(i,a,s.MOUSE_CONTROL_UP);break;case"touchmove":this.dispatchAt(i,a,s.MOUSE_CONTROL_MOVE)}},this._handler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=t.clientX-e.x>>0,n=t.clientY-e.y>>0;switch(t.type){case"click":this.dispatchAt(r,n,s.MOUSE_CONTROL_CLICK);break;case"mouseup":this.dispatchAt(r,n,s.MOUSE_CONTROL_UP);break;case"mousedown":this.dispatchAt(r,n,s.MOUSE_CONTROL_DOWN);break;case"mousemove":this.dispatchAt(r,n,s.MOUSE_CONTROL_MOVE)}},this._stage=t}activate(){this.deactivate(),this._stage.getCanvas().addEventListener("click",this._handler),this._stage.getCanvas().addEventListener("mouseup",this._handler),this._stage.getCanvas().addEventListener("mousedown",this._handler),this._stage.getCanvas().addEventListener("mousemove",this._handler),this._stage.getCanvas().addEventListener("touchstart",this._touchHandler),this._stage.getCanvas().addEventListener("touchend",this._touchHandler),this._stage.getCanvas().addEventListener("touchmove",this._touchHandler)}deactivate(){this._stage.getCanvas().removeEventListener("click",this._handler),this._stage.getCanvas().removeEventListener("mouseup",this._handler),this._stage.getCanvas().removeEventListener("mousedown",this._handler),this._stage.getCanvas().removeEventListener("mousemove",this._handler),this._stage.getCanvas().removeEventListener("touchstart",this._touchHandler),this._stage.getCanvas().removeEventListener("touchend",this._touchHandler),this._stage.getCanvas().removeEventListener("touchmove",this._touchHandler)}_getObjectUnderPointRecursive(t,e,r){const s=r.getChildren();let a=s.length;for(;--a>-1;){const r=s[a];if(i.isDisplayObjectContainer(r)){const n=this._getObjectUnderPointRecursive(t,e,r);if(null!==n)return n}else if(r.mouseEventsEnabled&&n.default.collide(t,e,r))return r}return null}dispatchAt(t,e,r){const n=this._getObjectUnderPointRecursive(t,e,this._stage),i=null===n?this._stage:n;let s=i;for(;null!==s;)s.emit(r,{x:t,y:e,target:i}),s=s.parent}},function(t){t.MOUSE_CONTROL_CLICK="MOUSE_CONTROL_CLICK",t.MOUSE_CONTROL_MOVE="MOUSE_CONTROL_MOVE",t.MOUSE_CONTROL_UP="MOUSE_CONTROL_UP",t.MOUSE_CONTROL_DOWN="MOUSE_CONTROL_DOWN"}(s=e.MouseControlEvent||(e.MouseControlEvent={}))},7392:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=e.GamePadTouch=e.GamePad=e.MouseControlEvent=e.MouseControl=void 0;const n=r(4630);e.MouseControl=n.default,Object.defineProperty(e,"MouseControlEvent",{enumerable:!0,get:function(){return n.MouseControlEvent}});const i=r(6033);e.GamePad=i.default,Object.defineProperty(e,"GamePadTouchEvent",{enumerable:!0,get:function(){return i.GamePadTouchEvent}});const s=r(5504);e.GamePadTouch=s.default},5165:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationEvent=void 0;const n=r(1610),i=r(4870),s=r(5055);class a extends s.default{constructor(){super(),this._frames=[],this._currentFrameIndex=0,this._playing=!1,this._forwarding=!0,this.loop=!1,this.addChild(new i.default)}play(){this._playing=!0,this._forwarding=!0}rewind(){this._playing=!0,this._forwarding=!1}stop(){this._playing=!1}render(t){if(super.render(t),this._playing){const t=this._forwarding?1:-1;this.goToFrame(this._currentFrameIndex+t)}}clearFrames(){this._currentFrameIndex=0,this._frames=[]}setFrameAt(t,e){e.index=t,this._frames[t]=e}getFrameAt(t){return this._frames[t]||null}getCurrentFrame(){let t=this.getFrameAt(this.getCurrentFrameIndex());return null===t&&this._forwarding?t=this.getPreviousDefinedFrameAt(this.getCurrentFrameIndex()):null!==t||this._forwarding||(t=this.getNextDefinedFrameAt(this.getCurrentFrameIndex())),t}getPreviousDefinedFrameAt(t){let e=null;for(;null===e&&t>-1;)e=this.getFrameAt(t--);return e}getNextDefinedFrameAt(t){let e=null;for(;null===e&&t<=this.getLastFrameIndex();)e=this.getFrameAt(t++);return e}removeFrameAt(t){this._frames[t]=null}getAnimationLength(){return this._frames.length}getLastFrameIndex(){return this.getAnimationLength()-1}getCurrentFrameIndex(){return this._currentFrameIndex}goToFrame(t){t=this.loop?(t=t>this.getLastFrameIndex()?0:t)<0?this.getLastFrameIndex():t:(t=t>this.getLastFrameIndex()?this.getLastFrameIndex():t)<0?0:t,this._currentFrameIndex=t;const e=this.getCurrentFrame(),r=this.getChildren()[0];r.texture=e.texture,r.width=e.width,r.height=e.height,r.x=e.offsetX,r.y=e.offsetY,r.update(this.worldMatrix,this.worldOpacity),this.emit(o.PLAY_FRAME,this._currentFrameIndex)}static createFromTexturesAndFrames(t){const e=new a;return t.forEach((t=>{const r=new n.default;r.width=t.texture.sw,r.height=t.texture.sh,r.originalWidth=r.width,r.originalHeight=r.height,r.texture=t.texture,e.setFrameAt(t.frame,r)})),e}}var o;e.default=a,function(t){t.PLAY_FRAME="PLAY_FRAME"}(o=e.AnimationEvent||(e.AnimationEvent={}))},1610:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.name="",this.index=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.texture=null}}},528:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870),i=r(887),s=r(2843);class a extends n.default{constructor(){super()}getRevertWorldMatrix(){const t=i.mat2d.create();return i.mat2d.invert(t,this.worldMatrix),t}getBounds(){return s.default.getBoundingRect(this)}}e.default=a},4870:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),i=r(4919),s=r(2041),a=r(351);class o extends i.Emitter{constructor(){super(...arguments),this.filters=[],this.texture=null,this.worldMatrix=n.mat2d.create(),this.matrix=n.mat2d.create(),this.x=0,this.y=0,this.opacity=1,this.worldOpacity=1,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.transformOrigin={x:0,y:0},this.parent=null,this.visible=!0,this.name="",this.mouseEventsEnabled=!0}snapshot(){const t=new s.default,e=this.matrix,r=this.worldMatrix,i=t.getCanvas(),a=t.getContext();return n.mat2d.identity(this.matrix),n.mat2d.identity(this.worldMatrix),i.width=this.width,i.height=this.height,t.add(this),t.draw(i,a),this.matrix=e,this.worldMatrix=r,t.getCanvas()}update(t,e=1){a.Geometry.updateTransform(t,this),this.opacity>1&&(this.opacity=1),this.opacity<0&&(this.opacity=0),this.worldOpacity=e*this.opacity}render(t){this.visible&&t.add(this)}static createFromTexture(t){const e=new o;return e.width=t.sw,e.height=t.sh,e.texture=t,e}}e.default=o},5055:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870);class i extends n.default{constructor(){super(...arguments),this._children=[]}addChild(t){this.contains(t)&&this.removeChild(t),this._children.push(t),t.parent=this}removeChild(t){const e=this.getChildIndex(t);return this.removeChildAt(e)}addChildAt(t,e){this.contains(t)&&this.removeChild(t);const r=this._children.splice(0,e);t.parent=this,this._children=[...r,t,...this._children]}removeChildAt(t){const e=this._children[t]||null;if(null===e)throw new Error("out of bound index for removeChildAt");return this._children.splice(t,1),e.parent=null,e}getChildren(){return this._children}getChildByName(t){return this._children.find((e=>e.name===t))||null}getAllNestedChildrenIterative(){let t=[],e=[];for(e.push(this);e.length>0;){const r=e.shift(),n=t.indexOf(r)+1,i=t.splice(n);for(let n=0;n<r._children.length;n++){const i=r._children[n];t.push(i),void 0!==i.getChildren&&e.push(i)}t=t.concat(i)}return t}getAllNestedChildren(t=[]){for(let e=0;e<this._children.length;e++){const r=this._children[e];t.push(r),void 0!==r.getChildren&&r.getAllNestedChildren(t)}return t}getChildIndex(t){return this._children.indexOf(t)}contains(t){return t.parent===this&&this.getChildIndex(t)>-1}removeChildren(){for(;this._children.length>0;)this.removeChildAt(0)}update(t,e){super.update(t,e),this._children.forEach((t=>{t.update(this.worldMatrix,this.worldOpacity)}))}render(t){super.render(t),this.visible&&this._children.forEach((e=>{e.render(t)}))}}e.default=i},7632:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StageEvent=void 0;const n=r(887),i=r(2041),s=r(5055);class a extends s.default{constructor(){super(),this._camera=null,this._currentFrame=0,this._renderer=new i.default,this._clippingStrategy=null,this.autoUpdateMatrices=!0}setCamera(t){this._camera=t}getCamera(){return this._camera}setClippingStrategy(t){this._clippingStrategy=t}getClippingStrategy(){return this._clippingStrategy}getRenderer(){return this._renderer}setRenderer(t){this._renderer=t}getCanvas(){return this._renderer.getCanvas()}getContext(){return this._renderer.getContext()}getCurrentFrame(){return this._currentFrame}nextFrame(){this._currentFrame++,this.emit(o.ENTER_FRAME,this._currentFrame),!0===this.autoUpdateMatrices&&this.update(n.mat2d.create(),1),null!==this._clippingStrategy&&null!==this._camera&&this._clippingStrategy(this,this._camera),this._renderer.clear(),this.render(this._renderer),this._renderer.draw(this._renderer.getCanvas(),this._renderer.getContext()),this.emit(o.FRAME_END,this._currentFrame)}update(t,e){null!==this._camera&&(this._camera.update(t,1),t=this._camera.getRevertWorldMatrix()),super.update(t,e)}}var o;e.default=a,function(t){t.ENTER_FRAME="ENTER_FRAME",t.FRAME_END="FRAME_END"}(o=e.StageEvent||(e.StageEvent={}))},2359:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(7632),i=r(4870),s=r(5827),a=r(1057),o=r(978);class h extends i.default{constructor(){super(),this._stage=null,this._lastFrameTime=0,this._monitoring=!1,this._elapsedTime=0,this._enterFrame=t=>{this._elapsedTime=(new Date).getTime()-this._lastFrameTime,this._lastFrameTime=(new Date).getTime();const e=t.getPayload(),r=this._stage.getRenderer().getNumDrawCalls(),n=this._stage.getRenderer().getChildren().length;if(e%60==0){const t="fps: "+this.getFps()+", frame: "+e+", drawCalls: "+r+", quads: "+n,i=this._context;i.beginPath(),i.fillStyle="black",i.fillRect(0,0,this.width,this.height),i.fill(),i.font="20px Arial",i.fillStyle="red",i.fillText(t,0,Math.round(this.height/2)),i.closePath()}};const t=o.default.create();this.width=t.width=450,this.height=t.height=50,this.texture=new s.default("stats_texture",new a.default(t),0,0,t.width,t.height),this.texture.data.isDynamic=!0,this._context=this.texture.source.getContext("2d")}getStage(){return this._stage}setStage(t){this.stop(),this._stage=t}start(){null!==this._stage&&this._stage.subscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!0}stop(){null!==this._stage&&this._stage.unsubscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!1}getFps(){return this._monitoring?Math.round(1e3/this._elapsedTime):-1}}e.default=h},5850:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.Stats=e.StageEvent=e.Stage=e.DisplayObjectContainer=e.DisplayObject=e.AnimationEvent=e.Animation=void 0;const n=r(5165);e.Animation=n.default,Object.defineProperty(e,"AnimationEvent",{enumerable:!0,get:function(){return n.AnimationEvent}});const i=r(4870);e.DisplayObject=i.default;const s=r(5055);e.DisplayObjectContainer=s.default;const a=r(7632);e.Stage=a.default,Object.defineProperty(e,"StageEvent",{enumerable:!0,get:function(){return a.StageEvent}});const o=r(2359);e.Stats=o.default;const h=r(528);e.Camera=h.default},4849:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},2041:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(978);e.default=class{constructor(){this._children=[],this._canvas=n.default.create(),this._context=this._canvas.getContext("2d")}getNumDrawCalls(){return this._children.length}getContext(){return this._context}getCanvas(){return this._canvas}add(t){this._children.push(t)}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){e.clearRect(0,0,t.width,t.height),this._children.forEach((t=>{if(null===t.texture)return;const r=t.worldMatrix;e.save(),e.globalAlpha=t.worldOpacity,e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),e.drawImage(t.texture.source,t.texture.sx,t.texture.sy,t.texture.sw,t.texture.sh,0,0,t.width,t.height),e.restore()}))}}},4367:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas2DRenderer=void 0;const n=r(2041);e.Canvas2DRenderer=n.default},9279:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},9332:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1261);e.default=class{constructor(t){this.id=0,this.fragmentShader=null,this.vertexShader=null,this.program=null,this.projectionPointer=0,this._init(t)}_init(t){let e=0,r=0,i=0,s=0,a=0,o=0,h=0,u=0,l=4*n.default.VERTEX_SIZE;if(this.fragmentShader=this._compile(t,this._getFragmentSource(),t.FRAGMENT_SHADER),this.vertexShader=this._compile(t,this._getVertexSource(),t.VERTEX_SHADER),null!=this.program&&t.deleteProgram(this.program),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error("Could not initialise shaders");t.useProgram(this.program),r=t.getAttribLocation(this.program,"worldOpacity"),e=t.getAttribLocation(this.program,"vertexPos"),s=t.getAttribLocation(this.program,"uvCoords"),a=t.getAttribLocation(this.program,"wmat1"),o=t.getAttribLocation(this.program,"wmat2"),i=t.getAttribLocation(this.program,"texturePos"),t.enableVertexAttribArray(i),t.enableVertexAttribArray(r),t.enableVertexAttribArray(e),t.enableVertexAttribArray(s),t.enableVertexAttribArray(a),t.enableVertexAttribArray(o),t.vertexAttribPointer(e,2,t.FLOAT,!1,l,0),t.vertexAttribPointer(s,2,t.FLOAT,!1,l,8),t.vertexAttribPointer(a,4,t.FLOAT,!1,l,16),t.vertexAttribPointer(o,2,t.FLOAT,!1,l,32),t.vertexAttribPointer(r,1,t.FLOAT,!1,l,40),t.vertexAttribPointer(i,1,t.FLOAT,!1,l,44),h=t.getUniformLocation(this.program,"uSamplers"),u=t.getUniformLocation(this.program,"uProjection");const c=[];for(let t=0;t<n.default.MAX_TEXTURES_UNITS;t++)c.push(t);t.uniform1iv(h,c),this.projectionPointer=u}_compile(t,e,r){const n=t.createShader(r);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(e+"*********"+t.getShaderInfoLog(n));return n}_getVertexSource(){return"\n\t\tattribute vec2 vertexPos;\n\t\tattribute vec2 uvCoords;\n\t\tattribute vec4 wmat1;\n\t\tattribute vec2 wmat2;\n\t\tattribute float worldOpacity;\n\t\tattribute float texturePos;\n\t\tvarying float textureIndex;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tuniform vec2 uProjection;\n\t\tconst vec3 center = vec3(-1.0, 1.0, 0);\n\n\n\n\t\tvoid main(void) {\n\n\t\t\tmat3 worldMatrix = mat3(\n\t\t\t\tvec3(wmat1.x, wmat1.z, wmat2.x),\n\t\t\t\tvec3(wmat1.y, wmat1.w, wmat2.y),\n\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t);\n\n\t\t\tvec3 tmp = vec3( vertexPos, 1.0) * worldMatrix;\n\t\t\tgl_Position = vec4((tmp / vec3(uProjection,1)) + center, 1.0);\n\n\t\t\tuvs = uvCoords;\n\t\t\ttextureIndex = texturePos;\n\n\t\t\tvColor = vec4(1.0, 1.0, 1.0, worldOpacity);\n\n\t\t}\n        "}_getFragmentSource(){let t="";for(let e=0;e<n.default.MAX_TEXTURES_UNITS;e++)e>0&&(t+="else "),t+=`if(index == ${e}){\n\t\t\t\tgl_FragColor = texture2D(uSamplers[${e}], uvs) * vColor.a;\n\t\t\t}`;return`\n\t\t#define numTextures ${n.default.MAX_TEXTURES_UNITS}\n\n\t\tprecision lowp float;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tvarying float textureIndex;\n\t\tuniform sampler2D uSamplers[numTextures];\n        \n\t\tvoid main(void) {\n\t\t\tint index = int(textureIndex);\n\t\t\t${t}\n\t\t}\n        `}}},904:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._textureChannel=[],this._context=null}reset(t,e){this._context=t,this._textureChannel=[];for(let t=0;t<e;t++)this._textureChannel.push({pos:t,id:this._context["TEXTURE"+t],data:null})}hasEmptyChannels(){return this.getEmptyChannels().length>0}getEmptyChannels(){return this._textureChannel.filter((t=>null===t.data))}getNonEmptyChannels(){return this._textureChannel.filter((t=>null!==t.data))}getChannelByUid(t){return this._textureChannel.find((e=>null!==e.data&&e.data.uid===t))||null}getChannels(){return this._textureChannel}getNonEmptyChannelsMappedByUid(){const t=new Map;return this.getNonEmptyChannels().forEach((e=>{t.set(e.data.uid,e)})),t}getChannelAt(t){return this._textureChannel[t]||null}isChannelEmptyAt(t){return null===this.getChannelAt(t).data}fillChannelAt(t,e){const r=this.getChannelAt(t);if(null===r)return!1;try{r.data=e,r.data.texturePos=t,this._context.activeTexture(r.id),this._context.bindTexture(this._context.TEXTURE_2D,e.getGlTexture(this._context))}catch(t){return console.log(t),!1}return!0}}},1261:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createIndexArray=e.createVertexArray=e.pushVerticesInto=e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL=e.MAX_TEXTURES_UNITS=e.NUM_VERTICES_PER_QUAD=e.INDICES_PER_QUAD=e.VERTEX_SIZE=void 0;const n=r(351);function i(t,e){let r=0,n=null,i=0,s=0,a=0,o=0,h=0,u=0,l=0,c=null,d=0,f=0,_=null,g=0;for(let m=0;m<t.length;m++)c=t[m],l=c.texture.data.texturePos,n=c.worldMatrix,d=c.width,f=c.height,_=c.texture,g=c.worldOpacity,i=n[0],s=n[1],a=n[2],o=n[3],h=n[4],u=n[5],e[r+0]=0,e[r+1]=0,e[r+2]=_.topLeftUv.u,e[r+3]=_.topLeftUv.v,e[r+4]=i,e[r+5]=s,e[r+6]=a,e[r+7]=o,e[r+8]=h,e[r+9]=u,e[r+10]=g,e[r+11]=l,e[r+12]=d,e[r+13]=0,e[r+14]=_.topRightUv.u,e[r+15]=_.topRightUv.v,e[r+16]=i,e[r+17]=s,e[r+18]=a,e[r+19]=o,e[r+20]=h,e[r+21]=u,e[r+22]=g,e[r+23]=l,e[r+24]=0,e[r+25]=f,e[r+26]=_.bottomLeftUv.u,e[r+27]=_.bottomLeftUv.v,e[r+28]=i,e[r+29]=s,e[r+30]=a,e[r+31]=o,e[r+32]=h,e[r+33]=u,e[r+34]=g,e[r+35]=l,e[r+36]=d,e[r+37]=f,e[r+38]=_.bottomRightUv.u,e[r+39]=_.bottomRightUv.v,e[r+40]=i,e[r+41]=s,e[r+42]=a,e[r+43]=o,e[r+44]=h,e[r+45]=u,e[r+46]=g,e[r+47]=l,r+=48}function s(){return new Float32Array(e.MAX_QUAD_PER_CALL*e.VERTEX_SIZE*e.NUM_VERTICES_PER_QUAD)}function a(){const t=e.MAX_QUAD_PER_CALL*e.INDICES_PER_QUAD,r=new Uint16Array(t);let n=0;for(let i=0;i<t;i+=e.INDICES_PER_QUAD)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+1,r[i+4]=n+2,r[i+5]=n+3,n+=e.NUM_VERTICES_PER_QUAD;return r}e.VERTEX_SIZE=12,e.INDICES_PER_QUAD=6,e.NUM_VERTICES_PER_QUAD=4,e.MAX_TEXTURES_UNITS=function(t){const e=n.CanvasUtils.create().getContext("webgl");return e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(),e.MAX_QUAD_PER_CALL=Math.floor(65535/e.INDICES_PER_QUAD),e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL*e.NUM_VERTICES_PER_QUAD*e.VERTEX_SIZE,e.pushVerticesInto=i,e.createVertexArray=s,e.createIndexArray=a;class o{}e.default=o,o.VERTEX_SIZE=e.VERTEX_SIZE,o.NUM_VERTICES_PER_QUAD=e.NUM_VERTICES_PER_QUAD,o.MAX_TEXTURES_UNITS=e.MAX_TEXTURES_UNITS,o.MAX_QUAD_PER_CALL=e.MAX_QUAD_PER_CALL,o.VERTEX_ARRAY_SIZE=e.VERTEX_ARRAY_SIZE,o.INDICES_PER_QUAD=e.INDICES_PER_QUAD,o.pushVerticesInto=i,o.createVertexArray=s,o.createIndexArray=a},5798:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(9332),i=r(1261),s=r(978),a=r(767),o=r(904),h=r(1268);e.default=class{constructor(){this._children=[],this._drawCalls=0,this._init()}_init(){this._canvas=s.default.create(),this._context=this._canvas.getContext("webgl"),this._vertexArray=i.default.createVertexArray(),this._indexArray=i.default.createIndexArray(),this._vertexBuffer=this._context.createBuffer(),this._indexBuffer=this._context.createBuffer(),this._context.bindBuffer(this._context.ARRAY_BUFFER,this._vertexBuffer),this._context.bufferData(this._context.ARRAY_BUFFER,this._vertexArray,this._context.DYNAMIC_DRAW),this._context.bindBuffer(this._context.ELEMENT_ARRAY_BUFFER,this._indexBuffer),this._context.bufferData(this._context.ELEMENT_ARRAY_BUFFER,this._indexArray,this._context.STATIC_DRAW),this._currentShader=new n.default(this._context),this._context.disable(this._context.DEPTH_TEST),this._context.disable(this._context.CULL_FACE),this._context.blendFunc(this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA),this._context.enable(this._context.BLEND)}add(t){this._children.push(t)}getNumDrawCalls(){return this._drawCalls}getCanvas(){return this._canvas}getContext(){return this._context}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){const r=t.width/2,n=-t.height/2;e.uniform2f(this._currentShader.projectionPointer,r,n),e.clearColor(0,0,0,1),e.viewport(0,0,t.width,t.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=new o.default,a=this.batch(this._children);this._drawCalls=0,a.forEach((t=>{s.reset(e,i.default.MAX_TEXTURES_UNITS),Array.from(t.datas).forEach(((t,e)=>{s.fillChannelAt(e,t)})),t.subBatches.forEach((t=>{i.default.pushVerticesInto(t.objects,this._vertexArray),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertexArray),e.drawElements(e.TRIANGLES,t.objects.length*i.default.INDICES_PER_QUAD,e.UNSIGNED_SHORT,0),this._drawCalls++}))}))}batch(t){const e=a.default.create(t.filter((t=>null!==t.texture)),i.default.MAX_TEXTURES_UNITS);return e.forEach((t=>{t.subBatches=h.default.create(t.objects,i.default.MAX_QUAD_PER_CALL)})),e}}},1268:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.subBatches=[],this.full=!1,this.objects=[]}static create(t,e){const n=[];for(;t.length>0;){const i=new r;i.objects=t.splice(0,e),i.full=i.objects.length>=e,n.push(i)}return n.filter((t=>t.objects.length>0))}}e.default=r},767:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.subBatches=[],this.objects=[],this.uids=new Set,this.datas=new Set}static create(t,e){const n=[new r];let i=n[0],s=0;for(let a=0;a<t.length;a++){const o=t[a],h=o.texture.textureUid;i.uids.has(h)||(i.uids.size>=e&&(i.objects=t.slice(s,a),s=a,i=new r,n.push(i)),i.uids.add(h),i.datas.add(o.texture.data))}return i.objects=t.slice(s),n.filter((t=>t.objects.length>0))}}e.default=r},7379:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BatchDrawCall=e.BatchTexture=void 0;const n=r(1268);e.BatchDrawCall=n.default;const i=r(767);e.BatchTexture=i.default},3515:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pushVerticesInto=e.createVertexArray=e.createIndexArray=e.VERTEX_SIZE=e.VERTEX_ARRAY_SIZE=e.NUM_VERTICES_PER_QUAD=e.MAX_QUAD_PER_CALL=e.INDICES_PER_QUAD=e.TextureDataManager=e.WebGlConfig=e.Webgl2DRenderer=e.Default2DShader=void 0;const n=r(9332);e.Default2DShader=n.default;const i=r(5798);e.Webgl2DRenderer=i.default;const s=r(904);e.TextureDataManager=s.default;const a=r(1261);e.WebGlConfig=a.default,Object.defineProperty(e,"INDICES_PER_QUAD",{enumerable:!0,get:function(){return a.INDICES_PER_QUAD}}),Object.defineProperty(e,"MAX_QUAD_PER_CALL",{enumerable:!0,get:function(){return a.MAX_QUAD_PER_CALL}}),Object.defineProperty(e,"NUM_VERTICES_PER_QUAD",{enumerable:!0,get:function(){return a.NUM_VERTICES_PER_QUAD}}),Object.defineProperty(e,"VERTEX_ARRAY_SIZE",{enumerable:!0,get:function(){return a.VERTEX_ARRAY_SIZE}}),Object.defineProperty(e,"VERTEX_SIZE",{enumerable:!0,get:function(){return a.VERTEX_SIZE}}),Object.defineProperty(e,"createIndexArray",{enumerable:!0,get:function(){return a.createIndexArray}}),Object.defineProperty(e,"createVertexArray",{enumerable:!0,get:function(){return a.createVertexArray}}),Object.defineProperty(e,"pushVerticesInto",{enumerable:!0,get:function(){return a.pushVerticesInto}})},6902:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5827),i=r(978),s=r(5050),a=r(9319);e.default=class{constructor(t,e,r=[]){this._width=0,this._height=0,this._zones=[],this._textures=[],this._textureData=null,this._reset(t,e,r)}_sortZonesByAreaAsc(t,e){return t.getArea()>e.getArea()?-1:1}_sortSourcesByAreaAsc(t,e){return t.source.width*t.source.height>e.source.width*e.source.height?-1:1}_drawTextures(){const t=i.default.create(this._width,this._height),e=n.default.createFromSource("main",t),r=e.data.getSource().getContext("2d"),s=this.getZones().filter((t=>!t.isEmpty())),a=s.map((t=>({id:t.data.id,sx:t.x,sy:t.y,sw:t.width,sh:t.height})));return s.forEach((t=>{r.save(),r.drawImage(t.data.source,t.x,t.y,t.width,t.height),r.restore()})),this._textureData=e.data,e.createSubTextures(a)}_addSource(t){const e=this._findFreeZoneFor(t.source);if(null===e)return!1;let r=null,n=null;return t.source.width>t.source.height?(r=e.splitBottom(t.source.height),n=e.splitRight(t.source.width)):(n=e.splitRight(t.source.width),r=e.splitBottom(t.source.height)),e.data=t,null!==n&&n.getArea()>0&&this._zones.push(n),null!==r&&r.getArea()>0&&this._zones.push(r),!0}_findFreeZoneFor(t){return this._zones.sort(this._sortZonesByAreaAsc),this._zones.find((e=>e.canContain(t.width,t.height)&&e.isEmpty()))||null}_reset(t,e,r){this._width=s.default.getNextPowerOf2(t),this._height=s.default.getNextPowerOf2(e);const n=new a.default;n.x=0,n.y=0,n.width=this._width,n.height=this._height,n.data=null,this._zones=[n],r.sort(this._sortSourcesByAreaAsc),r.forEach((t=>{this._addSource(t)})),this._textures=this._drawTextures()}getTextureData(){return this._textureData}getTextures(){return this._textures}getZones(){return this._zones}getWidth(){return this._width}getHeight(){return this._height}}},5827:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1057);class i{constructor(t="",e,r=0,n=0,i=0,s=0){this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.topLeftUv={u:0,v:0},this.topRightUv={u:0,v:0},this.bottomLeftUv={u:0,v:0},this.bottomRightUv={u:0,v:0},this.id="",this._data=e,this.sx=r,this.sy=n,this.sw=i,this.sh=s,this.id=t,this.calcUv()}calcUv(){const t=this._data.getSource().width,e=this._data.getSource().height,r=this.sx/t,n=(this.sx+this.sw)/t,i=this.sy/e,s=(this.sy+this.sh)/e;this.topLeftUv.u=r,this.topLeftUv.v=i,this.topRightUv.u=n,this.topRightUv.v=i,this.bottomLeftUv.u=r,this.bottomLeftUv.v=s,this.bottomRightUv.u=n,this.bottomRightUv.v=s}get textureUid(){return this._data.uid}get data(){return this._data}get source(){return this._data.getSource()}createSubTexture(t,e,r,n,s){return new i(t,this._data,e,r,n,s)}createSubTextures(t){return t.map((t=>this.createSubTexture(t.id,t.sx,t.sy,t.sw,t.sh)))}static createFromSource(t,e){const r=new n.default(e);return e instanceof HTMLVideoElement&&(r.isDynamic=!0),new i(t,r,0,0,r.width,r.height)}}e.default=i},1057:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(978),i=r(5050);class s{constructor(t){this.width=0,this.height=0,this.texturePos=0,this._glTexture=null,this._isDynamic=!1,this._updateNextFrame=!1,this.setSource(t),this._uid="texture_data_"+s._counter++}setSource(t){const e=i.default.getNextPowerOf2(t.width),r=i.default.getNextPowerOf2(t.height),s=n.default.create(),a=s.getContext("2d");s.width=e,s.height=r,a.drawImage(t,0,0),this._source=s,this.width=e,this.height=r,this._updateNextFrame=!0}getSource(){return this._source}getGlTexture(t){return null===this._glTexture&&(this._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null)),(this._isDynamic||this._updateNextFrame)&&(this._updateNextFrame=!1,t.bindTexture(t.TEXTURE_2D,this._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source)),this._glTexture}get uid(){return this._uid}get isDynamic(){return this._isDynamic}set isDynamic(t){this._isDynamic=t}}e.default=s,s._counter=0},9319:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.data=null}isEmpty(){return null===this.data}_partialClone(){const t=new r;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}splitRight(t){if(t>=this.width)return null;const e=this._partialClone();return e.x+=t,e.width-=t,this.width=t,e}splitLeft(t){if(t>=this.width)return null;const e=this._partialClone();return this.x+=t,this.width-=t,e.width=t,e}splitBottom(t){if(t>=this.height)return null;const e=this._partialClone();return e.y+=t,e.height-=t,this.height=t,e}splitTop(t){if(t>=this.height)return null;const e=this._partialClone();return this.y+=t,this.height-=t,e.height=t,e}getArea(){return this.width*this.height}canContain(t,e){return t<=this.width&&e<=this.height}}e.default=r},1940:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Zone=e.TextureData=e.Texture=e.Spritesheet=void 0;const n=r(6902);e.Spritesheet=n.default;const i=r(5827);e.Texture=i.default;const s=r(1057);e.TextureData=s.default;const a=r(9319);e.Zone=a.default},978:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static create(t=1,e=1){const r=document.createElement("canvas");return r.width=t,r.height=e,r}static fillRect(t,e,r,n,i,s){const a=t.getContext("2d");a.save(),a.beginPath(),a.fillStyle=e,a.fillRect(r,n,i,s),a.fill(),a.closePath(),a.restore()}static getCanvasPixels(t){const e=r.create(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),e.getContext("2d").getImageData(0,0,e.width,e.height).data}static getCanvasPixel(t,e,n){const i=r.getCanvasPixels(t),s=Math.floor(n*t.width*4)+4*e;return[i[s],i[s+1],i[s+2],i[s+3]]}static canvasPixelToRGBA(t){return{r:t[0],g:t[1],b:t[2],a:t[3]}}static pixelsAreTheSame(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}}e.default=r},2843:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),i=r(2727);class s{static getFastAngle(){const t=[];for(let e=0;e<=360;e++)t.push(e*this.TO_RADIANS);return t}static getFastSinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.sin(e*this.TO_RADIANS);return t}static getFastCosinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.cos(e*this.TO_RADIANS);return t}static updateTransformAll(t,e){let r=t[0],i=t[1],a=t[2],o=t[3],h=t[4],u=t[5],l=n.mat2d.create(),c=n.mat2d.create(),d=n.mat2d.create(),f=null,_=null,g=0,m=0,p=0,M=0,v=0,b=0,x=0;for(let n=0;n<e.length;n++)f=e[n],c=f.matrix,d=f.worldMatrix,g=(f.rotation%360+360)%360>>0,m=s.FAST_SIN[g],p=s.FAST_COS[g],M=f.transformOrigin.x>>0,v=f.transformOrigin.y>>0,b=f.scaleX,x=f.scaleY,c[0]=p*b,c[1]=m*b,c[2]=-m*x,c[3]=p*x,c[4]=c[0]*-M+c[2]*-v+f.x+M,c[5]=c[1]*-M+c[3]*-v+f.y+v,f.parent!==_&&(l=null!==f.parent?f.parent.worldMatrix:t,_=f.parent,r=l[0],i=l[1],a=l[2],o=l[3],h=l[4],u=l[5]),d[0]=r*c[0]+a*c[1],d[1]=i*c[0]+o*c[1],d[2]=r*c[2]+a*c[3],d[3]=i*c[2]+o*c[3],d[4]=r*c[4]+a*c[5]+h,d[5]=i*c[4]+o*c[5]+u}static updateTransform(t,e){const r=e.matrix,n=e.worldMatrix,i=e.rotation<0?(360+e.rotation>>0)%360:(e.rotation>>0)%360;let s=r[0],a=r[1],o=r[2],h=r[3],u=r[4],l=r[5],c=t[0],d=t[1],f=t[2],_=t[3],g=t[4],m=t[5],p=0,M=0,v=0,b=0;r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e.x+e.transformOrigin.x>>0,r[5]=e.y+e.transformOrigin.y>>0,s=r[0],a=r[1],o=r[2],h=r[3],u=r[4],l=r[5],p=this.FAST_SIN[i],M=this.FAST_COS[i],r[0]=s*M+o*p,r[1]=a*M+h*p,r[2]=s*-p+o*M,r[3]=a*-p+h*M,r[4]=u,r[5]=l,s=r[0],a=r[1],o=r[2],h=r[3],u=r[4],l=r[5],v=e.scaleX,b=e.scaleY,r[0]=s*v,r[1]=a*v,r[2]=o*b,r[3]=h*b,r[4]=u,r[5]=l,s=r[0],a=r[1],o=r[2],h=r[3],u=r[4],l=r[5],v=-e.transformOrigin.x>>0,b=-e.transformOrigin.y>>0,r[0]=s,r[1]=a,r[2]=o,r[3]=h,r[4]=s*v+o*b+u,r[5]=a*v+h*b+l,c=r[0],d=r[1],f=r[2],_=r[3],g=r[4],m=r[5],s=t[0],a=t[1],o=t[2],h=t[3],u=t[4],l=t[5],n[0]=s*c+o*d,n[1]=a*c+h*d,n[2]=s*f+o*_,n[3]=a*f+h*_,n[4]=s*g+o*m+u,n[5]=a*g+h*m+l}static getHitbox(t){if(i.isDisplayObjectContainer(t)){const e=t.getChildren().map((t=>this.getHitbox(t))),r=[],n=[];e.forEach((t=>{r.push(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),n.push(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y)}));const i=Math.min(...r),s=Math.max(...r),a=Math.min(...n),o=Math.max(...n);return{topLeft:{x:i,y:a},topRight:{x:s,y:a},bottomLeft:{x:i,y:o},bottomRight:{x:s,y:o}}}{const e=t.worldMatrix;return{topLeft:this.transformPoint(0,0,e),topRight:this.transformPoint(t.width,0,e),bottomLeft:this.transformPoint(0,t.height,e),bottomRight:this.transformPoint(t.width,t.height,e)}}}static getBoundingRect(t){const e=this.getHitbox(t),r=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),n=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y);return{x:r,y:i,width:n-r,height:Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y)-i}}static transformPoint(t,e,r){return{x:Math.round(t*r[0]+e*r[2]+r[4]),y:Math.round(t*r[1]+e*r[3]+r[5])}}static collide(t,e,r){const n=this.getBoundingRect(r);return!(t<n.x||t>n.x+n.width||e<n.y||e>n.y+n.height)}}e.default=s,s.TO_RADIANS=Math.PI/180,s.FAST_ANGLES=s.getFastAngle(),s.FAST_SIN=s.getFastSinus(),s.FAST_COS=s.getFastCosinus()},5050:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getNextPowerOf2(t){let e=1;for(;e<t;)e*=2;return e}}},351:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=e.isWebGLAvailable=e.isDisplayObjectContainer=e.Geometry=e.CanvasUtils=void 0;const n=r(978);e.CanvasUtils=n.default;const i=r(2843);e.Geometry=i.default;const s=r(2727);Object.defineProperty(e,"isDisplayObjectContainer",{enumerable:!0,get:function(){return s.isDisplayObjectContainer}}),Object.defineProperty(e,"isWebGLAvailable",{enumerable:!0,get:function(){return s.isWebGLAvailable}});const a=r(5050);e.MathUtils=a.default},2727:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isWebGLAvailable=e.isDisplayObjectContainer=void 0;const n=r(978);e.isDisplayObjectContainer=function(t){return void 0!==t.getChildren},e.isWebGLAvailable=function(){return null!==n.default.create().getContext("webgl")}},5590:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(5983),e),i(r(7392),e),i(r(5850),e),i(r(4849),e),i(r(9279),e),i(r(4367),e),i(r(3515),e),i(r(7379),e),i(r(1940),e),i(r(351),e),i(r(4919),e),i(r(2380),e),i(r(2576),e),i(r(5794),e),i(r(9510),e),i(r(8791),e),i(r(4499),e),i(r(1035),e),i(r(7072),e),i(r(2677),e),i(r(3407),e),i(r(8433),e),r(887).glMatrix.setMatrixArrayType(Array)},7690:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.id="",this.state={}}}},9510:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameNode=void 0;const n=r(7690);e.GameNode=n.default},220:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this._map=[],this._numRows=0,this._numCols=0}reset(t,e){this._numRows=t,this._numCols=e,this._map=[];for(let r=0;r<t;r++){const t=[];for(let r=0;r<e;r++)t.push(null);this._map.push(t)}}destroy(){this._map=[],this._numRows=0,this._numCols=0}getNeighbours(t,e){return{topLeft:this.getTopLeft(t,e),top:this.getTop(t,e),topRight:this.getTopRight(t,e),left:this.getLeft(t,e),center:this.getAt(t,e),right:this.getRight(t,e),bottomLeft:this.getBottomLeft(t,e),bottom:this.getBottom(t,e),bottomRight:this.getBottomRight(t,e)}}getLeft(t,e){return this.getAt(t,e-1)}getRight(t,e){return this.getAt(t,e+1)}getBottom(t,e){return this.getAt(t+1,e)}getBottomLeft(t,e){return this.getAt(t+1,e-1)}getBottomRight(t,e){return this.getAt(t+1,e+1)}getTop(t,e){return this.getAt(t-1,e)}getTopLeft(t,e){return this.getAt(t-1,e-1)}getTopRight(t,e){return this.getAt(t-1,e+1)}getAt(t,e){return this.isOutOfBounds(t,e)?null:this._map[t][e]}addAt(t,e,r){this.isOutOfBounds(t,e)||(this._map[t][e]=r)}removeAt(t,e){this.isOutOfBounds(t,e)||(this._map[t][e]=null)}isOutOfBounds(t,e){return t>this.numRows-1||e>this.numCols-1||t<0||e<0}forEach(t){for(let e=0;e<this.numRows;e++)for(let r=0;r<this.numCols;r++)t(this._map[e][r],e,r)}map(t){const e=[];for(let r=0;r<this.numRows;r++){e[r]=[];for(let n=0;n<this.numCols;n++)e[r][n]=t(this._map[r][n],r,n)}return r.from(e)}extract(t,e,n,i){const s=[];e=e>this.numRows-1?this.numRows-1:e,i=i>this.numCols-1?this.numCols-1:i,n=n<0?0:n;for(let r=t=t<0?0:t;r<=e;r++){const t=[];for(let e=n;e<=i;e++)t.push(this.getAt(r,e));s.push(t)}return r.from(s)}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}static from(t){const e=new r,n=t.length,i=t[0]?.length||0;e.reset(n,i);for(let r=0;r<n;r++)for(let n=0;n<i;n++)e.addAt(r,n,t[r][n]);return e}}e.default=r},7569:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this._map=[],this._numRows=0,this._numCols=0,this._numLayers=0}reset(t,e,r){this._numRows=t,this._numCols=e,this._numLayers=r,this._map=[];for(let n=0;n<r;n++){const r=[];this._map.push(r);for(let n=0;n<t;n++){const t=[];r.push(t);for(let r=0;r<e;r++)t.push(null)}}}destroy(){this._map=[],this._numRows=0,this._numCols=0,this._numLayers=0}getAt(t,e,r){return this.isOutOfBounds(t,e,r)?null:this._map[r][t][e]}addAt(t,e,r,n){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=n)}removeAt(t,e,r){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=null)}isOutOfBounds(t,e,r){return t>this.numRows-1||e>this.numCols-1||r>this.numLayers-1||r<0||t<0||e<0}forEach(t){for(let e=0;e<this.numLayers;e++)for(let r=0;r<this.numRows;r++)for(let n=0;n<this.numCols;n++)t(this._map[e][r][n],r,n,e)}getNeighbours(t,e,r){return{topLeftFront:this.getTopLeftFront(t,e,r),topFront:this.getTopFront(t,e,r),topRightFront:this.getTopRightFront(t,e,r),leftFront:this.getLeftFront(t,e,r),centerFront:this.getFront(t,e,r),rightFront:this.getRightFront(t,e,r),bottomLeftFront:this.getBottomLeftFront(t,e,r),bottomFront:this.getBottomFront(t,e,r),bottomRightFront:this.getBottomRightFront(t,e,r),topLeftBack:this.getTopLeftBack(t,e,r),topBack:this.getTopBack(t,e,r),topRightBack:this.getTopRightBack(t,e,r),leftBack:this.getLeftBack(t,e,r),centerBack:this.getBack(t,e,r),rightBack:this.getRightBack(t,e,r),bottomLeftBack:this.getBottomLeftBack(t,e,r),bottomBack:this.getBottomBack(t,e,r),bottomRightBack:this.getBottomRightBack(t,e,r),topLeft:this.getTopLeft(t,e,r),top:this.getTop(t,e,r),topRight:this.getTopRight(t,e,r),left:this.getLeft(t,e,r),center:this.getAt(t,e,r),right:this.getRight(t,e,r),bottomLeft:this.getBottomLeft(t,e,r),bottom:this.getBottom(t,e,r),bottomRight:this.getBottomRight(t,e,r)}}getLeftFront(t,e,r){return this.getAt(t,e-1,r-1)}getRightFront(t,e,r){return this.getAt(t,e+1,r-1)}getBottomFront(t,e,r){return this.getAt(t+1,e,r-1)}getBottomLeftFront(t,e,r){return this.getAt(t+1,e-1,r-1)}getBottomRightFront(t,e,r){return this.getAt(t+1,e+1,r-1)}getTopFront(t,e,r){return this.getAt(t-1,e,r-1)}getTopLeftFront(t,e,r){return this.getAt(t-1,e-1,r-1)}getTopRightFront(t,e,r){return this.getAt(t-1,e+1,r-1)}getFront(t,e,r){return this.getAt(t,e,r-1)}getBack(t,e,r){return this.getAt(t,e,r+1)}getLeftBack(t,e,r){return this.getAt(t,e-1,r+1)}getRightBack(t,e,r){return this.getAt(t,e+1,r+1)}getBottomBack(t,e,r){return this.getAt(t+1,e,r+1)}getBottomLeftBack(t,e,r){return this.getAt(t+1,e-1,r+1)}getBottomRightBack(t,e,r){return this.getAt(t+1,e+1,r+1)}getTopBack(t,e,r){return this.getAt(t-1,e,r+1)}getTopLeftBack(t,e,r){return this.getAt(t-1,e-1,r+1)}getTopRightBack(t,e,r){return this.getAt(t-1,e+1,r+1)}getLeft(t,e,r){return this.getAt(t,e-1,r)}getRight(t,e,r){return this.getAt(t,e+1,r)}getBottom(t,e,r){return this.getAt(t+1,e,r)}getBottomLeft(t,e,r){return this.getAt(t+1,e-1,r)}getBottomRight(t,e,r){return this.getAt(t+1,e+1,r)}getTop(t,e,r){return this.getAt(t-1,e,r)}getTopLeft(t,e,r){return this.getAt(t-1,e-1,r)}getTopRight(t,e,r){return this.getAt(t-1,e+1,r)}map(t){const e=[];for(let r=0;r<this.numLayers;r++){e[r]=[];for(let n=0;n<this.numRows;n++){e[r][n]=[];for(let i=0;i<this.numCols;i++)e[r][n][i]=t(this._map[r][n][i],n,i,r)}}return r.from(e)}extract(t,e,n,i,s,a){const o=[];a=a>this.numLayers-1?this.numLayers-1:a,e=e>this.numRows-1?this.numRows-1:e,i=i>this.numCols-1?this.numCols-1:i,t=t<0?0:t,n=n<0?0:n;for(let r=s=s<0?0:s;r<=a;r++){const s=[];for(let a=t;a<=e;a++){const t=[];for(let e=n;e<=i;e++)t.push(this.getAt(a,e,r));s.push(t)}o.push(s)}return r.from(o)}static from(t){const e=new r,n=t.length,i=t[0]?.length||0,s=t[0]?.[0]?.length||0;e.reset(i,s,n);for(let r=0;r<n;r++)for(let n=0;n<i;n++)for(let i=0;i<s;i++)e.addAt(n,i,r,t[r][n][i]);return e}get numLayers(){return this._numLayers}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}}e.default=r},8791:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid3D=e.Grid2D=void 0;const n=r(220);e.Grid2D=n.default;const i=r(7569);e.Grid3D=i.default},5462:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n}toString(){return"[x:"+this.x+",y:"+this.y+",width:"+this.width+",height:"+this.height+"]"}collideBox(t){return this.collidePoint(t.x,t.y)||this.collidePoint(t.x+t.width,t.y)||this.collidePoint(t.x,t.y+t.height)||this.collidePoint(t.x+t.width,t.y+t.height)||t.collidePoint(this.x,this.y)||t.collidePoint(this.x+this.width,this.y)||t.collidePoint(this.x,this.y+this.height)||t.collidePoint(this.x+this.width,this.y+this.height)}collidePoint(t,e){return!(t<this.x||e<this.y||t>this.x+this.width||e>this.y+this.height)}getMidX(){return this.x+this.width/2}getMidY(){return this.y+this.height/2}splitVertical(){return[new r(this.x,this.y,this.width/2,this.height),new r(this.getMidX(),this.y,this.width/2,this.height)]}splitHorizontal(){return[new r(this.x,this.y,this.width,this.height/2),new r(this.x,this.getMidY(),this.width,this.height/2)]}}e.default=r},4683:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e){this.box=t,this.axis=e}search(t,e,r=[]){if(t.getPartitionMethod().box.collideBox(e)){if(null!==t.getLeft())t.getLeft().search(e,r),t.getRight().search(e,r);else{const n=t.getChildren(),i=n.length;for(let t=0;t<i;t++)n[t].collideBox(e)&&r.push(n[t])}return r}}split(t){const e=[],n=[],i=t.length,s=this.box.getMidX(),a=this.box.getMidY();for(let r=0;r<i;r++){const i=t[r];"x"===this.axis?i.x>=s?n.push(i):e.push(i):i.y>=a?n.push(i):e.push(i)}const o="x"===this.axis?this.box.splitVertical():this.box.splitHorizontal(),h="x"===this.axis?"y":"x";return{left:e,right:n,leftFunction:new r(o[0],h),rightFunction:new r(o[1],h)}}}e.default=r},8955:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r,n){this._maxChildren=t,this._depth=e,this._maxDepth=r,this._partitionMethod=n,this.parent=null,this._left=null,this._right=null,this._children=[],this.reset()}search(...t){return this._partitionMethod.search(this,...t)}reset(){this._children=[],this._left=null,this._right=null}createSubNodes(){const t=this._partitionMethod.split(this.getChildren());this._left=new r(this._maxChildren,this._depth+1,this._maxDepth,t.leftFunction),this._right=new r(this._maxChildren,this._depth+1,this._maxDepth,t.rightFunction),t.left.forEach(this._left.addChild.bind(this._left)),t.right.forEach(this._right.addChild.bind(this._right)),this._left.parent=this,this._right.parent=this,this._children=[]}getChildren(){return this._children}addChild(t){if(this._children.length>=this._maxChildren&&this._depth<this._maxDepth&&this.createSubNodes(),null===this._left&&null===this._right)this._children.push(t);else{const e=this._partitionMethod.split([t]);e.left.length>0&&this._left.addChild(e.left[0]),e.right.length>0&&this._right.addChild(e.right[0])}}getPartitionMethod(){return this._partitionMethod}getLeft(){return this._left}getRight(){return this._right}getDepth(){return this._depth}setDepth(t){this._depth=t}}e.default=r},4499:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Partition2D=e.BoundingBox=e.PartitionTreeNode=void 0;const n=r(5462);e.BoundingBox=n.default;const i=r(4683);e.Partition2D=i.default;const s=r(8955);e.PartitionTreeNode=s.default},557:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._maxWeight=0,this._maxItems=0,this._items=[],this.reset(0,0)}reset(t,e){this.maxWeight=e,this.maxItems=t,this._items=[]}add(t){return this.remainingSpace>0&&this.remainingWeight>=t.weight&&(this._items.push(t),!0)}getAllByCategory(t){return this._items.filter((e=>e.category===t))}getAllCategories(){const t=this._items.map((t=>t.category)),e=new Set(t);return Array.from(e)}getAllGroupByCategory(){return this.getAllCategories().map((t=>({category:t,items:this.getAllByCategory(t)})))}remove(t){const e=this._items.indexOf(t);return e>-1?(this._items.splice(e,1),t):null}contains(t){return this._items.indexOf(t)>-1}get remainingSpace(){return this.maxItems-this._items.length}get totalWeight(){let t=0;for(let e of this._items)t+=e.weight;return t}get numItems(){return this._items.length}get remainingWeight(){return this.maxWeight-this.totalWeight}get maxWeight(){return this._maxWeight}set maxWeight(t){this._maxWeight=t<0?0:t}get maxItems(){return this._maxItems}set maxItems(t){this._maxItems=t<0?0:t}}},1035:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Inventory=void 0;const n=r(557);e.Inventory=n.default},5430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),i=r(9510),s=r(8126);e.default=class{constructor(){this._grid=null,this._currentRow=0,this._currentCol=0}reset(t,e,r,a){this._pathCoords=[],this._grid=new n.Grid2D,this._grid.reset(t,e),this._currentRow=r,this._currentCol=a,this._grid.forEach(((t,e,r)=>{const n=new i.GameNode;n.state.type=e%2==0||r%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol;t.getAt(r,n).state.type=s.default.FREE;const i=[{wall:this._grid.getLeft(r,n),target:this._grid.getLeft(r,n-1),row:r,col:n-2},{wall:this._grid.getRight(r,n),target:this._grid.getRight(r,n+1),row:r,col:n+2},{wall:this._grid.getTop(r,n),target:this._grid.getTop(r-1,n),row:r-2,col:n},{wall:this._grid.getBottom(r,n),target:this._grid.getBottom(r+1,n),row:r+2,col:n}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(i.length>0){const t=i[Math.round(Math.random()*(i.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n]),this._currentRow=t.row,this._currentCol=t.col}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1]}else this._currentRow=null,this._currentCol=null}}},4781:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),i=r(9510),s=r(8126);e.default=class{constructor(){this._grid=null,this._currentRow=0,this._currentCol=0,this._currentLayer=0}reset(t,e,r,a,o,h){this._pathCoords=[],this._grid=new n.Grid3D,this._grid.reset(t,e,r),this._currentRow=a,this._currentCol=o,this._currentLayer=h,this._grid.forEach(((t,e,r,n)=>{const a=new i.GameNode;a.state.type=e%2==0||r%2==0||n%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n,a)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getLayers(){return this._grid.numLayers}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol,this._currentLayer)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol&&null===this._currentLayer}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol,i=this._currentLayer;t.getAt(r,n,i).state.type=s.default.FREE;const a=[{wall:this._grid.getAt(r,n-1,i),target:this._grid.getAt(r,n-2,i),row:r,col:n-2,layer:i},{wall:this._grid.getAt(r,n+1,i),target:this._grid.getAt(r,n+2,i),row:r,col:n+2,layer:i},{wall:this._grid.getAt(r-1,n,i),target:this._grid.getAt(r-2,n,i),row:r-2,col:n,layer:i},{wall:this._grid.getAt(r+1,n,i),target:this._grid.getAt(r+2,n,i),row:r+2,col:n,layer:i},{wall:this._grid.getAt(r,n,i-1),target:this._grid.getAt(r,n,i-2),row:r,col:n,layer:i-2},{wall:this._grid.getAt(r,n,i+1),target:this._grid.getAt(r,n,i+2),row:r,col:n,layer:i+2}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(a.length>0){const t=a[Math.round(Math.random()*(a.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n,i]),this._currentRow=t.row,this._currentCol=t.col,this._currentLayer=t.layer}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1],this._currentLayer=t[2]}else this._currentRow=null,this._currentCol=null,this._currentLayer=null}}},8126:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WALL="WALL",t.FREE="FREE",t.BLOCK="BLOCK"}(r||(r={})),e.default=r},3078:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),i=r(9510);e.default=class{constructor(){this.opened=[],this.closed=[]}createGraphe(t,e){const r=new n.Grid2D;return r.reset(t.numRows,t.numCols),t.forEach(((t,n,s)=>{const a=new i.GameNode;a.state.row=n,a.state.col=s,a.state.g=0,a.state.f=0,a.state.h=0,a.state.walkable=t===e,a.state.parent=null,r.addAt(n,s,a)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r)=>{t&&(t.state.row=e,t.state.col=r,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,i=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const a=[t.getLeft(r.state.row,r.state.col),t.getRight(r.state.row,r.state.col),t.getTop(r.state.row,r.state.col),t.getBottom(r.state.row,r.state.col)];i&&a.push(t.getTopLeft(r.state.row,r.state.col),t.getTopRight(r.state.row,r.state.col),t.getBottomLeft(r.state.row,r.state.col),t.getBottomRight(r.state.row,r.state.col)),a.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const i=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,a=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col))*e.NODE_DISTANCE_VALUE,o=a+s;(i&&s<t.state.g||!i)&&(t.state.parent=r,t.state.g=s,t.state.h=a,t.state.f=o,i||this._addToOpenList(t))}))}const a=[];if(this.opened.length>0){let t=n;for(;t!=r;)a.unshift(t),t=t.state.parent;a.unshift(r)}return a}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},6217:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),i=r(9510);e.default=class{constructor(){this.opened=[],this.closed=[]}createGraphe(t,e){const r=new n.Grid3D;return r.reset(t.numRows,t.numCols,t.numLayers),t.forEach(((t,n,s,a)=>{const o=new i.GameNode;o.state.row=n,o.state.col=s,o.state.layer=a,o.state.g=0,o.state.f=0,o.state.h=0,o.state.walkable=t===e,o.state.parent=null,r.addAt(n,s,a,o)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r,n)=>{t&&(t.state.row=e,t.state.col=r,t.state.layer=n,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,i=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const a=[t.getLeft(r.state.row,r.state.col,r.state.layer),t.getRight(r.state.row,r.state.col,r.state.layer),t.getTop(r.state.row,r.state.col,r.state.layer),t.getBottom(r.state.row,r.state.col,r.state.layer),t.getBack(r.state.row,r.state.col,r.state.layer),t.getFront(r.state.row,r.state.col,r.state.layer)];i&&a.push(t.getTopLeftBack(r.state.row,r.state.col,r.state.layer),t.getTopRightBack(r.state.row,r.state.col,r.state.layer),t.getBottomLeftBack(r.state.row,r.state.col,r.state.layer),t.getBottomRightBack(r.state.row,r.state.col,r.state.layer),t.getTopLeftFront(r.state.row,r.state.col,r.state.layer),t.getTopRightFront(r.state.row,r.state.col,r.state.layer),t.getBottomLeftFront(r.state.row,r.state.col,r.state.layer),t.getBottomRightFront(r.state.row,r.state.col,r.state.layer),t.getTopLeft(r.state.row,r.state.col,r.state.layer),t.getTopRight(r.state.row,r.state.col,r.state.layer),t.getBottomLeft(r.state.row,r.state.col,r.state.layer),t.getBottomRight(r.state.row,r.state.col,r.state.layer)),a.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const i=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,a=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col)+Math.abs(n.state.layer-t.state.layer))*e.NODE_DISTANCE_VALUE,o=a+s;(i&&s<t.state.g||!i)&&(t.state.parent=r,t.state.g=s,t.state.h=a,t.state.f=o,i||this._addToOpenList(t))}))}const a=[];if(this.opened.length>0){let t=n;for(;t!=r;)a.unshift(t),t=t.state.parent;a.unshift(r)}return a}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},9170:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4919);class i extends n.Emitter{constructor(){super(...arguments),this._states=[],this._current=null,this._timestamp=0}setTime(t){this._timestamp=t;const e=this.getCurrentState();if(null===e||null===e.onCompleteAction)return;const r=e.duration||0,n=e.lockDuration||0,i=Math.max(r,n);this.getElapsedTime()<i||this.emit("ON_COMPLETE_ACTION",e.onCompleteAction)}getTime(){return this._timestamp}addState(t){this._states.push(t)}removeState(t){this._states.splice(this._states.indexOf(t),1)}reset(){this._current=null,this._states=[]}hasState(t){return null!==this.getStateById(t)}getStateById(t){return this._states.find((e=>e.id===t))||null}getElapsedTime(){const t=this.getCurrentState();return null===t?-1:this._timestamp-t.startTime}dispatch(t){const e=this.getCurrentState();if(null===e)return;if(this._timestamp-e.startTime<e.lockDuration)return;const r=e.actions.find((e=>e.name===t))||null;if(null===r)return;const n=this.getStateById(r.target);n!==e&&(this.setCurrentState(n),this.emit("CHANGE_STATE",n))}getCurrentState(){return this._current||null}setCurrentState(t){this.hasState(t.id)||this.addState(t),t.startTime=this._timestamp,this._current=t}getStates(){return this._states}}e.default=i,i.ON_COMPLETE_ACTION="ON_COMPLETE_ACTION"},5794:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FiniteStateMachine=void 0;const n=r(9170);e.FiniteStateMachine=n.default},2576:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFinder3D=e.PathFinder2D=e.MazeNodeType=e.Maze3D=e.Maze2D=void 0;const n=r(5430);e.Maze2D=n.default;const i=r(4781);e.Maze3D=i.default;const s=r(8126);e.MazeNodeType=s.default;const a=r(3078);e.PathFinder2D=a.default;const o=r(6217);e.PathFinder3D=o.default},5434:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5850);class i extends n.DisplayObjectContainer{constructor(){super()}getTopLeft(){return this._topLeft}getTopRight(){return this._topRight}getTopCenter(){return this._topCenter}getLeft(){return this._left}getCenter(){return this._center}getRight(){return this._right}getBottomLeft(){return this._bottomLeft}getBottomCenter(){return this._bottomCenter}getBottomRight(){return this._bottomRight}setGrid(t,e){const r={x:t.sx,y:t.sy,width:t.sw,height:t.sh},i={x:r.x,y:r.y,width:e.x,height:e.y},s={x:r.x+e.x+e.width,y:r.y,width:r.width-(e.x+e.width),height:e.y},a={x:r.x+e.x,y:r.y,width:e.width,height:e.y},o={x:r.x,y:r.y+e.y,width:e.x,height:e.height},h={x:o.x,y:o.y+o.height,width:o.width,height:r.y+r.height-(o.y+o.height)};this._topLeft=n.DisplayObject.createFromTexture(t.createSubTexture("topleft",i.x,i.y,i.width,i.height)),this._topRight=n.DisplayObject.createFromTexture(t.createSubTexture("topright",s.x,s.y,s.width,s.height)),this._topCenter=n.DisplayObject.createFromTexture(t.createSubTexture("topcenter",a.x,a.y,a.width,a.height)),this._left=n.DisplayObject.createFromTexture(t.createSubTexture("left",o.x,o.y,o.width,o.height)),this._center=n.DisplayObject.createFromTexture(t.createSubTexture("center",this._topCenter.texture.sx,this._left.texture.sy,this._topCenter.texture.sw,this._left.texture.sh)),this._right=n.DisplayObject.createFromTexture(t.createSubTexture("right",this._topRight.texture.sx,this._center.texture.sy,this._topRight.texture.sw,this._center.texture.sh)),this._bottomLeft=n.DisplayObject.createFromTexture(t.createSubTexture("bottomleft",h.x,h.y,h.width,h.height)),this._bottomCenter=n.DisplayObject.createFromTexture(t.createSubTexture("bottomcenter",this._center.texture.sx,this._bottomLeft.texture.sy,this._center.texture.sw,this._bottomLeft.texture.sh)),this._bottomRight=n.DisplayObject.createFromTexture(t.createSubTexture("bottomright",this._topRight.texture.sx,this._bottomLeft.texture.sy,this._topRight.texture.sw,this._bottomLeft.texture.sh))}resize(t,e){this.removeChildren(),this.addChild(this._topLeft),this.addChild(this._center),this.addChild(this._topCenter),this.addChild(this._left),this.addChild(this._center),this.addChild(this._right),this.addChild(this._bottomLeft),this.addChild(this._bottomCenter),this.addChild(this._bottomRight),this._topCenter.x=this._topLeft.width,this._topCenter.width=t-this._topLeft.width-this._topRight.width,this._topRight.x=t-this._topRight.width,this._left.y=this._topLeft.y+this._topLeft.height,this._left.height=e-this._topLeft.height-this._bottomLeft.height,this._center.x=this._topCenter.x,this._center.y=this._left.y,this._center.width=this._topCenter.width,this._center.height=this._left.height,this._right.x=this._topRight.x,this._right.y=this._center.y,this._right.height=this._center.height,this._bottomLeft.y=this._left.y+this._left.height,this._bottomCenter.x=this._center.x,this._bottomCenter.y=this._bottomLeft.y,this._bottomCenter.width=this._center.width,this._bottomRight.x=this._right.x,this._bottomRight.y=this._bottomLeft.y,this.width=t,this.height=e}}e.default=i},2380:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scale9Grid=void 0;const n=r(5434);e.Scale9Grid=n.default},7072:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.makeIsometric=void 0;const n=r(5587);e.makeIsometric=n.default},5587:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5084);e.default=function(t){return class extends t{constructor(...t){super(...t),this.isoNode=new n.default}syncWithNode(){null!==this.isoNode&&(this.y=this.isoNode.isoY-this.isoNode.isoZ-this.isoNode.offsetY,this.x=this.isoNode.isoX-this.isoNode.offsetX)}}}},5084:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1777),i=r(7690);class s extends i.default{constructor(){super(...arguments),this.isoX=0,this.isoY=0,this.isoZ=0,this.row=0,this.col=0,this.cellWidth=64,this.cellHeight=32,this.width=64,this.height=64}get offsetY(){return this.height-this.cellHeight}get offsetX(){return this.width-this.cellWidth>>1}resetRowAndColFromCoordinates(){const t=n.screenToIso(this.isoX,this.isoY,this.cellWidth,this.cellHeight);this.col=t.col,this.row=t.row}resetCoordinatesFromRowAndCol(){const t=n.isoToScreen(this.row,this.col,this.cellWidth,this.cellHeight);this.isoX=t.x,this.isoY=t.y,this.isoZ=0}}e.default=s},2677:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoNode=void 0;const n=r(5084);e.IsoNode=n.default},3407:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.screenToIso=e.isoToScreen=e.isoSort=void 0;const n=r(1777);Object.defineProperty(e,"isoSort",{enumerable:!0,get:function(){return n.isoSort}}),Object.defineProperty(e,"isoToScreen",{enumerable:!0,get:function(){return n.isoToScreen}}),Object.defineProperty(e,"screenToIso",{enumerable:!0,get:function(){return n.screenToIso}})},1777:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isoSort=e.isoToScreen=e.screenToIso=void 0,e.screenToIso=function(t,e,r,n){let i={row:0,col:0},s=e/n,a=t/r;return i.col=s+a,i.row=s-a,i},e.isoToScreen=function(t,e,r,n){return{x:.5*r*(e-t)>>0,y:(e+t)*(.5*n)>>0}},e.isoSort=function(t,e){return t.isoNode&&e.isoNode?t.isoNode.isoY===e.isoNode.isoY?t.isoNode.isoZ<e.isoNode.isoZ?-1:1:t.isoNode.isoY<e.isoNode.isoY?-1:1:-1}},5043:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5055),i=r(1777);class s extends n.default{constructor(){super(...arguments),this.sortAuto=!1}sort(){this.getChildren().sort(i.isoSort)}render(t){this.sortAuto&&this.sort(),super.render(t)}}e.default=s},8433:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoMap=void 0;const n=r(5043);e.IsoMap=n.default},4570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(6060),i=function(){function t(){this._observers=new Map}return t.prototype.emit=function(t,e){var r=this._observers.get(t)||[],i=new n.default(t,this,e);r.forEach((function(t){t(i)}))},t.prototype.hasObservers=function(t){return void 0!==this._observers.get(t)},t.prototype.unsubscribe=function(t,e){if(this.isObserver(t,e)){var r=this._observers.get(t);r.splice(r.indexOf(e),1)}},t.prototype.isObserver=function(t,e){return(this._observers.get(t)||[]).indexOf(e)>-1},t.prototype.subscribe=function(t,e){if(this.isObserver(t,e))return!1;var r=this._observers.get(t)||[];return r.push(e),this._observers.set(t,r),!0},t.prototype.unsubscribeAll=function(){this._observers=new Map},t}();e.default=i},6060:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){this._type=t,this._emitter=e,this._payload=r}return t.prototype.getEventType=function(){return this._type},t.prototype.getEmitter=function(){return this._emitter},t.prototype.getPayload=function(){return this._payload},t}();e.default=r},4919:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=e.Emitter=void 0;var n=r(4570);e.Emitter=n.default;var i=r(6060);e.Notification=i.default},887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>i,mat2d:()=>s,mat3:()=>a,mat4:()=>o,quat:()=>l,quat2:()=>c,vec2:()=>d,vec3:()=>h,vec4:()=>u});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>_,EPSILON:()=>f,RANDOM:()=>g,equals:()=>v,setMatrixArrayType:()=>m,toRadian:()=>M});var i={};r.r(i),r.d(i,{LDU:()=>U,add:()=>B,adjoint:()=>C,clone:()=>x,copy:()=>y,create:()=>b,determinant:()=>O,equals:()=>V,exactEquals:()=>Y,frob:()=>N,fromRotation:()=>D,fromScaling:()=>I,fromValues:()=>A,identity:()=>E,invert:()=>T,mul:()=>G,multiply:()=>L,multiplyScalar:()=>X,multiplyScalarAndAdd:()=>q,rotate:()=>S,scale:()=>P,set:()=>w,str:()=>F,sub:()=>k,subtract:()=>j,transpose:()=>R});var s={};r.r(s),r.d(s,{add:()=>ut,clone:()=>W,copy:()=>H,create:()=>Q,determinant:()=>$,equals:()=>_t,exactEquals:()=>ft,frob:()=>ht,fromRotation:()=>it,fromScaling:()=>st,fromTranslation:()=>at,fromValues:()=>z,identity:()=>Z,invert:()=>J,mul:()=>gt,multiply:()=>tt,multiplyScalar:()=>ct,multiplyScalarAndAdd:()=>dt,rotate:()=>et,scale:()=>rt,set:()=>K,str:()=>ot,sub:()=>mt,subtract:()=>lt,translate:()=>nt});var a={};r.r(a),r.d(a,{add:()=>Vt,adjoint:()=>Rt,clone:()=>vt,copy:()=>bt,create:()=>pt,determinant:()=>Tt,equals:()=>Qt,exactEquals:()=>kt,frob:()=>Yt,fromMat2d:()=>Ft,fromMat4:()=>Mt,fromQuat:()=>Nt,fromRotation:()=>Dt,fromScaling:()=>It,fromTranslation:()=>Pt,fromValues:()=>xt,identity:()=>Et,invert:()=>wt,mul:()=>Wt,multiply:()=>Ct,multiplyScalar:()=>qt,multiplyScalarAndAdd:()=>Gt,normalFromMat4:()=>Ut,projection:()=>Bt,rotate:()=>Lt,scale:()=>St,set:()=>yt,str:()=>jt,sub:()=>Ht,subtract:()=>Xt,translate:()=>Ot,transpose:()=>At});var o={};r.r(o),r.d(o,{add:()=>Ie,adjoint:()=>ne,clone:()=>zt,copy:()=>Kt,create:()=>Zt,determinant:()=>ie,equals:()=>je,exactEquals:()=>Be,frob:()=>De,fromQuat:()=>we,fromQuat2:()=>ve,fromRotation:()=>_e,fromRotationTranslation:()=>Me,fromRotationTranslationScale:()=>Ee,fromRotationTranslationScaleOrigin:()=>Ae,fromScaling:()=>fe,fromTranslation:()=>de,fromValues:()=>Jt,fromXRotation:()=>ge,fromYRotation:()=>me,fromZRotation:()=>pe,frustum:()=>Re,getRotation:()=>ye,getScaling:()=>xe,getTranslation:()=>be,identity:()=>te,invert:()=>re,lookAt:()=>Le,mul:()=>Ye,multiply:()=>se,multiplyScalar:()=>Ne,multiplyScalarAndAdd:()=>Ue,ortho:()=>Oe,perspective:()=>Te,perspectiveFromFieldOfView:()=>Ce,rotate:()=>he,rotateX:()=>ue,rotateY:()=>le,rotateZ:()=>ce,scale:()=>oe,set:()=>$t,str:()=>Pe,sub:()=>Ve,subtract:()=>Fe,targetTo:()=>Se,translate:()=>ae,transpose:()=>ee});var h={};r.r(h),r.d(h,{add:()=>He,angle:()=>Er,bezier:()=>gr,ceil:()=>Je,clone:()=>qe,copy:()=>Qe,create:()=>Xe,cross:()=>dr,dist:()=>Pr,distance:()=>sr,div:()=>Sr,divide:()=>Ke,dot:()=>cr,equals:()=>Tr,exactEquals:()=>Rr,floor:()=>$e,forEach:()=>Nr,fromValues:()=>ke,hermite:()=>_r,inverse:()=>ur,len:()=>Ir,length:()=>Ge,lerp:()=>fr,max:()=>er,min:()=>tr,mul:()=>Lr,multiply:()=>ze,negate:()=>hr,normalize:()=>lr,random:()=>mr,rotateX:()=>br,rotateY:()=>xr,rotateZ:()=>yr,round:()=>rr,scale:()=>nr,scaleAndAdd:()=>ir,set:()=>We,sqrDist:()=>Dr,sqrLen:()=>Fr,squaredDistance:()=>ar,squaredLength:()=>or,str:()=>wr,sub:()=>Or,subtract:()=>Ze,transformMat3:()=>Mr,transformMat4:()=>pr,transformQuat:()=>vr,zero:()=>Ar});var u={};r.r(u),r.d(u,{add:()=>Xr,ceil:()=>Qr,clone:()=>Br,copy:()=>Yr,create:()=>Ur,cross:()=>hn,dist:()=>bn,distance:()=>$r,div:()=>vn,divide:()=>kr,dot:()=>on,equals:()=>mn,exactEquals:()=>gn,floor:()=>Wr,forEach:()=>An,fromValues:()=>jr,inverse:()=>sn,len:()=>yn,length:()=>en,lerp:()=>un,max:()=>Zr,min:()=>Hr,mul:()=>Mn,multiply:()=>Gr,negate:()=>nn,normalize:()=>an,random:()=>ln,round:()=>zr,scale:()=>Kr,scaleAndAdd:()=>Jr,set:()=>Vr,sqrDist:()=>xn,sqrLen:()=>En,squaredDistance:()=>tn,squaredLength:()=>rn,str:()=>_n,sub:()=>pn,subtract:()=>qr,transformMat4:()=>cn,transformQuat:()=>dn,zero:()=>fn});var l={};r.r(l),r.d(l,{add:()=>ei,calculateW:()=>In,clone:()=>Kn,conjugate:()=>Vn,copy:()=>$n,create:()=>wn,dot:()=>ii,equals:()=>di,exactEquals:()=>ci,exp:()=>Fn,fromEuler:()=>qn,fromMat3:()=>Xn,fromValues:()=>Jn,getAngle:()=>On,getAxisAngle:()=>Cn,identity:()=>Rn,invert:()=>Yn,len:()=>oi,length:()=>ai,lerp:()=>si,ln:()=>Nn,mul:()=>ri,multiply:()=>Ln,normalize:()=>li,pow:()=>Un,random:()=>jn,rotateX:()=>Sn,rotateY:()=>Pn,rotateZ:()=>Dn,rotationTo:()=>fi,scale:()=>ni,set:()=>ti,setAxes:()=>gi,setAxisAngle:()=>Tn,slerp:()=>Bn,sqlerp:()=>_i,sqrLen:()=>ui,squaredLength:()=>hi,str:()=>Gn});var c={};r.r(c),r.d(c,{add:()=>ji,clone:()=>pi,conjugate:()=>Qi,copy:()=>Ai,create:()=>mi,dot:()=>qi,equals:()=>ts,exactEquals:()=>$i,fromMat4:()=>Ei,fromRotation:()=>yi,fromRotationTranslation:()=>bi,fromRotationTranslationValues:()=>vi,fromTranslation:()=>xi,fromValues:()=>Mi,getDual:()=>Ci,getReal:()=>Ti,getTranslation:()=>Si,identity:()=>wi,invert:()=>ki,len:()=>Hi,length:()=>Wi,lerp:()=>Gi,mul:()=>Vi,multiply:()=>Yi,normalize:()=>Ki,rotateAroundAxis:()=>Bi,rotateByQuatAppend:()=>Ni,rotateByQuatPrepend:()=>Ui,rotateX:()=>Di,rotateY:()=>Ii,rotateZ:()=>Fi,scale:()=>Xi,set:()=>Ri,setDual:()=>Li,setReal:()=>Oi,sqrLen:()=>zi,squaredLength:()=>Zi,str:()=>Ji,translate:()=>Pi});var d={};r.r(d),r.d(d,{add:()=>as,angle:()=>Ds,ceil:()=>ls,clone:()=>rs,copy:()=>is,create:()=>es,cross:()=>ws,dist:()=>Xs,distance:()=>ps,div:()=>Vs,divide:()=>us,dot:()=>As,equals:()=>Us,exactEquals:()=>Ns,floor:()=>cs,forEach:()=>ks,fromValues:()=>ns,inverse:()=>ys,len:()=>Bs,length:()=>vs,lerp:()=>Rs,max:()=>fs,min:()=>ds,mul:()=>Ys,multiply:()=>hs,negate:()=>xs,normalize:()=>Es,random:()=>Ts,rotate:()=>Ps,round:()=>_s,scale:()=>gs,scaleAndAdd:()=>ms,set:()=>ss,sqrDist:()=>qs,sqrLen:()=>Gs,squaredDistance:()=>Ms,squaredLength:()=>bs,str:()=>Fs,sub:()=>js,subtract:()=>os,transformMat2:()=>Cs,transformMat2d:()=>Os,transformMat3:()=>Ls,transformMat4:()=>Ss,zero:()=>Is});var f=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,g=Math.random;function m(t){_=t}var p=Math.PI/180;function M(t){return t*p}function v(t,e){return Math.abs(t-e)<=f*Math.max(1,Math.abs(t),Math.abs(e))}function b(){var t=new _(4);return _!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function x(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function E(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){var i=new _(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function w(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function R(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function T(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*s-i*n;return a?(a=1/a,t[0]=s*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null}function C(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function L(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*o+s*h,t[1]=i*o+a*h,t[2]=n*u+s*l,t[3]=i*u+a*l,t}function S(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+s*o,t[1]=i*h+a*o,t[2]=n*-o+s*h,t[3]=i*-o+a*h,t}function P(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],h=r[1];return t[0]=n*o,t[1]=i*o,t[2]=s*h,t[3]=a*h,t}function D(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function F(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t){return Math.hypot(t[0],t[1],t[2],t[3])}function U(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function B(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=e[0],o=e[1],h=e[2],u=e[3];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-u)<=f*Math.max(1,Math.abs(s),Math.abs(u))}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function q(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=L,k=j;function Q(){var t=new _(6);return _!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function W(t){var e=new _(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function H(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z(t,e,r,n,i,s){var a=new _(6);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=i,a[5]=s,a}function K(t,e,r,n,i,s,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t}function J(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=r*s-n*i;return h?(h=1/h,t[0]=s*h,t[1]=-n*h,t[2]=-i*h,t[3]=r*h,t[4]=(i*o-s*a)*h,t[5]=(n*a-r*o)*h,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=r[0],l=r[1],c=r[2],d=r[3],f=r[4],_=r[5];return t[0]=n*u+s*l,t[1]=i*u+a*l,t[2]=n*c+s*d,t[3]=i*c+a*d,t[4]=n*f+s*_+o,t[5]=i*f+a*_+h,t}function et(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+s*u,t[1]=i*l+a*u,t[2]=n*-u+s*l,t[3]=i*-u+a*l,t[4]=o,t[5]=h,t}function rt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=r[0],l=r[1];return t[0]=n*u,t[1]=i*u,t[2]=s*l,t[3]=a*l,t[4]=o,t[5]=h,t}function nt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=n*u+s*l+o,t[5]=i*u+a*l+h,t}function it(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function st(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ut(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function lt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function ct(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function _t(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=e[0],u=e[1],l=e[2],c=e[3],d=e[4],_=e[5];return Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-l)<=f*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=f*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-_)<=f*Math.max(1,Math.abs(o),Math.abs(_))}var gt=tt,mt=lt;function pt(){var t=new _(9);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new _(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xt(t,e,r,n,i,s,a,o,h){var u=new _(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=s,u[6]=a,u[7]=o,u[8]=h,u}function yt(t,e,r,n,i,s,a,o,h,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u,t}function Et(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function wt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=l*a-o*u,d=-l*s+o*h,f=u*s-a*h,_=r*c+n*d+i*f;return _?(_=1/_,t[0]=c*_,t[1]=(-l*n+i*u)*_,t[2]=(o*n-i*a)*_,t[3]=d*_,t[4]=(l*r-i*h)*_,t[5]=(-o*r+i*s)*_,t[6]=f*_,t[7]=(-u*r+n*h)*_,t[8]=(a*r-n*s)*_,t):null}function Rt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8];return t[0]=a*l-o*u,t[1]=i*u-n*l,t[2]=n*o-i*a,t[3]=o*h-s*l,t[4]=r*l-i*h,t[5]=i*s-r*o,t[6]=s*u-a*h,t[7]=n*h-r*u,t[8]=r*a-n*s,t}function Tt(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*(u*s-a*h)+r*(-u*i+a*o)+n*(h*i-s*o)}function Ct(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],f=r[1],_=r[2],g=r[3],m=r[4],p=r[5],M=r[6],v=r[7],b=r[8];return t[0]=d*n+f*a+_*u,t[1]=d*i+f*o+_*l,t[2]=d*s+f*h+_*c,t[3]=g*n+m*a+p*u,t[4]=g*i+m*o+p*l,t[5]=g*s+m*h+p*c,t[6]=M*n+v*a+b*u,t[7]=M*i+v*o+b*l,t[8]=M*s+v*h+b*c,t}function Ot(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],f=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=d*n+f*a+u,t[7]=d*i+f*o+l,t[8]=d*s+f*h+c,t}function Lt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*n+d*a,t[1]=f*i+d*o,t[2]=f*s+d*h,t[3]=f*a-d*n,t[4]=f*o-d*i,t[5]=f*h-d*s,t[6]=u,t[7]=l,t[8]=c,t}function St(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Nt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,h=i+i,u=r*a,l=n*a,c=n*o,d=i*a,f=i*o,_=i*h,g=s*a,m=s*o,p=s*h;return t[0]=1-c-_,t[3]=l-p,t[6]=d+m,t[1]=l+p,t[4]=1-u-_,t[7]=f-g,t[2]=d-m,t[5]=f+g,t[8]=1-u-c,t}function Ut(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15],M=r*o-n*a,v=r*h-i*a,b=r*u-s*a,x=n*h-i*o,y=n*u-s*o,E=i*u-s*h,A=l*g-c*_,w=l*m-d*_,R=l*p-f*_,T=c*m-d*g,C=c*p-f*g,O=d*p-f*m,L=M*O-v*C+b*T+x*R-y*w+E*A;return L?(L=1/L,t[0]=(o*O-h*C+u*T)*L,t[1]=(h*R-a*O-u*w)*L,t[2]=(a*C-o*R+u*A)*L,t[3]=(i*C-n*O-s*T)*L,t[4]=(r*O-i*R+s*w)*L,t[5]=(n*R-r*C-s*A)*L,t[6]=(g*E-m*y+p*x)*L,t[7]=(m*b-_*E-p*v)*L,t[8]=(_*y-g*b+p*M)*L,t):null}function Bt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Yt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Xt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function qt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Gt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function kt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Qt(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=t[8],c=e[0],d=e[1],_=e[2],g=e[3],m=e[4],p=e[5],M=e[6],v=e[7],b=e[8];return Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-_)<=f*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(a-m)<=f*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-p)<=f*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(h-M)<=f*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(u-v)<=f*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-b)<=f*Math.max(1,Math.abs(l),Math.abs(b))}var Wt=Ct,Ht=Xt;function Zt(){var t=new _(16);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function zt(t){var e=new _(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,r,n,i,s,a,o,h,u,l,c,d,f,g,m){var p=new _(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=i,p[5]=s,p[6]=a,p[7]=o,p[8]=h,p[9]=u,p[10]=l,p[11]=c,p[12]=d,p[13]=f,p[14]=g,p[15]=m,p}function $t(t,e,r,n,i,s,a,o,h,u,l,c,d,f,_,g,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=d,t[12]=f,t[13]=_,t[14]=g,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15],M=r*o-n*a,v=r*h-i*a,b=r*u-s*a,x=n*h-i*o,y=n*u-s*o,E=i*u-s*h,A=l*g-c*_,w=l*m-d*_,R=l*p-f*_,T=c*m-d*g,C=c*p-f*g,O=d*p-f*m,L=M*O-v*C+b*T+x*R-y*w+E*A;return L?(L=1/L,t[0]=(o*O-h*C+u*T)*L,t[1]=(i*C-n*O-s*T)*L,t[2]=(g*E-m*y+p*x)*L,t[3]=(d*y-c*E-f*x)*L,t[4]=(h*R-a*O-u*w)*L,t[5]=(r*O-i*R+s*w)*L,t[6]=(m*b-_*E-p*v)*L,t[7]=(l*E-d*b+f*v)*L,t[8]=(a*C-o*R+u*A)*L,t[9]=(n*R-r*C-s*A)*L,t[10]=(_*y-g*b+p*M)*L,t[11]=(c*b-l*y-f*M)*L,t[12]=(o*w-a*T-h*A)*L,t[13]=(r*T-n*w+i*A)*L,t[14]=(g*v-_*x-m*M)*L,t[15]=(l*x-c*v+d*M)*L,t):null}function ne(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15];return t[0]=o*(d*p-f*m)-c*(h*p-u*m)+g*(h*f-u*d),t[1]=-(n*(d*p-f*m)-c*(i*p-s*m)+g*(i*f-s*d)),t[2]=n*(h*p-u*m)-o*(i*p-s*m)+g*(i*u-s*h),t[3]=-(n*(h*f-u*d)-o*(i*f-s*d)+c*(i*u-s*h)),t[4]=-(a*(d*p-f*m)-l*(h*p-u*m)+_*(h*f-u*d)),t[5]=r*(d*p-f*m)-l*(i*p-s*m)+_*(i*f-s*d),t[6]=-(r*(h*p-u*m)-a*(i*p-s*m)+_*(i*u-s*h)),t[7]=r*(h*f-u*d)-a*(i*f-s*d)+l*(i*u-s*h),t[8]=a*(c*p-f*g)-l*(o*p-u*g)+_*(o*f-u*c),t[9]=-(r*(c*p-f*g)-l*(n*p-s*g)+_*(n*f-s*c)),t[10]=r*(o*p-u*g)-a*(n*p-s*g)+_*(n*u-s*o),t[11]=-(r*(o*f-u*c)-a*(n*f-s*c)+l*(n*u-s*o)),t[12]=-(a*(c*m-d*g)-l*(o*m-h*g)+_*(o*d-h*c)),t[13]=r*(c*m-d*g)-l*(n*m-i*g)+_*(n*d-i*c),t[14]=-(r*(o*m-h*g)-a*(n*m-i*g)+_*(n*h-i*o)),t[15]=r*(o*d-h*c)-a*(n*d-i*c)+l*(n*h-i*o),t}function ie(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],d=t[11],f=t[12],_=t[13],g=t[14],m=t[15];return(e*a-r*s)*(c*m-d*g)-(e*o-n*s)*(l*m-d*_)+(e*h-i*s)*(l*g-c*_)+(r*o-n*a)*(u*m-d*f)-(r*h-i*a)*(u*g-c*f)+(n*h-i*o)*(u*_-l*f)}function se(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],f=e[10],_=e[11],g=e[12],m=e[13],p=e[14],M=e[15],v=r[0],b=r[1],x=r[2],y=r[3];return t[0]=v*n+b*o+x*c+y*g,t[1]=v*i+b*h+x*d+y*m,t[2]=v*s+b*u+x*f+y*p,t[3]=v*a+b*l+x*_+y*M,v=r[4],b=r[5],x=r[6],y=r[7],t[4]=v*n+b*o+x*c+y*g,t[5]=v*i+b*h+x*d+y*m,t[6]=v*s+b*u+x*f+y*p,t[7]=v*a+b*l+x*_+y*M,v=r[8],b=r[9],x=r[10],y=r[11],t[8]=v*n+b*o+x*c+y*g,t[9]=v*i+b*h+x*d+y*m,t[10]=v*s+b*u+x*f+y*p,t[11]=v*a+b*l+x*_+y*M,v=r[12],b=r[13],x=r[14],y=r[15],t[12]=v*n+b*o+x*c+y*g,t[13]=v*i+b*h+x*d+y*m,t[14]=v*s+b*u+x*f+y*p,t[15]=v*a+b*l+x*_+y*M,t}function ae(t,e,r){var n,i,s,a,o,h,u,l,c,d,f,_,g=r[0],m=r[1],p=r[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*p+e[12],t[13]=e[1]*g+e[5]*m+e[9]*p+e[13],t[14]=e[2]*g+e[6]*m+e[10]*p+e[14],t[15]=e[3]*g+e[7]*m+e[11]*p+e[15]):(n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],f=e[10],_=e[11],t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=d,t[10]=f,t[11]=_,t[12]=n*g+o*m+c*p+e[12],t[13]=i*g+h*m+d*p+e[13],t[14]=s*g+u*m+f*p+e[14],t[15]=a*g+l*m+_*p+e[15]),t}function oe(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,r,n){var i,s,a,o,h,u,l,c,d,_,g,m,p,M,v,b,x,y,E,A,w,R,T,C,O=n[0],L=n[1],S=n[2],P=Math.hypot(O,L,S);return P<f?null:(O*=P=1/P,L*=P,S*=P,i=Math.sin(r),a=1-(s=Math.cos(r)),o=e[0],h=e[1],u=e[2],l=e[3],c=e[4],d=e[5],_=e[6],g=e[7],m=e[8],p=e[9],M=e[10],v=e[11],b=O*O*a+s,x=L*O*a+S*i,y=S*O*a-L*i,E=O*L*a-S*i,A=L*L*a+s,w=S*L*a+O*i,R=O*S*a+L*i,T=L*S*a-O*i,C=S*S*a+s,t[0]=o*b+c*x+m*y,t[1]=h*b+d*x+p*y,t[2]=u*b+_*x+M*y,t[3]=l*b+g*x+v*y,t[4]=o*E+c*A+m*w,t[5]=h*E+d*A+p*w,t[6]=u*E+_*A+M*w,t[7]=l*E+g*A+v*w,t[8]=o*R+c*T+m*C,t[9]=h*R+d*T+p*C,t[10]=u*R+_*T+M*C,t[11]=l*R+g*T+v*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ue(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],h=e[7],u=e[8],l=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*n,t[5]=a*i+l*n,t[6]=o*i+c*n,t[7]=h*i+d*n,t[8]=u*i-s*n,t[9]=l*i-a*n,t[10]=c*i-o*n,t[11]=d*i-h*n,t}function le(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],h=e[3],u=e[8],l=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*n,t[1]=a*i-l*n,t[2]=o*i-c*n,t[3]=h*i-d*n,t[8]=s*n+u*i,t[9]=a*n+l*i,t[10]=o*n+c*i,t[11]=h*n+d*i,t}function ce(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],h=e[3],u=e[4],l=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*n,t[1]=a*i+l*n,t[2]=o*i+c*n,t[3]=h*i+d*n,t[4]=u*i-s*n,t[5]=l*i-a*n,t[6]=c*i-o*n,t[7]=d*i-h*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function fe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e,r){var n,i,s,a=r[0],o=r[1],h=r[2],u=Math.hypot(a,o,h);return u<f?null:(a*=u=1/u,o*=u,h*=u,n=Math.sin(e),s=1-(i=Math.cos(e)),t[0]=a*a*s+i,t[1]=o*a*s+h*n,t[2]=h*a*s-o*n,t[3]=0,t[4]=a*o*s-h*n,t[5]=o*o*s+i,t[6]=h*o*s+a*n,t[7]=0,t[8]=a*h*s+o*n,t[9]=o*h*s-a*n,t[10]=h*h*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ge(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=n+n,h=i+i,u=s+s,l=n*o,c=n*h,d=n*u,f=i*h,_=i*u,g=s*u,m=a*o,p=a*h,M=a*u;return t[0]=1-(f+g),t[1]=c+M,t[2]=d-p,t[3]=0,t[4]=c-M,t[5]=1-(l+g),t[6]=_+m,t[7]=0,t[8]=d+p,t[9]=_-m,t[10]=1-(l+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ve(t,e){var r=new _(3),n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=n*n+i*i+s*s+a*a;return c>0?(r[0]=2*(o*a+l*n+h*s-u*i)/c,r[1]=2*(h*a+l*i+u*n-o*s)/c,r[2]=2*(u*a+l*s+o*i-h*n)/c):(r[0]=2*(o*a+l*n+h*s-u*i),r[1]=2*(h*a+l*i+u*n-o*s),r[2]=2*(u*a+l*s+o*i-h*n)),Me(t,e,r),t}function be(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xe(t,e){var r=e[0],n=e[1],i=e[2],s=e[4],a=e[5],o=e[6],h=e[8],u=e[9],l=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(s,a,o),t[2]=Math.hypot(h,u,l),t}function ye(t,e){var r=new _(3);xe(r,e);var n=1/r[0],i=1/r[1],s=1/r[2],a=e[0]*n,o=e[1]*i,h=e[2]*s,u=e[4]*n,l=e[5]*i,c=e[6]*s,d=e[8]*n,f=e[9]*i,g=e[10]*s,m=a+l+g,p=0;return m>0?(p=2*Math.sqrt(m+1),t[3]=.25*p,t[0]=(c-f)/p,t[1]=(d-h)/p,t[2]=(o-u)/p):a>l&&a>g?(p=2*Math.sqrt(1+a-l-g),t[3]=(c-f)/p,t[0]=.25*p,t[1]=(o+u)/p,t[2]=(d+h)/p):l>g?(p=2*Math.sqrt(1+l-a-g),t[3]=(d-h)/p,t[0]=(o+u)/p,t[1]=.25*p,t[2]=(c+f)/p):(p=2*Math.sqrt(1+g-a-l),t[3]=(o-u)/p,t[0]=(d+h)/p,t[1]=(c+f)/p,t[2]=.25*p),t}function Ee(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=e[3],h=i+i,u=s+s,l=a+a,c=i*h,d=i*u,f=i*l,_=s*u,g=s*l,m=a*l,p=o*h,M=o*u,v=o*l,b=n[0],x=n[1],y=n[2];return t[0]=(1-(_+m))*b,t[1]=(d+v)*b,t[2]=(f-M)*b,t[3]=0,t[4]=(d-v)*x,t[5]=(1-(c+m))*x,t[6]=(g+p)*x,t[7]=0,t[8]=(f+M)*y,t[9]=(g-p)*y,t[10]=(1-(c+_))*y,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,i){var s=e[0],a=e[1],o=e[2],h=e[3],u=s+s,l=a+a,c=o+o,d=s*u,f=s*l,_=s*c,g=a*l,m=a*c,p=o*c,M=h*u,v=h*l,b=h*c,x=n[0],y=n[1],E=n[2],A=i[0],w=i[1],R=i[2],T=(1-(g+p))*x,C=(f+b)*x,O=(_-v)*x,L=(f-b)*y,S=(1-(d+p))*y,P=(m+M)*y,D=(_+v)*E,I=(m-M)*E,F=(1-(d+g))*E;return t[0]=T,t[1]=C,t[2]=O,t[3]=0,t[4]=L,t[5]=S,t[6]=P,t[7]=0,t[8]=D,t[9]=I,t[10]=F,t[11]=0,t[12]=r[0]+A-(T*A+L*w+D*R),t[13]=r[1]+w-(C*A+S*w+I*R),t[14]=r[2]+R-(O*A+P*w+F*R),t[15]=1,t}function we(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,h=i+i,u=r*a,l=n*a,c=n*o,d=i*a,f=i*o,_=i*h,g=s*a,m=s*o,p=s*h;return t[0]=1-c-_,t[1]=l+p,t[2]=d-m,t[3]=0,t[4]=l-p,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Re(t,e,r,n,i,s,a){var o=1/(r-e),h=1/(i-n),u=1/(s-a);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*h,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(i+n)*h,t[10]=(a+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*u,t[15]=0,t}function Te(t,e,r,n,i){var s,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(n-i),t[10]=(i+n)*s,t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t}function Ce(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),h=2/(a+o),u=2/(i+s);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-o)*h*.5,t[9]=(i-s)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Oe(t,e,r,n,i,s,a){var o=1/(e-r),h=1/(n-i),u=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*h,t[14]=(a+s)*u,t[15]=1,t}function Le(t,e,r,n){var i,s,a,o,h,u,l,c,d,_,g=e[0],m=e[1],p=e[2],M=n[0],v=n[1],b=n[2],x=r[0],y=r[1],E=r[2];return Math.abs(g-x)<f&&Math.abs(m-y)<f&&Math.abs(p-E)<f?te(t):(l=g-x,c=m-y,d=p-E,i=v*(d*=_=1/Math.hypot(l,c,d))-b*(c*=_),s=b*(l*=_)-M*d,a=M*c-v*l,(_=Math.hypot(i,s,a))?(i*=_=1/_,s*=_,a*=_):(i=0,s=0,a=0),o=c*a-d*s,h=d*i-l*a,u=l*s-c*i,(_=Math.hypot(o,h,u))?(o*=_=1/_,h*=_,u*=_):(o=0,h=0,u=0),t[0]=i,t[1]=o,t[2]=l,t[3]=0,t[4]=s,t[5]=h,t[6]=c,t[7]=0,t[8]=a,t[9]=u,t[10]=d,t[11]=0,t[12]=-(i*g+s*m+a*p),t[13]=-(o*g+h*m+u*p),t[14]=-(l*g+c*m+d*p),t[15]=1,t)}function Se(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=n[0],h=n[1],u=n[2],l=i-r[0],c=s-r[1],d=a-r[2],f=l*l+c*c+d*d;f>0&&(l*=f=1/Math.sqrt(f),c*=f,d*=f);var _=h*d-u*c,g=u*l-o*d,m=o*c-h*l;return(f=_*_+g*g+m*m)>0&&(_*=f=1/Math.sqrt(f),g*=f,m*=f),t[0]=_,t[1]=g,t[2]=m,t[3]=0,t[4]=c*m-d*g,t[5]=d*_-l*m,t[6]=l*g-c*_,t[7]=0,t[8]=l,t[9]=c,t[10]=d,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1,t}function Pe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ie(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Fe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ne(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ue(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function je(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=t[8],c=t[9],d=t[10],_=t[11],g=t[12],m=t[13],p=t[14],M=t[15],v=e[0],b=e[1],x=e[2],y=e[3],E=e[4],A=e[5],w=e[6],R=e[7],T=e[8],C=e[9],O=e[10],L=e[11],S=e[12],P=e[13],D=e[14],I=e[15];return Math.abs(r-v)<=f*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=f*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-x)<=f*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-y)<=f*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-E)<=f*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-A)<=f*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(h-w)<=f*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(u-R)<=f*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(l-T)<=f*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-C)<=f*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(d-O)<=f*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(_-L)<=f*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(g-S)<=f*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(m-P)<=f*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(p-D)<=f*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(M-I)<=f*Math.max(1,Math.abs(M),Math.abs(I))}var Ye=se,Ve=Fe;function Xe(){var t=new _(3);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qe(t){var e=new _(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ge(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function ke(t,e,r){var n=new _(3);return n[0]=t,n[1]=e,n[2]=r,n}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function We(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function He(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Ze(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function ze(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ke(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ir(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function sr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function ar(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function or(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ur(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function lr(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function cr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dr(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],h=r[2];return t[0]=i*h-s*o,t[1]=s*a-n*h,t[2]=n*o-i*a,t}function fr(t,e,r,n){var i=e[0],s=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t}function _r(t,e,r,n,i,s){var a=s*s,o=a*(2*s-3)+1,h=a*(s-2)+s,u=a*(s-1),l=a*(3-2*s);return t[0]=e[0]*o+r[0]*h+n[0]*u+i[0]*l,t[1]=e[1]*o+r[1]*h+n[1]*u+i[1]*l,t[2]=e[2]*o+r[2]*h+n[2]*u+i[2]*l,t}function gr(t,e,r,n,i,s){var a=1-s,o=a*a,h=s*s,u=o*a,l=3*s*o,c=3*h*a,d=h*s;return t[0]=e[0]*u+r[0]*l+n[0]*c+i[0]*d,t[1]=e[1]*u+r[1]*l+n[1]*c+i[1]*d,t[2]=e[2]*u+r[2]*l+n[2]*c+i[2]*d,t}function mr(t,e){e=e||1;var r=2*g()*Math.PI,n=2*g()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function pr(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}function Mr(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function vr(t,e,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=e[0],h=e[1],u=e[2],l=i*u-s*h,c=s*o-n*u,d=n*h-i*o,f=i*d-s*c,_=s*l-n*d,g=n*c-i*l,m=2*a;return l*=m,c*=m,d*=m,f*=2,_*=2,g*=2,t[0]=o+l+f,t[1]=h+c+_,t[2]=u+d+g,t}function br(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function xr(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function yr(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Er(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2],h=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(s*s+a*a+o*o),u=h&&cr(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function Ar(t){return t[0]=0,t[1]=0,t[2]=0,t}function wr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Tr(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2];return Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=f*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=f*Math.max(1,Math.abs(i),Math.abs(o))}var Cr,Or=Ze,Lr=ze,Sr=Ke,Pr=sr,Dr=ar,Ir=Ge,Fr=or,Nr=(Cr=Xe(),function(t,e,r,n,i,s){var a,o;for(e||(e=3),r||(r=0),o=n?Math.min(n*e+r,t.length):t.length,a=r;a<o;a+=e)Cr[0]=t[a],Cr[1]=t[a+1],Cr[2]=t[a+2],i(Cr,Cr,s),t[a]=Cr[0],t[a+1]=Cr[1],t[a+2]=Cr[2];return t});function Ur(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Br(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jr(t,e,r,n){var i=new _(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function Yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Vr(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Xr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function qr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Gr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function kr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Qr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Wr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Hr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Zr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function zr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Kr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Jr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function $r(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.hypot(r,n,i,s)}function tn(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+i*i+s*s}function en(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function rn(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function nn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function sn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function an(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t}function on(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hn(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],o=r[1]*n[2]-r[2]*n[1],h=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],l=e[0],c=e[1],d=e[2],f=e[3];return t[0]=c*u-d*h+f*o,t[1]=-l*u+d*a-f*s,t[2]=l*h-c*a+f*i,t[3]=-l*o+c*s-d*i,t}function un(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t[3]=o+n*(r[3]-o),t}function ln(t,e){var r,n,i,s,a,o;e=e||1;do{a=(r=2*g()-1)*r+(n=2*g()-1)*n}while(a>=1);do{o=(i=2*g()-1)*i+(s=2*g()-1)*s}while(o>=1);var h=Math.sqrt((1-a)/o);return t[0]=e*r,t[1]=e*n,t[2]=e*i*h,t[3]=e*s*h,t}function cn(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t}function dn(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],h=r[2],u=r[3],l=u*n+o*s-h*i,c=u*i+h*n-a*s,d=u*s+a*i-o*n,f=-a*n-o*i-h*s;return t[0]=l*u+f*-a+c*-h-d*-o,t[1]=c*u+f*-o+d*-a-l*-h,t[2]=d*u+f*-h+l*-o-c*-a,t[3]=e[3],t}function fn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _n(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mn(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=e[0],o=e[1],h=e[2],u=e[3];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-u)<=f*Math.max(1,Math.abs(s),Math.abs(u))}var pn=qr,Mn=Gr,vn=kr,bn=$r,xn=tn,yn=en,En=rn,An=function(){var t=Ur();return function(e,r,n,i,s,a){var o,h;for(r||(r=4),n||(n=0),h=i?Math.min(i*r+n,e.length):e.length,o=n;o<h;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function wn(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Rn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Tn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Cn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>f?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function On(t,e){var r=ii(t,e);return Math.acos(2*r*r-1)}function Ln(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*l+a*o+i*u-s*h,t[1]=i*l+a*h+s*o-n*u,t[2]=s*l+a*u+n*h-i*o,t[3]=a*l-n*o-i*h-s*u,t}function Sn(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+a*o,t[1]=i*h+s*o,t[2]=s*h-i*o,t[3]=a*h-n*o,t}function Pn(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h-s*o,t[1]=i*h+a*o,t[2]=s*h+n*o,t[3]=a*h-i*o,t}function Dn(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+i*o,t[1]=i*h-n*o,t[2]=s*h+a*o,t[3]=a*h-s*o,t}function In(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function Fn(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.sqrt(r*r+n*n+i*i),o=Math.exp(s),h=a>0?o*Math.sin(a)/a:0;return t[0]=r*h,t[1]=n*h,t[2]=i*h,t[3]=o*Math.cos(a),t}function Nn(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.sqrt(r*r+n*n+i*i),o=a>0?Math.atan2(a,s)/a:0;return t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=.5*Math.log(r*r+n*n+i*i+s*s),t}function Un(t,e,r){return Nn(t,e),ni(t,t,r),Fn(t,t),t}function Bn(t,e,r,n){var i,s,a,o,h,u=e[0],l=e[1],c=e[2],d=e[3],_=r[0],g=r[1],m=r[2],p=r[3];return(s=u*_+l*g+c*m+d*p)<0&&(s=-s,_=-_,g=-g,m=-m,p=-p),1-s>f?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,h=Math.sin(n*i)/a):(o=1-n,h=n),t[0]=o*u+h*_,t[1]=o*l+h*g,t[2]=o*c+h*m,t[3]=o*d+h*p,t}function jn(t){var e=g(),r=g(),n=g(),i=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=s*Math.sin(2*Math.PI*n),t[3]=s*Math.cos(2*Math.PI*n),t}function Yn(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-i*o,t[3]=s*o,t}function Vn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Xn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var s=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*s+s]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*s+a]-e[3*a+s])*r,t[s]=(e[3*s+i]+e[3*i+s])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}function qn(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var s=Math.sin(e),a=Math.cos(e),o=Math.sin(r),h=Math.cos(r),u=Math.sin(n),l=Math.cos(n);return t[0]=s*h*l-a*o*u,t[1]=a*o*l+s*h*u,t[2]=a*h*u-s*o*l,t[3]=a*h*l+s*o*u,t}function Gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var kn,Qn,Wn,Hn,Zn,zn,Kn=Br,Jn=jr,$n=Yr,ti=Vr,ei=Xr,ri=Ln,ni=Kr,ii=on,si=un,ai=en,oi=ai,hi=rn,ui=hi,li=an,ci=gn,di=mn,fi=(kn=Xe(),Qn=ke(1,0,0),Wn=ke(0,1,0),function(t,e,r){var n=cr(e,r);return n<-.999999?(dr(kn,Qn,e),Ir(kn)<1e-6&&dr(kn,Wn,e),lr(kn,kn),Tn(t,kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dr(kn,e,r),t[0]=kn[0],t[1]=kn[1],t[2]=kn[2],t[3]=1+n,li(t,t))}),_i=(Hn=wn(),Zn=wn(),function(t,e,r,n,i,s){return Bn(Hn,e,i,s),Bn(Zn,r,n,s),Bn(t,Hn,Zn,2*s*(1-s)),t}),gi=(zn=pt(),function(t,e,r,n){return zn[0]=r[0],zn[3]=r[1],zn[6]=r[2],zn[1]=n[0],zn[4]=n[1],zn[7]=n[2],zn[2]=-e[0],zn[5]=-e[1],zn[8]=-e[2],li(t,Xn(t,zn))});function mi(){var t=new _(8);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function pi(t){var e=new _(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Mi(t,e,r,n,i,s,a,o){var h=new _(8);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=s,h[6]=a,h[7]=o,h}function vi(t,e,r,n,i,s,a){var o=new _(8);o[0]=t,o[1]=e,o[2]=r,o[3]=n;var h=.5*i,u=.5*s,l=.5*a;return o[4]=h*n+u*r-l*e,o[5]=u*n+l*t-h*r,o[6]=l*n+h*e-u*t,o[7]=-h*t-u*e-l*r,o}function bi(t,e,r){var n=.5*r[0],i=.5*r[1],s=.5*r[2],a=e[0],o=e[1],h=e[2],u=e[3];return t[0]=a,t[1]=o,t[2]=h,t[3]=u,t[4]=n*u+i*h-s*o,t[5]=i*u+s*a-n*h,t[6]=s*u+n*o-i*a,t[7]=-n*a-i*o-s*h,t}function xi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function yi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ei(t,e){var r=wn();ye(r,e);var n=new _(3);return be(n,e),bi(t,r,n),t}function Ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function wi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ri(t,e,r,n,i,s,a,o,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=h,t}var Ti=$n;function Ci(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Oi=$n;function Li(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Si(t,e){var r=e[4],n=e[5],i=e[6],s=e[7],a=-e[0],o=-e[1],h=-e[2],u=e[3];return t[0]=2*(r*u+s*a+n*h-i*o),t[1]=2*(n*u+s*o+i*a-r*h),t[2]=2*(i*u+s*h+r*o-n*a),t}function Pi(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=.5*r[0],h=.5*r[1],u=.5*r[2],l=e[4],c=e[5],d=e[6],f=e[7];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=a*o+i*u-s*h+l,t[5]=a*h+s*o-n*u+c,t[6]=a*u+n*h-i*o+d,t[7]=-n*o-i*h-s*u+f,t}function Di(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*a+l*n+h*s-u*i,d=h*a+l*i+u*n-o*s,f=u*a+l*s+o*i-h*n,_=l*a-o*n-h*i-u*s;return Sn(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=c*a+_*n+d*s-f*i,t[5]=d*a+_*i+f*n-c*s,t[6]=f*a+_*s+c*i-d*n,t[7]=_*a-c*n-d*i-f*s,t}function Ii(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*a+l*n+h*s-u*i,d=h*a+l*i+u*n-o*s,f=u*a+l*s+o*i-h*n,_=l*a-o*n-h*i-u*s;return Pn(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=c*a+_*n+d*s-f*i,t[5]=d*a+_*i+f*n-c*s,t[6]=f*a+_*s+c*i-d*n,t[7]=_*a-c*n-d*i-f*s,t}function Fi(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*a+l*n+h*s-u*i,d=h*a+l*i+u*n-o*s,f=u*a+l*s+o*i-h*n,_=l*a-o*n-h*i-u*s;return Dn(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=c*a+_*n+d*s-f*i,t[5]=d*a+_*i+f*n-c*s,t[6]=f*a+_*s+c*i-d*n,t[7]=_*a-c*n-d*i-f*s,t}function Ni(t,e,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=e[0],h=e[1],u=e[2],l=e[3];return t[0]=o*a+l*n+h*s-u*i,t[1]=h*a+l*i+u*n-o*s,t[2]=u*a+l*s+o*i-h*n,t[3]=l*a-o*n-h*i-u*s,o=e[4],h=e[5],u=e[6],l=e[7],t[4]=o*a+l*n+h*s-u*i,t[5]=h*a+l*i+u*n-o*s,t[6]=u*a+l*s+o*i-h*n,t[7]=l*a-o*n-h*i-u*s,t}function Ui(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*l+a*o+i*u-s*h,t[1]=i*l+a*h+s*o-n*u,t[2]=s*l+a*u+n*h-i*o,t[3]=a*l-n*o-i*h-s*u,o=r[4],h=r[5],u=r[6],l=r[7],t[4]=n*l+a*o+i*u-s*h,t[5]=i*l+a*h+s*o-n*u,t[6]=s*l+a*u+n*h-i*o,t[7]=a*l-n*o-i*h-s*u,t}function Bi(t,e,r,n){if(Math.abs(n)<f)return Ai(t,e);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var s=Math.sin(n),a=s*r[0]/i,o=s*r[1]/i,h=s*r[2]/i,u=Math.cos(n),l=e[0],c=e[1],d=e[2],_=e[3];t[0]=l*u+_*a+c*h-d*o,t[1]=c*u+_*o+d*a-l*h,t[2]=d*u+_*h+l*o-c*a,t[3]=_*u-l*a-c*o-d*h;var g=e[4],m=e[5],p=e[6],M=e[7];return t[4]=g*u+M*a+m*h-p*o,t[5]=m*u+M*o+p*a-g*h,t[6]=p*u+M*h+g*o-m*a,t[7]=M*u-g*a-m*o-p*h,t}function ji(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Yi(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[4],h=r[5],u=r[6],l=r[7],c=e[4],d=e[5],f=e[6],_=e[7],g=r[0],m=r[1],p=r[2],M=r[3];return t[0]=n*M+a*g+i*p-s*m,t[1]=i*M+a*m+s*g-n*p,t[2]=s*M+a*p+n*m-i*g,t[3]=a*M-n*g-i*m-s*p,t[4]=n*l+a*o+i*u-s*h+c*M+_*g+d*p-f*m,t[5]=i*l+a*h+s*o-n*u+d*M+_*m+f*g-c*p,t[6]=s*l+a*u+n*h-i*o+f*M+_*p+c*m-d*g,t[7]=a*l-n*o-i*h-s*u+_*M-c*g-d*m-f*p,t}var Vi=Yi;function Xi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var qi=ii;function Gi(t,e,r,n){var i=1-n;return qi(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function ki(t,e){var r=Zi(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Qi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Wi=ai,Hi=Wi,Zi=hi,zi=Zi;function Ki(t,e){var r=Zi(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,s=e[2]/r,a=e[3]/r,o=e[4],h=e[5],u=e[6],l=e[7],c=n*o+i*h+s*u+a*l;t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=(o-n*c)/r,t[5]=(h-i*c)/r,t[6]=(u-s*c)/r,t[7]=(l-a*c)/r}return t}function Ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $i(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ts(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=e[0],c=e[1],d=e[2],_=e[3],g=e[4],m=e[5],p=e[6],M=e[7];return Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-d)<=f*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-_)<=f*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-g)<=f*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-m)<=f*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(h-p)<=f*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(u-M)<=f*Math.max(1,Math.abs(u),Math.abs(M))}function es(){var t=new _(2);return _!=Float32Array&&(t[0]=0,t[1]=0),t}function rs(t){var e=new _(2);return e[0]=t[0],e[1]=t[1],e}function ns(t,e){var r=new _(2);return r[0]=t,r[1]=e,r}function is(t,e){return t[0]=e[0],t[1]=e[1],t}function ss(t,e,r){return t[0]=e,t[1]=r,t}function as(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function os(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function hs(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function us(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function ls(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function cs(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ds(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function fs(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function _s(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gs(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function ms(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function ps(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function Ms(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function vs(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function bs(t){var e=t[0],r=t[1];return e*e+r*r}function xs(t,e){return t[0]=-e[0],t[1]=-e[1],t}function ys(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Es(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function As(t,e){return t[0]*e[0]+t[1]*e[1]}function ws(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Rs(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}function Ts(t,e){e=e||1;var r=2*g()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Cs(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function Os(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function Ls(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function Ss(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function Ps(t,e,r,n){var i=e[0]-r[0],s=e[1]-r[1],a=Math.sin(n),o=Math.cos(n);return t[0]=i*o-s*a+r[0],t[1]=i*a+s*o+r[1],t}function Ds(t,e){var r=t[0],n=t[1],i=e[0],s=e[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+s*s),o=a&&(r*i+n*s)/a;return Math.acos(Math.min(Math.max(o,-1),1))}function Is(t){return t[0]=0,t[1]=0,t}function Fs(t){return"vec2("+t[0]+", "+t[1]+")"}function Ns(t,e){return t[0]===e[0]&&t[1]===e[1]}function Us(t,e){var r=t[0],n=t[1],i=e[0],s=e[1];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))}var Bs=vs,js=os,Ys=hs,Vs=us,Xs=ps,qs=Ms,Gs=bs,ks=function(){var t=es();return function(e,r,n,i,s,a){var o,h;for(r||(r=2),n||(n=0),h=i?Math.min(i*r+n,e.length):e.length,o=n;o<h;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}}()}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(5590)})();
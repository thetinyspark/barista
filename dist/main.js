(()=>{"use strict";var t={570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BLOB_TYPE=e.JSON_TYPE=e.SOUND_TYPE=e.VIDEO_TYPE=e.IMAGE_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=void 0;const n=r(4919);class a extends n.Emitter{uris=new Map;data;list;constructor(){super(),this.data=new Map,this.list=[]}getAll(){return this.data}queue(t,r=e.JSON_TYPE,n){this.list.push({uri:t,type:r,alias:n})}getQueue(){return this.list}freeQueue(){this.list=[]}loadQueue(){return Promise.all(this.list.map((t=>this.load(t.uri,t.type,t.alias)))).then((t=>(this.freeQueue(),t)))}getUris(){const t={};return this.uris.forEach(((e,r)=>{t[r]=e})),t}getUri(t){return this.uris.get(t)}get(t){return this.data.get(t)}load(t,r=e.JSON_TYPE,n){return this._loadBlob(t).then((t=>{switch(r){case e.IMAGE_TYPE:return a.blobToImage(t).catch(this._errorHandler);case e.JSON_TYPE:return a.blobToJSON(t).catch(this._errorHandler);case e.VIDEO_TYPE:return a.blobToVideo(t).catch(this._errorHandler);case e.SOUND_TYPE:return a.blobToSound(t).catch(this._errorHandler);default:return t}})).then((r=>(this.set(r,n,t),this.emit(e.LOAD_SUCCESS,r),r)))}set(t,e,r=""){this.uris.set(e,r),this.data.set(e,t)}delete(t){return this.getAll().delete(t)}destroy(){this.getAll().clear()}_errorHandler=t=>{this.emit(e.LOAD_ERROR,t)};_loadBlob(t){return fetch(t).then((t=>{if(200===t.status)return t.blob();this._errorHandler(t.statusText)})).catch(this._errorHandler)}static blobToSound(t){return new Promise(((e,r)=>{const n=document.createElement("audio"),a=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),e(n)},i=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),r("unable to load audio from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",i),n.src=a,n.load()}))}static blobToJSON(t){return new Promise((e=>{const r=new FileReader;r.addEventListener("load",(()=>{e(JSON.parse(r.result.toString()))})),r.readAsText(t,"utf8")}))}static blobToImage(t){return new Promise(((e,r)=>{const n=new Image,a=t=>{n.removeEventListener("load",s),n.removeEventListener("error",a),r("unable to load image from source")},s=t=>{n.removeEventListener("load",s),n.removeEventListener("error",a),e(n)};n.addEventListener("load",s),n.addEventListener("error",a);const i=URL.createObjectURL(t);n.src=i}))}static blobToVideo(t){return new Promise(((e,r)=>{const n=document.createElement("video"),a=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),e(n)},i=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),r("unable to load video from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",i),n.src=a,n.load()}))}}e.default=a,e.LOAD_ERROR="LOAD_ERROR",e.LOAD_SUCCESS="LOAD_SUCCESS",e.IMAGE_TYPE="IMAGE_TYPE",e.VIDEO_TYPE="VIDEO_TYPE",e.SOUND_TYPE="SOUND_TYPE",e.JSON_TYPE="JSON_TYPE",e.BLOB_TYPE="BLOB_TYPE"},5983:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VIDEO_TYPE=e.SOUND_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=e.JSON_TYPE=e.IMAGE_TYPE=e.BLOB_TYPE=e.AssetsManager=void 0;const n=r(570);e.AssetsManager=n.default,Object.defineProperty(e,"BLOB_TYPE",{enumerable:!0,get:function(){return n.BLOB_TYPE}}),Object.defineProperty(e,"IMAGE_TYPE",{enumerable:!0,get:function(){return n.IMAGE_TYPE}}),Object.defineProperty(e,"JSON_TYPE",{enumerable:!0,get:function(){return n.JSON_TYPE}}),Object.defineProperty(e,"LOAD_ERROR",{enumerable:!0,get:function(){return n.LOAD_ERROR}}),Object.defineProperty(e,"LOAD_SUCCESS",{enumerable:!0,get:function(){return n.LOAD_SUCCESS}}),Object.defineProperty(e,"SOUND_TYPE",{enumerable:!0,get:function(){return n.SOUND_TYPE}}),Object.defineProperty(e,"VIDEO_TYPE",{enumerable:!0,get:function(){return n.VIDEO_TYPE}})},6033:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=void 0;const n=r(4919);class a extends n.Emitter{_touches=[];_pressed=[];setTouches(t){this._touches=t}getTouches(){return this._touches}getTouchByKey(t){return this.getTouches().find((e=>e.key===t))||null}getTouchByValue(t){return this.getTouches().find((e=>e.value===t))||null}getPressedTouches(){return this._pressed}press(t,e=0){t.press(e),this._pressed.includes(t)||(this._pressed.push(t),this.emit(s.PRESS_KEY,t))}release(t,e=0){if(this._pressed.indexOf(t)>-1){this._pressed.splice(this._pressed.indexOf(t),1);const r=t.release(e);return this.emit(s.PRESS_KEY,t),r}return t.getElapsedTime()}}var s;e.default=a,function(t){t.PRESS_KEY="PRESS_KEY",t.RELEASE_KEY="RELEASE_KEY"}(s=e.GamePadTouchEvent||(e.GamePadTouchEvent={}))},5504:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{_pressing=!1;_timestamp=0;value;key;constructor(t="",e=""){this.value=e,this.key=t}get pressing(){return this._pressing}getElapsedTime(t=0){return this.pressing?t-this._timestamp:0}release(t=0){const e=this.getElapsedTime(t);return this._pressing=!1,e}press(t=0){this._pressing=!0,this._timestamp=t}}},4630:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MouseControlEvent=void 0;const n=r(2843),a=r(2727);var s;e.default=class{_stage;_lastTouch=0;constructor(t){this._stage=t}activate(){this.deactivate(),this._stage.getCanvas().addEventListener("click",this._handler),this._stage.getCanvas().addEventListener("mouseup",this._handler),this._stage.getCanvas().addEventListener("mousedown",this._handler),this._stage.getCanvas().addEventListener("mousemove",this._handler),this._stage.getCanvas().addEventListener("touchstart",this._touchHandler),this._stage.getCanvas().addEventListener("touchend",this._touchHandler),this._stage.getCanvas().addEventListener("touchmove",this._touchHandler)}deactivate(){this._stage.getCanvas().removeEventListener("click",this._handler),this._stage.getCanvas().removeEventListener("mouseup",this._handler),this._stage.getCanvas().removeEventListener("mousedown",this._handler),this._stage.getCanvas().removeEventListener("mousemove",this._handler),this._stage.getCanvas().removeEventListener("touchstart",this._touchHandler),this._stage.getCanvas().removeEventListener("touchend",this._touchHandler),this._stage.getCanvas().removeEventListener("touchmove",this._touchHandler)}_touchHandler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=0==t.touches.length?t.changedTouches[0].clientX:t.touches[0].clientX,n=0==t.touches.length?t.changedTouches[0].clientY:t.touches[0].clientY,a=r-e.x>>0,i=n-e.y>>0;switch(t.preventDefault(),t.type){case"touchstart":this.dispatchAt(a,i,s.MOUSE_CONTROL_DOWN);break;case"touchend":this.dispatchAt(a,i,s.MOUSE_CONTROL_UP);break;case"touchmove":this.dispatchAt(a,i,s.MOUSE_CONTROL_MOVE)}"touchstart"==t.type?this._lastTouch=Date.now():"touchend"==t.type&&Date.now()-this._lastTouch<135&&(this.dispatchAt(a,i,s.MOUSE_CONTROL_CLICK),this._lastTouch=Date.now())};_handler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=t.clientX-e.x>>0,n=t.clientY-e.y>>0;switch(t.type){case"click":this.dispatchAt(r,n,s.MOUSE_CONTROL_CLICK);break;case"mouseup":this.dispatchAt(r,n,s.MOUSE_CONTROL_UP);break;case"mousedown":this.dispatchAt(r,n,s.MOUSE_CONTROL_DOWN);break;case"mousemove":this.dispatchAt(r,n,s.MOUSE_CONTROL_MOVE)}};_getObjectUnderPointRecursive(t,e,r){const s=r.getChildren();let i=s.length;for(;--i>-1;){const r=s[i];if(a.isDisplayObjectContainer(r)){const n=this._getObjectUnderPointRecursive(t,e,r);if(null!==n)return n}else if(r.mouseEventsEnabled&&n.default.collide(t,e,r))return r}return null}dispatchAt(t,e,r){const n=this._getObjectUnderPointRecursive(t,e,this._stage),a=null===n?this._stage:n;let s=a;for(;null!==s;)s.emit(r,{x:t,y:e,target:a}),s=s.parent}},function(t){t.MOUSE_CONTROL_CLICK="MOUSE_CONTROL_CLICK",t.MOUSE_CONTROL_MOVE="MOUSE_CONTROL_MOVE",t.MOUSE_CONTROL_UP="MOUSE_CONTROL_UP",t.MOUSE_CONTROL_DOWN="MOUSE_CONTROL_DOWN"}(s=e.MouseControlEvent||(e.MouseControlEvent={}))},7392:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=e.GamePadTouch=e.GamePad=e.MouseControlEvent=e.MouseControl=void 0;const n=r(4630);e.MouseControl=n.default,Object.defineProperty(e,"MouseControlEvent",{enumerable:!0,get:function(){return n.MouseControlEvent}});const a=r(6033);e.GamePad=a.default,Object.defineProperty(e,"GamePadTouchEvent",{enumerable:!0,get:function(){return a.GamePadTouchEvent}});const s=r(5504);e.GamePadTouch=s.default},5165:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationEvent=void 0;const n=r(1610),a=r(4870),s=r(5055);class i extends s.default{_frames=[];_currentFrameIndex=0;_playing=!1;_forwarding=!0;loop=!1;constructor(){super(),this.addChild(new a.default)}play(){this._playing=!0,this._forwarding=!0}rewind(){this._playing=!0,this._forwarding=!1}stop(){this._playing=!1}render(t){if(super.render(t),this._playing){const t=this._forwarding?1:-1;this.goToFrame(this._currentFrameIndex+t)}}clearFrames(){this._currentFrameIndex=0,this._frames=[]}setFrameAt(t,e){e.index=t,this._frames[t]=e}getFrameAt(t){return this._frames[t]||null}getCurrentFrame(){let t=this.getFrameAt(this.getCurrentFrameIndex());return null===t&&this._forwarding?t=this.getPreviousDefinedFrameAt(this.getCurrentFrameIndex()):null!==t||this._forwarding||(t=this.getNextDefinedFrameAt(this.getCurrentFrameIndex())),t}getPreviousDefinedFrameAt(t){let e=null;for(;null===e&&t>-1;)e=this.getFrameAt(t--);return e}getNextDefinedFrameAt(t){let e=null;for(;null===e&&t<=this.getLastFrameIndex();)e=this.getFrameAt(t++);return e}removeFrameAt(t){this._frames[t]=null}getAnimationLength(){return this._frames.length}getLastFrameIndex(){return this.getAnimationLength()-1}getCurrentFrameIndex(){return this._currentFrameIndex}goToFrame(t){t=this.loop?(t=t>this.getLastFrameIndex()?0:t)<0?this.getLastFrameIndex():t:(t=t>this.getLastFrameIndex()?this.getLastFrameIndex():t)<0?0:t,this._currentFrameIndex=t;const e=this.getCurrentFrame(),r=this.getChildren()[0];r.texture=e.texture,r.width=e.width,r.height=e.height,r.x=e.offsetX,r.y=e.offsetY,r.update(this.worldMatrix,this.worldOpacity),this.emit(o.PLAY_FRAME,this._currentFrameIndex)}static createFromTexturesAndFrames(t){const e=new i;return t.forEach((t=>{const r=new n.default;r.width=t.texture.sw,r.height=t.texture.sh,r.originalWidth=r.width,r.originalHeight=r.height,r.texture=t.texture,e.setFrameAt(t.frame,r)})),e}}var o;e.default=i,function(t){t.PLAY_FRAME="PLAY_FRAME"}(o=e.AnimationEvent||(e.AnimationEvent={}))},1610:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{name="";index=0;width=0;height=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;texture=null}},528:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870),a=r(2843);class s extends n.default{constructor(){super()}getRevertWorldMatrix(){return a.default.getRevertWorldMatrix(this.worldMatrix)}getBounds(){return a.default.getBoundingRect(this)}}e.default=s},4870:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),a=r(4919),s=r(2041),i=r(351);class o extends a.Emitter{filters=[];texture=null;worldMatrix=n.mat2d.create();matrix=n.mat2d.create();x=0;y=0;opacity=1;worldOpacity=1;scaleX=1;scaleY=1;rotation=0;width=0;height=0;transformOrigin={x:0,y:0};parent=null;visible=!0;name="";mouseEventsEnabled=!0;snapshot(){const t=new s.default,e=this.matrix,r=this.worldMatrix,a=t.getCanvas(),i=t.getContext();return n.mat2d.identity(this.matrix),n.mat2d.identity(this.worldMatrix),a.width=this.width,a.height=this.height,t.add(this),t.draw(a,i),this.matrix=e,this.worldMatrix=r,t.getCanvas()}update(t,e=1){i.Geometry.updateTransform(t,this),this.opacity>1&&(this.opacity=1),this.opacity<0&&(this.opacity=0),this.worldOpacity=e*this.opacity}render(t){this.visible&&t.add(this)}static createFromTexture(t){const e=new o;return e.width=t.sw,e.height=t.sh,e.texture=t,e}}e.default=o},5055:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870);class a extends n.default{_children=[];addChild(t){this.contains(t)&&this.removeChild(t),this._children.push(t),t.parent=this}removeChild(t){const e=this.getChildIndex(t);return this.removeChildAt(e)}addChildAt(t,e){this.contains(t)&&this.removeChild(t);const r=this._children.splice(0,e);t.parent=this,this._children=[...r,t,...this._children]}removeChildAt(t){const e=this._children[t]||null;if(null===e)throw new Error("out of bound index for removeChildAt");return this._children.splice(t,1),e.parent=null,e}getChildren(){return this._children}getAllNestedChildrenIterative(){let t=[],e=[];for(e.push(this);e.length>0;){const r=e.shift(),n=t.indexOf(r)+1,a=t.splice(n);for(let n=0;n<r._children.length;n++){const a=r._children[n];t.push(a),void 0!==a.getChildren&&e.push(a)}t=t.concat(a)}return t}getAllNestedChildren(t=[]){for(let e=0;e<this._children.length;e++){const r=this._children[e];t.push(r),void 0!==r.getChildren&&r.getAllNestedChildren(t)}return t}getChildIndex(t){return this._children.indexOf(t)}contains(t){return t.parent===this&&this.getChildIndex(t)>-1}removeChildren(){for(;this._children.length>0;)this.removeChildAt(0)}update(t,e){super.update(t,e),this._children.forEach((t=>{t.update(this.worldMatrix,this.worldOpacity)}))}render(t){super.render(t),this.visible&&this._children.forEach((e=>{e.render(t)}))}}e.default=a},7632:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StageEvent=void 0;const n=r(887),a=r(2041),s=r(5055);class i extends s.default{_camera=null;_currentFrame=0;_renderer=new a.default;_clippingStrategy=null;autoUpdateMatrices=!0;constructor(){super()}setCamera(t){this._camera=t}getCamera(){return this._camera}setClippingStrategy(t){this._clippingStrategy=t}getClippingStrategy(){return this._clippingStrategy}getRenderer(){return this._renderer}setRenderer(t){this._renderer=t}getCanvas(){return this._renderer.getCanvas()}getContext(){return this._renderer.getContext()}getCurrentFrame(){return this._currentFrame}nextFrame(){this._currentFrame++,this.emit(o.ENTER_FRAME,this._currentFrame),!0===this.autoUpdateMatrices&&this.update(n.mat2d.create(),1),null!==this._clippingStrategy&&null!==this._camera&&this._clippingStrategy(this,this._camera),this._renderer.clear(),this.render(this._renderer),this._renderer.draw(this._renderer.getCanvas(),this._renderer.getContext()),this.emit(o.FRAME_END,this._currentFrame)}update(t,e){null!==this._camera&&(this._camera.update(t,1),t=this._camera.getRevertWorldMatrix()),super.update(t,e)}}var o;e.default=i,function(t){t.ENTER_FRAME="ENTER_FRAME",t.FRAME_END="FRAME_END"}(o=e.StageEvent||(e.StageEvent={}))},2359:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(7632),a=r(4870),s=r(5590),i=r(1057),o=r(5590);class h extends a.default{_stage=null;_lastFrameTime=0;_monitoring=!1;_elapsedTime=0;_context;constructor(){super();const t=o.CanvasUtils.create();this.width=t.width=450,this.height=t.height=50,this.texture=new s.Texture("stats_texture",new i.default(t),0,0,t.width,t.height),this.texture.data.isDynamic=!0,this._context=this.texture.source.getContext("2d")}getStage(){return this._stage}setStage(t){this.stop(),this._stage=t}start(){null!==this._stage&&this._stage.subscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!0}stop(){null!==this._stage&&this._stage.unsubscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!1}getFps(){return this._monitoring?Math.round(1e3/this._elapsedTime):-1}_enterFrame=t=>{this._elapsedTime=(new Date).getTime()-this._lastFrameTime,this._lastFrameTime=(new Date).getTime();const e=t.getPayload(),r=this._stage.getRenderer().getNumDrawCalls(),n=this._stage.getRenderer().getChildren().length;if(e%60==0){const t="fps: "+this.getFps()+", frame: "+e+", drawCalls: "+r+", quads: "+n,a=this._context;a.beginPath(),a.fillStyle="black",a.fillRect(0,0,this.width,this.height),a.fill(),a.font="20px Arial",a.fillStyle="red",a.fillText(t,0,Math.round(this.height/2)),a.closePath()}}}e.default=h},5850:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.Stats=e.StageEvent=e.Stage=e.DisplayObjectContainer=e.DisplayObject=e.AnimationEvent=e.Animation=void 0;const n=r(5165);e.Animation=n.default,Object.defineProperty(e,"AnimationEvent",{enumerable:!0,get:function(){return n.AnimationEvent}});const a=r(4870);e.DisplayObject=a.default;const s=r(5055);e.DisplayObjectContainer=s.default;const i=r(7632);e.Stage=i.default,Object.defineProperty(e,"StageEvent",{enumerable:!0,get:function(){return i.StageEvent}});const o=r(2359);e.Stats=o.default;const h=r(528);e.Camera=h.default},4849:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},2041:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5590);e.default=class{_children=[];_canvas;_context;constructor(){this._canvas=n.CanvasUtils.create(),this._context=this._canvas.getContext("2d")}getNumDrawCalls(){return this._children.length}getContext(){return this._context}getCanvas(){return this._canvas}add(t){this._children.push(t)}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){e.clearRect(0,0,t.width,t.height),this._children.forEach((t=>{if(null===t.texture)return;const r=t.worldMatrix;e.save(),e.globalAlpha=t.worldOpacity,e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),e.drawImage(t.texture.source,t.texture.sx,t.texture.sy,t.texture.sw,t.texture.sh,0,0,t.width,t.height),e.restore()}))}}},4367:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas2DRenderer=void 0;const n=r(2041);e.Canvas2DRenderer=n.default},9279:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},9332:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1261);e.default=class{id=0;fragmentShader=null;vertexShader=null;program=null;projectionPointer=0;constructor(t){this._init(t)}_init(t){let e=0,r=0,a=0,s=0,i=0,o=0,h=0,u=0,l=4*n.default.VERTEX_SIZE;if(this.fragmentShader=this._compile(t,this._getFragmentSource(),t.FRAGMENT_SHADER),this.vertexShader=this._compile(t,this._getVertexSource(),t.VERTEX_SHADER),null!=this.program&&t.deleteProgram(this.program),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error("Could not initialise shaders");t.useProgram(this.program),r=t.getAttribLocation(this.program,"worldOpacity"),e=t.getAttribLocation(this.program,"vertexPos"),s=t.getAttribLocation(this.program,"uvCoords"),i=t.getAttribLocation(this.program,"wmat1"),o=t.getAttribLocation(this.program,"wmat2"),a=t.getAttribLocation(this.program,"texturePos"),t.enableVertexAttribArray(a),t.enableVertexAttribArray(r),t.enableVertexAttribArray(e),t.enableVertexAttribArray(s),t.enableVertexAttribArray(i),t.enableVertexAttribArray(o),t.vertexAttribPointer(e,2,t.FLOAT,!1,l,0),t.vertexAttribPointer(s,2,t.FLOAT,!1,l,8),t.vertexAttribPointer(i,4,t.FLOAT,!1,l,16),t.vertexAttribPointer(o,2,t.FLOAT,!1,l,32),t.vertexAttribPointer(r,1,t.FLOAT,!1,l,40),t.vertexAttribPointer(a,1,t.FLOAT,!1,l,44),h=t.getUniformLocation(this.program,"uSamplers"),u=t.getUniformLocation(this.program,"uProjection");const c=[];for(let t=0;t<n.default.MAX_TEXTURES_UNITS;t++)c.push(t);t.uniform1iv(h,c),this.projectionPointer=u}_compile(t,e,r){const n=t.createShader(r);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(e+"*********"+t.getShaderInfoLog(n));return n}_getVertexSource(){return"\n\t\tattribute vec2 vertexPos;\n\t\tattribute vec2 uvCoords;\n\t\tattribute vec4 wmat1;\n\t\tattribute vec2 wmat2;\n\t\tattribute float worldOpacity;\n\t\tattribute float texturePos;\n\t\tvarying float textureIndex;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tuniform vec2 uProjection;\n\t\tconst vec3 center = vec3(-1.0, 1.0, 0);\n\n\n\n\t\tvoid main(void) {\n\n\t\t\tmat3 worldMatrix = mat3(\n\t\t\t\tvec3(wmat1.x, wmat1.z, wmat2.x),\n\t\t\t\tvec3(wmat1.y, wmat1.w, wmat2.y),\n\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t);\n\n\t\t\tvec3 tmp = vec3( vertexPos, 1.0) * worldMatrix;\n\t\t\tgl_Position = vec4((tmp / vec3(uProjection,1)) + center, 1.0);\n\n\t\t\tuvs = uvCoords;\n\t\t\ttextureIndex = texturePos;\n\n\t\t\tvColor = vec4(1.0, 1.0, 1.0, worldOpacity);\n\n\t\t}\n        "}_getFragmentSource(){let t="";for(let e=0;e<n.default.MAX_TEXTURES_UNITS;e++)e>0&&(t+="else "),t+=`if(index == ${e}){\n\t\t\t\tgl_FragColor = texture2D(uSamplers[${e}], uvs) * vColor.a;\n\t\t\t}`;return`\n\t\t#define numTextures ${n.default.MAX_TEXTURES_UNITS}\n\n\t\tprecision lowp float;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tvarying float textureIndex;\n\t\tuniform sampler2D uSamplers[numTextures];\n        \n\t\tvoid main(void) {\n\t\t\tint index = int(textureIndex);\n\t\t\t${t}\n\t\t}\n        `}}},904:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{_textureChannel=[];_context=null;reset(t,e){this._context=t,this._textureChannel=[];for(let t=0;t<e;t++)this._textureChannel.push({pos:t,id:this._context["TEXTURE"+t],data:null})}hasEmptyChannels(){return this.getEmptyChannels().length>0}getEmptyChannels(){return this._textureChannel.filter((t=>null===t.data))}getNonEmptyChannels(){return this._textureChannel.filter((t=>null!==t.data))}getChannelByUid(t){return this._textureChannel.find((e=>null!==e.data&&e.data.uid===t))||null}getChannels(){return this._textureChannel}getNonEmptyChannelsMappedByUid(){const t=new Map;return this.getNonEmptyChannels().forEach((e=>{t.set(e.data.uid,e)})),t}getChannelAt(t){return this._textureChannel[t]||null}isChannelEmptyAt(t){return null===this.getChannelAt(t).data}fillChannelAt(t,e){const r=this.getChannelAt(t);if(null===r)return!1;try{r.data=e,r.data.texturePos=t,this._context.activeTexture(r.id),this._context.bindTexture(this._context.TEXTURE_2D,e.getGlTexture(this._context))}catch(t){return console.log(t),!1}return!0}}},1261:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createIndexArray=e.createVertexArray=e.pushVerticesInto=e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL=e.MAX_TEXTURES_UNITS=e.NUM_VERTICES_PER_QUAD=e.INDICES_PER_QUAD=e.VERTEX_SIZE=void 0;const n=r(351);function a(t,e){let r=0,n=null,a=0,s=0,i=0,o=0,h=0,u=0,l=0,c=null,d=0,f=0,_=null,g=0;for(let m=0;m<t.length;m++)c=t[m],l=c.texture.data.texturePos,n=c.worldMatrix,d=c.width,f=c.height,_=c.texture,g=c.worldOpacity,a=n[0],s=n[1],i=n[2],o=n[3],h=n[4],u=n[5],e[r+0]=0,e[r+1]=0,e[r+2]=_.topLeftUv.u,e[r+3]=_.topLeftUv.v,e[r+4]=a,e[r+5]=s,e[r+6]=i,e[r+7]=o,e[r+8]=h,e[r+9]=u,e[r+10]=g,e[r+11]=l,e[r+12]=d,e[r+13]=0,e[r+14]=_.topRightUv.u,e[r+15]=_.topRightUv.v,e[r+16]=a,e[r+17]=s,e[r+18]=i,e[r+19]=o,e[r+20]=h,e[r+21]=u,e[r+22]=g,e[r+23]=l,e[r+24]=0,e[r+25]=f,e[r+26]=_.bottomLeftUv.u,e[r+27]=_.bottomLeftUv.v,e[r+28]=a,e[r+29]=s,e[r+30]=i,e[r+31]=o,e[r+32]=h,e[r+33]=u,e[r+34]=g,e[r+35]=l,e[r+36]=d,e[r+37]=f,e[r+38]=_.bottomRightUv.u,e[r+39]=_.bottomRightUv.v,e[r+40]=a,e[r+41]=s,e[r+42]=i,e[r+43]=o,e[r+44]=h,e[r+45]=u,e[r+46]=g,e[r+47]=l,r+=48}function s(){return new Float32Array(e.MAX_QUAD_PER_CALL*e.VERTEX_SIZE*e.NUM_VERTICES_PER_QUAD)}function i(){const t=e.MAX_QUAD_PER_CALL*e.INDICES_PER_QUAD,r=new Uint16Array(t);let n=0;for(let a=0;a<t;a+=e.INDICES_PER_QUAD)r[a+0]=n+0,r[a+1]=n+1,r[a+2]=n+2,r[a+3]=n+1,r[a+4]=n+2,r[a+5]=n+3,n+=e.NUM_VERTICES_PER_QUAD;return r}e.VERTEX_SIZE=12,e.INDICES_PER_QUAD=6,e.NUM_VERTICES_PER_QUAD=4,e.MAX_TEXTURES_UNITS=function(t){const e=n.CanvasUtils.create().getContext("webgl");return e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(),e.MAX_QUAD_PER_CALL=Math.floor(65535/e.INDICES_PER_QUAD),e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL*e.NUM_VERTICES_PER_QUAD*e.VERTEX_SIZE,e.pushVerticesInto=a,e.createVertexArray=s,e.createIndexArray=i;class o{static VERTEX_SIZE=e.VERTEX_SIZE;static NUM_VERTICES_PER_QUAD=e.NUM_VERTICES_PER_QUAD;static MAX_TEXTURES_UNITS=e.MAX_TEXTURES_UNITS;static MAX_QUAD_PER_CALL=e.MAX_QUAD_PER_CALL;static VERTEX_ARRAY_SIZE=e.VERTEX_ARRAY_SIZE;static INDICES_PER_QUAD=e.INDICES_PER_QUAD;static pushVerticesInto=a;static createVertexArray=s;static createIndexArray=i}e.default=o},5798:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(9332),a=r(1261),s=r(978),i=r(767),o=r(904),h=r(1268);e.default=class{_children=[];_canvas;_context;_vertexArray;_indexArray;_vertexBuffer;_indexBuffer;_currentShader;_drawCalls=0;constructor(){this._init()}_init(){this._canvas=s.default.create(),this._context=this._canvas.getContext("webgl"),this._vertexArray=a.default.createVertexArray(),this._indexArray=a.default.createIndexArray(),this._vertexBuffer=this._context.createBuffer(),this._indexBuffer=this._context.createBuffer(),this._context.bindBuffer(this._context.ARRAY_BUFFER,this._vertexBuffer),this._context.bufferData(this._context.ARRAY_BUFFER,this._vertexArray,this._context.DYNAMIC_DRAW),this._context.bindBuffer(this._context.ELEMENT_ARRAY_BUFFER,this._indexBuffer),this._context.bufferData(this._context.ELEMENT_ARRAY_BUFFER,this._indexArray,this._context.STATIC_DRAW),this._currentShader=new n.default(this._context),this._context.disable(this._context.DEPTH_TEST),this._context.disable(this._context.CULL_FACE),this._context.blendFunc(this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA),this._context.enable(this._context.BLEND)}add(t){this._children.push(t)}getNumDrawCalls(){return this._drawCalls}getCanvas(){return this._canvas}getContext(){return this._context}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){const r=t.width/2,n=-t.height/2;e.uniform2f(this._currentShader.projectionPointer,r,n),e.clearColor(0,0,0,1),e.viewport(0,0,t.width,t.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=new o.default,i=this.batch(this._children);this._drawCalls=0,i.forEach((t=>{s.reset(e,a.default.MAX_TEXTURES_UNITS),Array.from(t.datas).forEach(((t,e)=>{s.fillChannelAt(e,t)})),t.subBatches.forEach((t=>{a.default.pushVerticesInto(t.objects,this._vertexArray),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertexArray),e.drawElements(e.TRIANGLES,t.objects.length*a.default.INDICES_PER_QUAD,e.UNSIGNED_SHORT,0),this._drawCalls++}))}))}batch(t){const e=i.default.create(t.filter((t=>null!==t.texture)),a.default.MAX_TEXTURES_UNITS);return e.forEach((t=>{t.subBatches=h.default.create(t.objects,a.default.MAX_QUAD_PER_CALL)})),e}}},1268:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static create(t,e){const n=[];for(;t.length>0;){const a=new r;a.objects=t.splice(0,e),a.full=a.objects.length>=e,n.push(a)}return n.filter((t=>t.objects.length>0))}subBatches=[];full=!1;objects=[]}e.default=r},767:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static create(t,e){const n=[new r];let a=n[0],s=0;for(let i=0;i<t.length;i++){const o=t[i],h=o.texture.textureUid;a.uids.has(h)||(a.uids.size>=e&&(a.objects=t.slice(s,i),s=i,a=new r,n.push(a)),a.uids.add(h),a.datas.add(o.texture.data))}return a.objects=t.slice(s),n.filter((t=>t.objects.length>0))}subBatches=[];objects=[];uids=new Set;datas=new Set}e.default=r},7379:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BatchDrawCall=e.BatchTexture=void 0;const n=r(1268);e.BatchDrawCall=n.default;const a=r(767);e.BatchTexture=a.default},3515:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pushVerticesInto=e.createVertexArray=e.createIndexArray=e.VERTEX_SIZE=e.VERTEX_ARRAY_SIZE=e.NUM_VERTICES_PER_QUAD=e.MAX_QUAD_PER_CALL=e.INDICES_PER_QUAD=e.TextureDataManager=e.WebGlConfig=e.Webgl2DRenderer=e.Default2DShader=void 0;const n=r(9332);e.Default2DShader=n.default;const a=r(5798);e.Webgl2DRenderer=a.default;const s=r(904);e.TextureDataManager=s.default;const i=r(1261);e.WebGlConfig=i.default,Object.defineProperty(e,"INDICES_PER_QUAD",{enumerable:!0,get:function(){return i.INDICES_PER_QUAD}}),Object.defineProperty(e,"MAX_QUAD_PER_CALL",{enumerable:!0,get:function(){return i.MAX_QUAD_PER_CALL}}),Object.defineProperty(e,"NUM_VERTICES_PER_QUAD",{enumerable:!0,get:function(){return i.NUM_VERTICES_PER_QUAD}}),Object.defineProperty(e,"VERTEX_ARRAY_SIZE",{enumerable:!0,get:function(){return i.VERTEX_ARRAY_SIZE}}),Object.defineProperty(e,"VERTEX_SIZE",{enumerable:!0,get:function(){return i.VERTEX_SIZE}}),Object.defineProperty(e,"createIndexArray",{enumerable:!0,get:function(){return i.createIndexArray}}),Object.defineProperty(e,"createVertexArray",{enumerable:!0,get:function(){return i.createVertexArray}}),Object.defineProperty(e,"pushVerticesInto",{enumerable:!0,get:function(){return i.pushVerticesInto}})},6902:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5590),a=r(5590),s=r(5050),i=r(9319);e.default=class{_width=0;_height=0;_zones=[];_textures=[];_textureData=null;constructor(t,e,r=[]){this._reset(t,e,r)}_sortZonesByAreaAsc(t,e){return t.getArea()>e.getArea()?-1:1}_sortSourcesByAreaAsc(t,e){return t.source.width*t.source.height>e.source.width*e.source.height?-1:1}_drawTextures(){const t=a.CanvasUtils.create(this._width,this._height),e=n.Texture.createFromSource("main",t),r=e.data.getSource().getContext("2d"),s=this.getZones().filter((t=>!t.isEmpty())),i=s.map((t=>({id:t.data.id,sx:t.x,sy:t.y,sw:t.width,sh:t.height})));return s.forEach((t=>{r.save(),r.drawImage(t.data.source,t.x,t.y,t.width,t.height),r.restore()})),this._textureData=e.data,e.createSubTextures(i)}_addSource(t){const e=this._findFreeZoneFor(t.source);if(null===e)return!1;let r=null,n=null;return t.source.width>t.source.height?(r=e.splitBottom(t.source.height),n=e.splitRight(t.source.width)):(n=e.splitRight(t.source.width),r=e.splitBottom(t.source.height)),e.data=t,null!==n&&n.getArea()>0&&this._zones.push(n),null!==r&&r.getArea()>0&&this._zones.push(r),!0}_findFreeZoneFor(t){return this._zones.sort(this._sortZonesByAreaAsc),this._zones.find((e=>e.canContain(t.width,t.height)&&e.isEmpty()))||null}_reset(t,e,r){this._width=s.default.getNextPowerOf2(t),this._height=s.default.getNextPowerOf2(e);const n=new i.default;n.x=0,n.y=0,n.width=this._width,n.height=this._height,n.data=null,this._zones=[n],r.sort(this._sortSourcesByAreaAsc),r.forEach((t=>{this._addSource(t)})),this._textures=this._drawTextures()}getTextureData(){return this._textureData}getTextures(){return this._textures}getZones(){return this._zones}getWidth(){return this._width}getHeight(){return this._height}}},5827:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1057);class a{_data;sx=0;sy=0;sw=0;sh=0;topLeftUv={u:0,v:0};topRightUv={u:0,v:0};bottomLeftUv={u:0,v:0};bottomRightUv={u:0,v:0};id="";constructor(t="",e,r=0,n=0,a=0,s=0){this._data=e,this.sx=r,this.sy=n,this.sw=a,this.sh=s,this.id=t,this.calcUv()}calcUv(){const t=this._data.getSource().width,e=this._data.getSource().height,r=this.sx/t,n=(this.sx+this.sw)/t,a=this.sy/e,s=(this.sy+this.sh)/e;this.topLeftUv.u=r,this.topLeftUv.v=a,this.topRightUv.u=n,this.topRightUv.v=a,this.bottomLeftUv.u=r,this.bottomLeftUv.v=s,this.bottomRightUv.u=n,this.bottomRightUv.v=s}get textureUid(){return this._data.uid}get data(){return this._data}get source(){return this._data.getSource()}createSubTexture(t,e,r,n,s){return new a(t,this._data,e,r,n,s)}createSubTextures(t){return t.map((t=>this.createSubTexture(t.id,t.sx,t.sy,t.sw,t.sh)))}static createFromSource(t,e){const r=new n.default(e);return e instanceof HTMLVideoElement&&(r.isDynamic=!0),new a(t,r,0,0,r.width,r.height)}}e.default=a},1057:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5590),a=r(5050);class s{width=0;height=0;texturePos=0;_source;_uid;_glTexture=null;_isDynamic=!1;_updateNextFrame=!1;static _counter=0;constructor(t){this.setSource(t),this._uid="texture_data_"+s._counter++}setSource(t){const e=a.default.getNextPowerOf2(t.width),r=a.default.getNextPowerOf2(t.height),s=n.CanvasUtils.create(),i=s.getContext("2d");s.width=e,s.height=r,i.drawImage(t,0,0),this._source=s,this.width=e,this.height=r,this._updateNextFrame=!0}getSource(){return this._source}getGlTexture(t){return null===this._glTexture&&(this._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null)),(this._isDynamic||this._updateNextFrame)&&(this._updateNextFrame=!1,t.bindTexture(t.TEXTURE_2D,this._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source)),this._glTexture}get uid(){return this._uid}get isDynamic(){return this._isDynamic}set isDynamic(t){this._isDynamic=t}}e.default=s},9319:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{x;y;width;height;data=null;isEmpty(){return null===this.data}_partialClone(){const t=new r;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}splitRight(t){if(t>=this.width)return null;const e=this._partialClone();return e.x+=t,e.width-=t,this.width=t,e}splitLeft(t){if(t>=this.width)return null;const e=this._partialClone();return this.x+=t,this.width-=t,e.width=t,e}splitBottom(t){if(t>=this.height)return null;const e=this._partialClone();return e.y+=t,e.height-=t,this.height=t,e}splitTop(t){if(t>=this.height)return null;const e=this._partialClone();return this.y+=t,this.height-=t,e.height=t,e}getArea(){return this.width*this.height}canContain(t,e){return t<=this.width&&e<=this.height}}e.default=r},1940:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Zone=e.TextureData=e.Texture=e.Spritesheet=void 0;const n=r(6902);e.Spritesheet=n.default;const a=r(5827);e.Texture=a.default;const s=r(1057);e.TextureData=s.default;const i=r(9319);e.Zone=i.default},978:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static create(t=1,e=1){const r=document.createElement("canvas");return r.width=t,r.height=e,r}static fillRect(t,e,r,n,a,s){const i=t.getContext("2d");i.save(),i.beginPath(),i.fillStyle=e,i.fillRect(r,n,a,s),i.fill(),i.closePath(),i.restore()}static getCanvasPixels(t){const e=r.create(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),e.getContext("2d").getImageData(0,0,e.width,e.height).data}static getCanvasPixel(t,e,n){const a=r.getCanvasPixels(t),s=Math.floor(n*t.width*4)+4*e;return[a[s],a[s+1],a[s+2],a[s+3]]}static canvasPixelToRGBA(t){return{r:t[0],g:t[1],b:t[2],a:t[3]}}static pixelsAreTheSame(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}}e.default=r},2843:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),a=r(2727);class s{static TO_RADIANS=Math.PI/180;static FAST_ANGLES=s.getFastAngle();static FAST_SIN=s.getFastSinus();static FAST_COS=s.getFastCosinus();static getFastAngle(){const t=[];for(let e=0;e<=360;e++)t.push(e*this.TO_RADIANS);return t}static getFastSinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.sin(e*this.TO_RADIANS);return t}static getFastCosinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.cos(e*this.TO_RADIANS);return t}static updateTransformAll(t,e){let r=t[0],a=t[1],i=t[2],o=t[3],h=t[4],u=t[5],l=n.mat2d.create(),c=n.mat2d.create(),d=n.mat2d.create(),f=null,_=null,g=0,m=0,p=0,M=0,v=0,b=0,x=0;for(let n=0;n<e.length;n++)f=e[n],c=f.matrix,d=f.worldMatrix,g=(f.rotation%360+360)%360>>0,m=s.FAST_SIN[g],p=s.FAST_COS[g],M=f.transformOrigin.x>>0,v=f.transformOrigin.y>>0,b=f.scaleX,x=f.scaleY,c[0]=p*b,c[1]=m*b,c[2]=-m*x,c[3]=p*x,c[4]=c[0]*-M+c[2]*-v+f.x+M,c[5]=c[1]*-M+c[3]*-v+f.y+v,f.parent!==_&&(l=null!==f.parent?f.parent.worldMatrix:t,_=f.parent,r=l[0],a=l[1],i=l[2],o=l[3],h=l[4],u=l[5]),d[0]=r*c[0]+i*c[1],d[1]=a*c[0]+o*c[1],d[2]=r*c[2]+i*c[3],d[3]=a*c[2]+o*c[3],d[4]=r*c[4]+i*c[5]+h,d[5]=a*c[4]+o*c[5]+u}static updateTransform(t,e){const r=e.matrix,n=e.worldMatrix,a=e.rotation<0?(360+e.rotation>>0)%360:(e.rotation>>0)%360;let s=r[0],i=r[1],o=r[2],h=r[3],u=r[4],l=r[5],c=t[0],d=t[1],f=t[2],_=t[3],g=t[4],m=t[5],p=0,M=0,v=0,b=0;r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e.x+e.transformOrigin.x>>0,r[5]=e.y+e.transformOrigin.y>>0,s=r[0],i=r[1],o=r[2],h=r[3],u=r[4],l=r[5],p=this.FAST_SIN[a],M=this.FAST_COS[a],r[0]=s*M+o*p,r[1]=i*M+h*p,r[2]=s*-p+o*M,r[3]=i*-p+h*M,r[4]=u,r[5]=l,s=r[0],i=r[1],o=r[2],h=r[3],u=r[4],l=r[5],v=e.scaleX,b=e.scaleY,r[0]=s*v,r[1]=i*v,r[2]=o*b,r[3]=h*b,r[4]=u,r[5]=l,s=r[0],i=r[1],o=r[2],h=r[3],u=r[4],l=r[5],v=-e.transformOrigin.x>>0,b=-e.transformOrigin.y>>0,r[0]=s,r[1]=i,r[2]=o,r[3]=h,r[4]=s*v+o*b+u,r[5]=i*v+h*b+l,c=r[0],d=r[1],f=r[2],_=r[3],g=r[4],m=r[5],s=t[0],i=t[1],o=t[2],h=t[3],u=t[4],l=t[5],n[0]=s*c+o*d,n[1]=i*c+h*d,n[2]=s*f+o*_,n[3]=i*f+h*_,n[4]=s*g+o*m+u,n[5]=i*g+h*m+l}static getHitbox(t){if(a.isDisplayObjectContainer(t)){const e=t.getChildren().map((t=>this.getHitbox(t))),r=[],n=[];e.forEach((t=>{r.push(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),n.push(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y)}));const a=Math.min(...r),s=Math.max(...r),i=Math.min(...n),o=Math.max(...n);return{topLeft:{x:a,y:i},topRight:{x:s,y:i},bottomLeft:{x:a,y:o},bottomRight:{x:s,y:o}}}{const e=t.worldMatrix;return{topLeft:this.transformPoint(0,0,e),topRight:this.transformPoint(t.width,0,e),bottomLeft:this.transformPoint(0,t.height,e),bottomRight:this.transformPoint(t.width,t.height,e)}}}static getBoundingRect(t){const e=this.getHitbox(t),r=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),n=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),a=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y);return{x:r,y:a,width:n-r,height:Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y)-a}}static transformPoint(t,e,r){return{x:Math.round(t*r[0]+e*r[2]+r[4]),y:Math.round(t*r[1]+e*r[3]+r[5])}}static getRevertWorldMatrix(t){const e=n.mat2d.create();return n.mat2d.invert(e,t),e}static collide(t,e,r){const n=this.getBoundingRect(r);return!(t<n.x||t>n.x+n.width||e<n.y||e>n.y+n.height)}}e.default=s},5050:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getNextPowerOf2(t){let e=1;for(;e<t;)e*=2;return e}}},351:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=e.isWebGLAvailable=e.isDisplayObjectContainer=e.Geometry=e.CanvasUtils=void 0;const n=r(978);e.CanvasUtils=n.default;const a=r(2843);e.Geometry=a.default;const s=r(2727);Object.defineProperty(e,"isDisplayObjectContainer",{enumerable:!0,get:function(){return s.isDisplayObjectContainer}}),Object.defineProperty(e,"isWebGLAvailable",{enumerable:!0,get:function(){return s.isWebGLAvailable}});const i=r(5050);e.MathUtils=i.default},2727:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isWebGLAvailable=e.isDisplayObjectContainer=void 0;const n=r(5590);e.isDisplayObjectContainer=function(t){return void 0!==t.getChildren},e.isWebGLAvailable=function(){return null!==n.CanvasUtils.create().getContext("webgl")}},5590:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(r(5983),e),a(r(7392),e),a(r(5850),e),a(r(4849),e),a(r(9279),e),a(r(4367),e),a(r(3515),e),a(r(7379),e),a(r(1940),e),a(r(351),e),a(r(4919),e),a(r(2576),e),a(r(5794),e),a(r(9510),e),a(r(8791),e),a(r(4499),e),a(r(1035),e),a(r(7072),e),a(r(2677),e),a(r(3407),e),a(r(8433),e),r(887).glMatrix.setMatrixArrayType(Array)},7690:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{id="";state={}}},9510:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameNode=void 0;const n=r(7690);e.GameNode=n.default},220:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{_map=[];_numRows=0;_numCols=0;constructor(){}reset(t,e){this._numRows=t,this._numCols=e,this._map=[];for(let r=0;r<t;r++){const t=[];for(let r=0;r<e;r++)t.push(null);this._map.push(t)}}destroy(){this._map=[],this._numRows=0,this._numCols=0}getNeighbours(t,e){return{topLeft:this.getTopLeft(t,e),top:this.getTop(t,e),topRight:this.getTopRight(t,e),left:this.getLeft(t,e),center:this.getAt(t,e),right:this.getRight(t,e),bottomLeft:this.getBottomLeft(t,e),bottom:this.getBottom(t,e),bottomRight:this.getBottomRight(t,e)}}getLeft(t,e){return this.getAt(t,e-1)}getRight(t,e){return this.getAt(t,e+1)}getBottom(t,e){return this.getAt(t+1,e)}getBottomLeft(t,e){return this.getAt(t+1,e-1)}getBottomRight(t,e){return this.getAt(t+1,e+1)}getTop(t,e){return this.getAt(t-1,e)}getTopLeft(t,e){return this.getAt(t-1,e-1)}getTopRight(t,e){return this.getAt(t-1,e+1)}getAt(t,e){return this.isOutOfBounds(t,e)?null:this._map[t][e]}addAt(t,e,r){this.isOutOfBounds(t,e)||(this._map[t][e]=r)}removeAt(t,e){this.isOutOfBounds(t,e)||(this._map[t][e]=null)}isOutOfBounds(t,e){return t>this.numRows-1||e>this.numCols-1||t<0||e<0}forEach(t){for(let e=0;e<this.numRows;e++)for(let r=0;r<this.numCols;r++)t(this._map[e][r],e,r)}map(t){const e=[];for(let r=0;r<this.numRows;r++){e[r]=[];for(let n=0;n<this.numCols;n++)e[r][n]=t(this._map[r][n],r,n)}return r.from(e)}extract(t,e,n,a){const s=[];e=e>this.numRows-1?this.numRows-1:e,a=a>this.numCols-1?this.numCols-1:a,n=n<0?0:n;for(let r=t=t<0?0:t;r<=e;r++){const t=[];for(let e=n;e<=a;e++)t.push(this.getAt(r,e));s.push(t)}return r.from(s)}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}static from(t){const e=new r,n=t.length,a=t[0]?.length||0;e.reset(n,a);for(let r=0;r<n;r++)for(let n=0;n<a;n++)e.addAt(r,n,t[r][n]);return e}}e.default=r},7569:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{_map=[];_numRows=0;_numCols=0;_numLayers=0;constructor(){}reset(t,e,r){this._numRows=t,this._numCols=e,this._numLayers=r,this._map=[];for(let n=0;n<r;n++){const r=[];this._map.push(r);for(let n=0;n<t;n++){const t=[];r.push(t);for(let r=0;r<e;r++)t.push(null)}}}destroy(){this._map=[],this._numRows=0,this._numCols=0,this._numLayers=0}getAt(t,e,r){return this.isOutOfBounds(t,e,r)?null:this._map[r][t][e]}addAt(t,e,r,n){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=n)}removeAt(t,e,r){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=null)}isOutOfBounds(t,e,r){return t>this.numRows-1||e>this.numCols-1||r>this.numLayers-1||r<0||t<0||e<0}forEach(t){for(let e=0;e<this.numLayers;e++)for(let r=0;r<this.numRows;r++)for(let n=0;n<this.numCols;n++)t(this._map[e][r][n],r,n,e)}getNeighbours(t,e,r){return{topLeftFront:this.getTopLeftFront(t,e,r),topFront:this.getTopFront(t,e,r),topRightFront:this.getTopRightFront(t,e,r),leftFront:this.getLeftFront(t,e,r),centerFront:this.getFront(t,e,r),rightFront:this.getRightFront(t,e,r),bottomLeftFront:this.getBottomLeftFront(t,e,r),bottomFront:this.getBottomFront(t,e,r),bottomRightFront:this.getBottomRightFront(t,e,r),topLeftBack:this.getTopLeftBack(t,e,r),topBack:this.getTopBack(t,e,r),topRightBack:this.getTopRightBack(t,e,r),leftBack:this.getLeftBack(t,e,r),centerBack:this.getBack(t,e,r),rightBack:this.getRightBack(t,e,r),bottomLeftBack:this.getBottomLeftBack(t,e,r),bottomBack:this.getBottomBack(t,e,r),bottomRightBack:this.getBottomRightBack(t,e,r),topLeft:this.getTopLeft(t,e,r),top:this.getTop(t,e,r),topRight:this.getTopRight(t,e,r),left:this.getLeft(t,e,r),center:this.getAt(t,e,r),right:this.getRight(t,e,r),bottomLeft:this.getBottomLeft(t,e,r),bottom:this.getBottom(t,e,r),bottomRight:this.getBottomRight(t,e,r)}}getLeftFront(t,e,r){return this.getAt(t,e-1,r-1)}getRightFront(t,e,r){return this.getAt(t,e+1,r-1)}getBottomFront(t,e,r){return this.getAt(t+1,e,r-1)}getBottomLeftFront(t,e,r){return this.getAt(t+1,e-1,r-1)}getBottomRightFront(t,e,r){return this.getAt(t+1,e+1,r-1)}getTopFront(t,e,r){return this.getAt(t-1,e,r-1)}getTopLeftFront(t,e,r){return this.getAt(t-1,e-1,r-1)}getTopRightFront(t,e,r){return this.getAt(t-1,e+1,r-1)}getFront(t,e,r){return this.getAt(t,e,r-1)}getBack(t,e,r){return this.getAt(t,e,r+1)}getLeftBack(t,e,r){return this.getAt(t,e-1,r+1)}getRightBack(t,e,r){return this.getAt(t,e+1,r+1)}getBottomBack(t,e,r){return this.getAt(t+1,e,r+1)}getBottomLeftBack(t,e,r){return this.getAt(t+1,e-1,r+1)}getBottomRightBack(t,e,r){return this.getAt(t+1,e+1,r+1)}getTopBack(t,e,r){return this.getAt(t-1,e,r+1)}getTopLeftBack(t,e,r){return this.getAt(t-1,e-1,r+1)}getTopRightBack(t,e,r){return this.getAt(t-1,e+1,r+1)}getLeft(t,e,r){return this.getAt(t,e-1,r)}getRight(t,e,r){return this.getAt(t,e+1,r)}getBottom(t,e,r){return this.getAt(t+1,e,r)}getBottomLeft(t,e,r){return this.getAt(t+1,e-1,r)}getBottomRight(t,e,r){return this.getAt(t+1,e+1,r)}getTop(t,e,r){return this.getAt(t-1,e,r)}getTopLeft(t,e,r){return this.getAt(t-1,e-1,r)}getTopRight(t,e,r){return this.getAt(t-1,e+1,r)}map(t){const e=[];for(let r=0;r<this.numLayers;r++){e[r]=[];for(let n=0;n<this.numRows;n++){e[r][n]=[];for(let a=0;a<this.numCols;a++)e[r][n][a]=t(this._map[r][n][a],n,a,r)}}return r.from(e)}extract(t,e,n,a,s,i){const o=[];i=i>this.numLayers-1?this.numLayers-1:i,e=e>this.numRows-1?this.numRows-1:e,a=a>this.numCols-1?this.numCols-1:a,t=t<0?0:t,n=n<0?0:n;for(let r=s=s<0?0:s;r<=i;r++){const s=[];for(let i=t;i<=e;i++){const t=[];for(let e=n;e<=a;e++)t.push(this.getAt(i,e,r));s.push(t)}o.push(s)}return r.from(o)}static from(t){const e=new r,n=t.length,a=t[0]?.length||0,s=t[0]?.[0]?.length||0;e.reset(a,s,n);for(let r=0;r<n;r++)for(let n=0;n<a;n++)for(let a=0;a<s;a++)e.addAt(n,a,r,t[r][n][a]);return e}get numLayers(){return this._numLayers}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}}e.default=r},8791:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid3D=e.Grid2D=void 0;const n=r(220);e.Grid2D=n.default;const a=r(7569);e.Grid3D=a.default},5462:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{x;y;width;height;constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n}toString(){return"[x:"+this.x+",y:"+this.y+",width:"+this.width+",height:"+this.height+"]"}collideBox(t){return this.collidePoint(t.x,t.y)||this.collidePoint(t.x+t.width,t.y)||this.collidePoint(t.x,t.y+t.height)||this.collidePoint(t.x+t.width,t.y+t.height)||t.collidePoint(this.x,this.y)||t.collidePoint(this.x+this.width,this.y)||t.collidePoint(this.x,this.y+this.height)||t.collidePoint(this.x+this.width,this.y+this.height)}collidePoint(t,e){return!(t<this.x||e<this.y||t>this.x+this.width||e>this.y+this.height)}getMidX(){return this.x+this.width/2}getMidY(){return this.y+this.height/2}splitVertical(){return[new r(this.x,this.y,this.width/2,this.height),new r(this.getMidX(),this.y,this.width/2,this.height)]}splitHorizontal(){return[new r(this.x,this.y,this.width,this.height/2),new r(this.x,this.getMidY(),this.width,this.height/2)]}}e.default=r},4683:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{box;axis;constructor(t,e){this.box=t,this.axis=e}search(t,e,r=[]){if(t.getPartitionMethod().box.collideBox(e)){if(null!==t.getLeft())t.getLeft().search(e,r),t.getRight().search(e,r);else{const n=t.getChildren(),a=n.length;for(let t=0;t<a;t++)n[t].collideBox(e)&&r.push(n[t])}return r}}split(t){const e=[],n=[],a=t.length,s=this.box.getMidX(),i=this.box.getMidY();for(let r=0;r<a;r++){const a=t[r];"x"===this.axis?a.x>=s?n.push(a):e.push(a):a.y>=i?n.push(a):e.push(a)}const o="x"===this.axis?this.box.splitVertical():this.box.splitHorizontal(),h="x"===this.axis?"y":"x";return{left:e,right:n,leftFunction:new r(o[0],h),rightFunction:new r(o[1],h)}}}e.default=r},8955:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{_maxChildren;_depth;_maxDepth;_partitionMethod;parent=null;_left=null;_right=null;_children=[];constructor(t,e,r,n){this._maxChildren=t,this._depth=e,this._maxDepth=r,this._partitionMethod=n,this.reset()}search(...t){return this._partitionMethod.search(this,...t)}reset(){this._children=[],this._left=null,this._right=null}createSubNodes(){const t=this._partitionMethod.split(this.getChildren());this._left=new r(this._maxChildren,this._depth+1,this._maxDepth,t.leftFunction),this._right=new r(this._maxChildren,this._depth+1,this._maxDepth,t.rightFunction),t.left.forEach(this._left.addChild.bind(this._left)),t.right.forEach(this._right.addChild.bind(this._right)),this._left.parent=this,this._right.parent=this,this._children=[]}getChildren(){return this._children}addChild(t){if(this._children.length>=this._maxChildren&&this._depth<this._maxDepth&&this.createSubNodes(),null===this._left&&null===this._right)this._children.push(t);else{const e=this._partitionMethod.split([t]);e.left.length>0&&this._left.addChild(e.left[0]),e.right.length>0&&this._right.addChild(e.right[0])}}getPartitionMethod(){return this._partitionMethod}getLeft(){return this._left}getRight(){return this._right}getDepth(){return this._depth}setDepth(t){this._depth=t}}e.default=r},4499:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Partition2D=e.BoundingBox=e.PartitionTreeNode=void 0;const n=r(5462);e.BoundingBox=n.default;const a=r(4683);e.Partition2D=a.default;const s=r(8955);e.PartitionTreeNode=s.default},557:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{_maxWeight=0;_maxItems=0;_items=[];constructor(){this.reset(0,0)}reset(t,e){this.maxWeight=e,this.maxItems=t,this._items=[]}add(t){return this.remainingSpace>0&&this.remainingWeight>=t.weight&&(this._items.push(t),!0)}getAllByCategory(t){return this._items.filter((e=>e.category===t))}getAllCategories(){const t=this._items.map((t=>t.category)),e=new Set(t);return Array.from(e)}getAllGroupByCategory(){return this.getAllCategories().map((t=>({category:t,items:this.getAllByCategory(t)})))}remove(t){const e=this._items.indexOf(t);return e>-1?(this._items.splice(e,1),t):null}contains(t){return this._items.indexOf(t)>-1}get remainingSpace(){return this.maxItems-this._items.length}get totalWeight(){let t=0;for(let e of this._items)t+=e.weight;return t}get numItems(){return this._items.length}get remainingWeight(){return this.maxWeight-this.totalWeight}get maxWeight(){return this._maxWeight}set maxWeight(t){this._maxWeight=t<0?0:t}get maxItems(){return this._maxItems}set maxItems(t){this._maxItems=t<0?0:t}}},1035:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Inventory=void 0;const n=r(557);e.Inventory=n.default},5430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),a=r(9510),s=r(8126);e.default=class{_grid=null;_pathCoords;_currentRow=0;_currentCol=0;reset(t,e,r,i){this._pathCoords=[],this._grid=new n.Grid2D,this._grid.reset(t,e),this._currentRow=r,this._currentCol=i,this._grid.forEach(((t,e,r)=>{const n=new a.GameNode;n.state.type=e%2==0||r%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol;t.getAt(r,n).state.type=s.default.FREE;const a=[{wall:this._grid.getLeft(r,n),target:this._grid.getLeft(r,n-1),row:r,col:n-2},{wall:this._grid.getRight(r,n),target:this._grid.getRight(r,n+1),row:r,col:n+2},{wall:this._grid.getTop(r,n),target:this._grid.getTop(r-1,n),row:r-2,col:n},{wall:this._grid.getBottom(r,n),target:this._grid.getBottom(r+1,n),row:r+2,col:n}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(a.length>0){const t=a[Math.round(Math.random()*(a.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n]),this._currentRow=t.row,this._currentCol=t.col}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1]}else this._currentRow=null,this._currentCol=null}}},4781:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),a=r(9510),s=r(8126);e.default=class{_grid=null;_pathCoords;_currentRow=0;_currentCol=0;_currentLayer=0;reset(t,e,r,i,o,h){this._pathCoords=[],this._grid=new n.Grid3D,this._grid.reset(t,e,r),this._currentRow=i,this._currentCol=o,this._currentLayer=h,this._grid.forEach(((t,e,r,n)=>{const i=new a.GameNode;i.state.type=e%2==0||r%2==0||n%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n,i)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getLayers(){return this._grid.numLayers}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol,this._currentLayer)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol&&null===this._currentLayer}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol,a=this._currentLayer;t.getAt(r,n,a).state.type=s.default.FREE;const i=[{wall:this._grid.getAt(r,n-1,a),target:this._grid.getAt(r,n-2,a),row:r,col:n-2,layer:a},{wall:this._grid.getAt(r,n+1,a),target:this._grid.getAt(r,n+2,a),row:r,col:n+2,layer:a},{wall:this._grid.getAt(r-1,n,a),target:this._grid.getAt(r-2,n,a),row:r-2,col:n,layer:a},{wall:this._grid.getAt(r+1,n,a),target:this._grid.getAt(r+2,n,a),row:r+2,col:n,layer:a},{wall:this._grid.getAt(r,n,a-1),target:this._grid.getAt(r,n,a-2),row:r,col:n,layer:a-2},{wall:this._grid.getAt(r,n,a+1),target:this._grid.getAt(r,n,a+2),row:r,col:n,layer:a+2}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(i.length>0){const t=i[Math.round(Math.random()*(i.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n,a]),this._currentRow=t.row,this._currentCol=t.col,this._currentLayer=t.layer}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1],this._currentLayer=t[2]}else this._currentRow=null,this._currentCol=null,this._currentLayer=null}}},8126:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WALL="WALL",t.FREE="FREE",t.BLOCK="BLOCK"}(r||(r={})),e.default=r},3078:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),a=r(9510);e.default=class{opened=[];closed=[];createGraphe(t,e){const r=new n.Grid2D;return r.reset(t.numRows,t.numCols),t.forEach(((t,n,s)=>{const i=new a.GameNode;i.state.row=n,i.state.col=s,i.state.g=0,i.state.f=0,i.state.h=0,i.state.walkable=t===e,i.state.parent=null,r.addAt(n,s,i)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r)=>{t&&(t.state.row=e,t.state.col=r,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,a=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const i=[t.getLeft(r.state.row,r.state.col),t.getRight(r.state.row,r.state.col),t.getTop(r.state.row,r.state.col),t.getBottom(r.state.row,r.state.col)];a&&i.push(t.getTopLeft(r.state.row,r.state.col),t.getTopRight(r.state.row,r.state.col),t.getBottomLeft(r.state.row,r.state.col),t.getBottomRight(r.state.row,r.state.col)),i.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const a=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,i=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col))*e.NODE_DISTANCE_VALUE,o=i+s;(a&&s<t.state.g||!a)&&(t.state.parent=r,t.state.g=s,t.state.h=i,t.state.f=o,a||this._addToOpenList(t))}))}const i=[];if(this.opened.length>0){let t=n;for(;t!=r;)i.unshift(t),t=t.state.parent;i.unshift(r)}return i}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},6217:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),a=r(9510);e.default=class{opened=[];closed=[];createGraphe(t,e){const r=new n.Grid3D;return r.reset(t.numRows,t.numCols,t.numLayers),t.forEach(((t,n,s,i)=>{const o=new a.GameNode;o.state.row=n,o.state.col=s,o.state.layer=i,o.state.g=0,o.state.f=0,o.state.h=0,o.state.walkable=t===e,o.state.parent=null,r.addAt(n,s,i,o)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r,n)=>{t&&(t.state.row=e,t.state.col=r,t.state.layer=n,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,a=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const i=[t.getLeft(r.state.row,r.state.col,r.state.layer),t.getRight(r.state.row,r.state.col,r.state.layer),t.getTop(r.state.row,r.state.col,r.state.layer),t.getBottom(r.state.row,r.state.col,r.state.layer),t.getBack(r.state.row,r.state.col,r.state.layer),t.getFront(r.state.row,r.state.col,r.state.layer)];a&&i.push(t.getTopLeftBack(r.state.row,r.state.col,r.state.layer),t.getTopRightBack(r.state.row,r.state.col,r.state.layer),t.getBottomLeftBack(r.state.row,r.state.col,r.state.layer),t.getBottomRightBack(r.state.row,r.state.col,r.state.layer),t.getTopLeftFront(r.state.row,r.state.col,r.state.layer),t.getTopRightFront(r.state.row,r.state.col,r.state.layer),t.getBottomLeftFront(r.state.row,r.state.col,r.state.layer),t.getBottomRightFront(r.state.row,r.state.col,r.state.layer),t.getTopLeft(r.state.row,r.state.col,r.state.layer),t.getTopRight(r.state.row,r.state.col,r.state.layer),t.getBottomLeft(r.state.row,r.state.col,r.state.layer),t.getBottomRight(r.state.row,r.state.col,r.state.layer)),i.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const a=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,i=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col)+Math.abs(n.state.layer-t.state.layer))*e.NODE_DISTANCE_VALUE,o=i+s;(a&&s<t.state.g||!a)&&(t.state.parent=r,t.state.g=s,t.state.h=i,t.state.f=o,a||this._addToOpenList(t))}))}const i=[];if(this.opened.length>0){let t=n;for(;t!=r;)i.unshift(t),t=t.state.parent;i.unshift(r)}return i}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},9170:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4919);class a extends n.Emitter{_states=[];_current=null;_timestamp=0;static ON_COMPLETE_ACTION="ON_COMPLETE_ACTION";setTime(t){this._timestamp=t;const e=this.getCurrentState();if(null===e||null===e.onCompleteAction)return;const r=e.duration||0,n=e.lockDuration||0,a=Math.max(r,n);this.getElapsedTime()<a||this.emit("ON_COMPLETE_ACTION",e.onCompleteAction)}getTime(){return this._timestamp}addState(t){this._states.push(t)}removeState(t){this._states.splice(this._states.indexOf(t),1)}reset(){this._current=null,this._states=[]}hasState(t){return null!==this.getStateById(t)}getStateById(t){return this._states.find((e=>e.id===t))||null}getElapsedTime(){const t=this.getCurrentState();return null===t?-1:this._timestamp-t.startTime}dispatch(t){const e=this.getCurrentState();if(null===e)return;if(this._timestamp-e.startTime<e.lockDuration)return;const r=e.actions.find((e=>e.name===t))||null;if(null===r)return;const n=this.getStateById(r.target);n!==e&&(this.setCurrentState(n),this.emit("CHANGE_STATE",n))}getCurrentState(){return this._current||null}setCurrentState(t){this.hasState(t.id)||this.addState(t),t.startTime=this._timestamp,this._current=t}getStates(){return this._states}}e.default=a},5794:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FiniteStateMachine=void 0;const n=r(9170);e.FiniteStateMachine=n.default},2576:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFinder3D=e.PathFinder2D=e.MazeNodeType=e.Maze3D=e.Maze2D=void 0;const n=r(5430);e.Maze2D=n.default;const a=r(4781);e.Maze3D=a.default;const s=r(8126);e.MazeNodeType=s.default;const i=r(3078);e.PathFinder2D=i.default;const o=r(6217);e.PathFinder3D=o.default},7072:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.makeIsometric=void 0;const n=r(5587);e.makeIsometric=n.default},5587:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5084);e.default=function(t){return class extends t{isoNode=new n.default;constructor(...t){super(...t)}syncWithNode(){null!==this.isoNode&&(this.y=this.isoNode.isoY-this.isoNode.isoZ-this.isoNode.offsetY,this.x=this.isoNode.isoX-this.isoNode.offsetX)}}}},5084:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1777),a=r(7690);class s extends a.default{isoX=0;isoY=0;isoZ=0;row=0;col=0;cellWidth=64;cellHeight=32;width=64;height=64;get offsetY(){return this.height-this.cellHeight}get offsetX(){return this.width-this.cellWidth>>1}resetRowAndColFromCoordinates(){const t=n.screenToIso(this.isoX,this.isoY,this.cellWidth,this.cellHeight);this.col=t.col,this.row=t.row}resetCoordinatesFromRowAndCol(){const t=n.isoToScreen(this.row,this.col,this.cellWidth,this.cellHeight);this.isoX=t.x,this.isoY=t.y,this.isoZ=0}}e.default=s},2677:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoNode=void 0;const n=r(5084);e.IsoNode=n.default},3407:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.screenToIso=e.isoToScreen=e.isoSort=void 0;const n=r(1777);Object.defineProperty(e,"isoSort",{enumerable:!0,get:function(){return n.isoSort}}),Object.defineProperty(e,"isoToScreen",{enumerable:!0,get:function(){return n.isoToScreen}}),Object.defineProperty(e,"screenToIso",{enumerable:!0,get:function(){return n.screenToIso}})},1777:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isoSort=e.isoToScreen=e.screenToIso=void 0,e.screenToIso=function(t,e,r,n){let a={row:0,col:0},s=e/n,i=t/r;return a.col=s+i,a.row=s-i,a},e.isoToScreen=function(t,e,r,n){return{x:.5*r*(e-t)>>0,y:(e+t)*(.5*n)>>0}},e.isoSort=function(t,e){return t.isoNode&&e.isoNode?t.isoNode.isoY===e.isoNode.isoY?t.isoNode.isoZ<e.isoNode.isoZ?-1:1:t.isoNode.isoY<e.isoNode.isoY?-1:1:-1}},5043:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5055),a=r(1777);class s extends n.default{sortAuto=!1;sort(){this.getChildren().sort(a.isoSort)}render(t){this.sortAuto&&this.sort(),super.render(t)}}e.default=s},8433:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoMap=void 0;const n=r(5043);e.IsoMap=n.default},4570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(6060),a=function(){function t(){this._observers=new Map}return t.prototype.emit=function(t,e){var r=this._observers.get(t)||[],a=new n.default(t,this,e);r.forEach((function(t){t(a)}))},t.prototype.hasObservers=function(t){return void 0!==this._observers.get(t)},t.prototype.unsubscribe=function(t,e){if(this.isObserver(t,e)){var r=this._observers.get(t);r.splice(r.indexOf(e),1)}},t.prototype.isObserver=function(t,e){return(this._observers.get(t)||[]).indexOf(e)>-1},t.prototype.subscribe=function(t,e){if(this.isObserver(t,e))return!1;var r=this._observers.get(t)||[];return r.push(e),this._observers.set(t,r),!0},t.prototype.unsubscribeAll=function(){this._observers=new Map},t}();e.default=a},6060:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){this._type=t,this._emitter=e,this._payload=r}return t.prototype.getEventType=function(){return this._type},t.prototype.getEmitter=function(){return this._emitter},t.prototype.getPayload=function(){return this._payload},t}();e.default=r},4919:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=e.Emitter=void 0;var n=r(4570);e.Emitter=n.default;var a=r(6060);e.Notification=a.default},887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>a,mat2d:()=>s,mat3:()=>i,mat4:()=>o,quat:()=>l,quat2:()=>c,vec2:()=>d,vec3:()=>h,vec4:()=>u});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>_,EPSILON:()=>f,RANDOM:()=>g,equals:()=>v,setMatrixArrayType:()=>m,toRadian:()=>M});var a={};r.r(a),r.d(a,{LDU:()=>U,add:()=>B,adjoint:()=>C,clone:()=>x,copy:()=>E,create:()=>b,determinant:()=>O,equals:()=>V,exactEquals:()=>Y,frob:()=>N,fromRotation:()=>D,fromScaling:()=>I,fromValues:()=>A,identity:()=>y,invert:()=>T,mul:()=>G,multiply:()=>L,multiplyScalar:()=>X,multiplyScalarAndAdd:()=>q,rotate:()=>S,scale:()=>P,set:()=>w,str:()=>F,sub:()=>k,subtract:()=>j,transpose:()=>R});var s={};r.r(s),r.d(s,{add:()=>ut,clone:()=>Q,copy:()=>H,create:()=>W,determinant:()=>$,equals:()=>_t,exactEquals:()=>ft,frob:()=>ht,fromRotation:()=>at,fromScaling:()=>st,fromTranslation:()=>it,fromValues:()=>z,identity:()=>Z,invert:()=>J,mul:()=>gt,multiply:()=>tt,multiplyScalar:()=>ct,multiplyScalarAndAdd:()=>dt,rotate:()=>et,scale:()=>rt,set:()=>K,str:()=>ot,sub:()=>mt,subtract:()=>lt,translate:()=>nt});var i={};r.r(i),r.d(i,{add:()=>Vt,adjoint:()=>Rt,clone:()=>vt,copy:()=>bt,create:()=>pt,determinant:()=>Tt,equals:()=>Wt,exactEquals:()=>kt,frob:()=>Yt,fromMat2d:()=>Ft,fromMat4:()=>Mt,fromQuat:()=>Nt,fromRotation:()=>Dt,fromScaling:()=>It,fromTranslation:()=>Pt,fromValues:()=>xt,identity:()=>yt,invert:()=>wt,mul:()=>Qt,multiply:()=>Ct,multiplyScalar:()=>qt,multiplyScalarAndAdd:()=>Gt,normalFromMat4:()=>Ut,projection:()=>Bt,rotate:()=>Lt,scale:()=>St,set:()=>Et,str:()=>jt,sub:()=>Ht,subtract:()=>Xt,translate:()=>Ot,transpose:()=>At});var o={};r.r(o),r.d(o,{add:()=>Ie,adjoint:()=>ne,clone:()=>zt,copy:()=>Kt,create:()=>Zt,determinant:()=>ae,equals:()=>je,exactEquals:()=>Be,frob:()=>De,fromQuat:()=>we,fromQuat2:()=>ve,fromRotation:()=>_e,fromRotationTranslation:()=>Me,fromRotationTranslationScale:()=>ye,fromRotationTranslationScaleOrigin:()=>Ae,fromScaling:()=>fe,fromTranslation:()=>de,fromValues:()=>Jt,fromXRotation:()=>ge,fromYRotation:()=>me,fromZRotation:()=>pe,frustum:()=>Re,getRotation:()=>Ee,getScaling:()=>xe,getTranslation:()=>be,identity:()=>te,invert:()=>re,lookAt:()=>Le,mul:()=>Ye,multiply:()=>se,multiplyScalar:()=>Ne,multiplyScalarAndAdd:()=>Ue,ortho:()=>Oe,perspective:()=>Te,perspectiveFromFieldOfView:()=>Ce,rotate:()=>he,rotateX:()=>ue,rotateY:()=>le,rotateZ:()=>ce,scale:()=>oe,set:()=>$t,str:()=>Pe,sub:()=>Ve,subtract:()=>Fe,targetTo:()=>Se,translate:()=>ie,transpose:()=>ee});var h={};r.r(h),r.d(h,{add:()=>He,angle:()=>yr,bezier:()=>gr,ceil:()=>Je,clone:()=>qe,copy:()=>We,create:()=>Xe,cross:()=>dr,dist:()=>Pr,distance:()=>sr,div:()=>Sr,divide:()=>Ke,dot:()=>cr,equals:()=>Tr,exactEquals:()=>Rr,floor:()=>$e,forEach:()=>Nr,fromValues:()=>ke,hermite:()=>_r,inverse:()=>ur,len:()=>Ir,length:()=>Ge,lerp:()=>fr,max:()=>er,min:()=>tr,mul:()=>Lr,multiply:()=>ze,negate:()=>hr,normalize:()=>lr,random:()=>mr,rotateX:()=>br,rotateY:()=>xr,rotateZ:()=>Er,round:()=>rr,scale:()=>nr,scaleAndAdd:()=>ar,set:()=>Qe,sqrDist:()=>Dr,sqrLen:()=>Fr,squaredDistance:()=>ir,squaredLength:()=>or,str:()=>wr,sub:()=>Or,subtract:()=>Ze,transformMat3:()=>Mr,transformMat4:()=>pr,transformQuat:()=>vr,zero:()=>Ar});var u={};r.r(u),r.d(u,{add:()=>Xr,ceil:()=>Wr,clone:()=>Br,copy:()=>Yr,create:()=>Ur,cross:()=>hn,dist:()=>bn,distance:()=>$r,div:()=>vn,divide:()=>kr,dot:()=>on,equals:()=>mn,exactEquals:()=>gn,floor:()=>Qr,forEach:()=>An,fromValues:()=>jr,inverse:()=>an,len:()=>En,length:()=>en,lerp:()=>un,max:()=>Zr,min:()=>Hr,mul:()=>Mn,multiply:()=>Gr,negate:()=>nn,normalize:()=>sn,random:()=>ln,round:()=>zr,scale:()=>Kr,scaleAndAdd:()=>Jr,set:()=>Vr,sqrDist:()=>xn,sqrLen:()=>yn,squaredDistance:()=>tn,squaredLength:()=>rn,str:()=>_n,sub:()=>pn,subtract:()=>qr,transformMat4:()=>cn,transformQuat:()=>dn,zero:()=>fn});var l={};r.r(l),r.d(l,{add:()=>ea,calculateW:()=>In,clone:()=>Kn,conjugate:()=>Vn,copy:()=>$n,create:()=>wn,dot:()=>aa,equals:()=>da,exactEquals:()=>ca,exp:()=>Fn,fromEuler:()=>qn,fromMat3:()=>Xn,fromValues:()=>Jn,getAngle:()=>On,getAxisAngle:()=>Cn,identity:()=>Rn,invert:()=>Yn,len:()=>oa,length:()=>ia,lerp:()=>sa,ln:()=>Nn,mul:()=>ra,multiply:()=>Ln,normalize:()=>la,pow:()=>Un,random:()=>jn,rotateX:()=>Sn,rotateY:()=>Pn,rotateZ:()=>Dn,rotationTo:()=>fa,scale:()=>na,set:()=>ta,setAxes:()=>ga,setAxisAngle:()=>Tn,slerp:()=>Bn,sqlerp:()=>_a,sqrLen:()=>ua,squaredLength:()=>ha,str:()=>Gn});var c={};r.r(c),r.d(c,{add:()=>ja,clone:()=>pa,conjugate:()=>Wa,copy:()=>Aa,create:()=>ma,dot:()=>qa,equals:()=>ts,exactEquals:()=>$a,fromMat4:()=>ya,fromRotation:()=>Ea,fromRotationTranslation:()=>ba,fromRotationTranslationValues:()=>va,fromTranslation:()=>xa,fromValues:()=>Ma,getDual:()=>Ca,getReal:()=>Ta,getTranslation:()=>Sa,identity:()=>wa,invert:()=>ka,len:()=>Ha,length:()=>Qa,lerp:()=>Ga,mul:()=>Va,multiply:()=>Ya,normalize:()=>Ka,rotateAroundAxis:()=>Ba,rotateByQuatAppend:()=>Na,rotateByQuatPrepend:()=>Ua,rotateX:()=>Da,rotateY:()=>Ia,rotateZ:()=>Fa,scale:()=>Xa,set:()=>Ra,setDual:()=>La,setReal:()=>Oa,sqrLen:()=>za,squaredLength:()=>Za,str:()=>Ja,translate:()=>Pa});var d={};r.r(d),r.d(d,{add:()=>is,angle:()=>Ds,ceil:()=>ls,clone:()=>rs,copy:()=>as,create:()=>es,cross:()=>ws,dist:()=>Xs,distance:()=>ps,div:()=>Vs,divide:()=>us,dot:()=>As,equals:()=>Us,exactEquals:()=>Ns,floor:()=>cs,forEach:()=>ks,fromValues:()=>ns,inverse:()=>Es,len:()=>Bs,length:()=>vs,lerp:()=>Rs,max:()=>fs,min:()=>ds,mul:()=>Ys,multiply:()=>hs,negate:()=>xs,normalize:()=>ys,random:()=>Ts,rotate:()=>Ps,round:()=>_s,scale:()=>gs,scaleAndAdd:()=>ms,set:()=>ss,sqrDist:()=>qs,sqrLen:()=>Gs,squaredDistance:()=>Ms,squaredLength:()=>bs,str:()=>Fs,sub:()=>js,subtract:()=>os,transformMat2:()=>Cs,transformMat2d:()=>Os,transformMat3:()=>Ls,transformMat4:()=>Ss,zero:()=>Is});var f=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,g=Math.random;function m(t){_=t}var p=Math.PI/180;function M(t){return t*p}function v(t,e){return Math.abs(t-e)<=f*Math.max(1,Math.abs(t),Math.abs(e))}function b(){var t=new _(4);return _!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function x(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function E(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){var a=new _(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function w(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function R(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function T(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*s-a*n;return i?(i=1/i,t[0]=s*i,t[1]=-n*i,t[2]=-a*i,t[3]=r*i,t):null}function C(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function L(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*o+s*h,t[1]=a*o+i*h,t[2]=n*u+s*l,t[3]=a*u+i*l,t}function S(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+s*o,t[1]=a*h+i*o,t[2]=n*-o+s*h,t[3]=a*-o+i*h,t}function P(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],h=r[1];return t[0]=n*o,t[1]=a*o,t[2]=s*h,t[3]=i*h,t}function D(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function F(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t){return Math.hypot(t[0],t[1],t[2],t[3])}function U(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function B(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=e[0],o=e[1],h=e[2],u=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-u)<=f*Math.max(1,Math.abs(s),Math.abs(u))}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function q(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=L,k=j;function W(){var t=new _(6);return _!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Q(t){var e=new _(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function H(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z(t,e,r,n,a,s){var i=new _(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=a,i[5]=s,i}function K(t,e,r,n,a,s,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t}function J(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=r*s-n*a;return h?(h=1/h,t[0]=s*h,t[1]=-n*h,t[2]=-a*h,t[3]=r*h,t[4]=(a*o-s*i)*h,t[5]=(n*i-r*o)*h,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=r[0],l=r[1],c=r[2],d=r[3],f=r[4],_=r[5];return t[0]=n*u+s*l,t[1]=a*u+i*l,t[2]=n*c+s*d,t[3]=a*c+i*d,t[4]=n*f+s*_+o,t[5]=a*f+i*_+h,t}function et(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+s*u,t[1]=a*l+i*u,t[2]=n*-u+s*l,t[3]=a*-u+i*l,t[4]=o,t[5]=h,t}function rt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=r[0],l=r[1];return t[0]=n*u,t[1]=a*u,t[2]=s*l,t[3]=i*l,t[4]=o,t[5]=h,t}function nt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=r[0],l=r[1];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=n*u+s*l+o,t[5]=a*u+i*l+h,t}function at(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function st(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ut(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function lt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function ct(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function _t(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],h=e[0],u=e[1],l=e[2],c=e[3],d=e[4],_=e[5];return Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-l)<=f*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(s-c)<=f*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(i-d)<=f*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-_)<=f*Math.max(1,Math.abs(o),Math.abs(_))}var gt=tt,mt=lt;function pt(){var t=new _(9);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new _(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xt(t,e,r,n,a,s,i,o,h){var u=new _(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=a,u[5]=s,u[6]=i,u[7]=o,u[8]=h,u}function Et(t,e,r,n,a,s,i,o,h,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=h,t[8]=u,t}function yt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function wt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=l*i-o*u,d=-l*s+o*h,f=u*s-i*h,_=r*c+n*d+a*f;return _?(_=1/_,t[0]=c*_,t[1]=(-l*n+a*u)*_,t[2]=(o*n-a*i)*_,t[3]=d*_,t[4]=(l*r-a*h)*_,t[5]=(-o*r+a*s)*_,t[6]=f*_,t[7]=(-u*r+n*h)*_,t[8]=(i*r-n*s)*_,t):null}function Rt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=e[6],u=e[7],l=e[8];return t[0]=i*l-o*u,t[1]=a*u-n*l,t[2]=n*o-a*i,t[3]=o*h-s*l,t[4]=r*l-a*h,t[5]=a*s-r*o,t[6]=s*u-i*h,t[7]=n*h-r*u,t[8]=r*i-n*s,t}function Tt(t){var e=t[0],r=t[1],n=t[2],a=t[3],s=t[4],i=t[5],o=t[6],h=t[7],u=t[8];return e*(u*s-i*h)+r*(-u*a+i*o)+n*(h*a-s*o)}function Ct(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],f=r[1],_=r[2],g=r[3],m=r[4],p=r[5],M=r[6],v=r[7],b=r[8];return t[0]=d*n+f*i+_*u,t[1]=d*a+f*o+_*l,t[2]=d*s+f*h+_*c,t[3]=g*n+m*i+p*u,t[4]=g*a+m*o+p*l,t[5]=g*s+m*h+p*c,t[6]=M*n+v*i+b*u,t[7]=M*a+v*o+b*l,t[8]=M*s+v*h+b*c,t}function Ot(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=o,t[5]=h,t[6]=d*n+f*i+u,t[7]=d*a+f*o+l,t[8]=d*s+f*h+c,t}function Lt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*n+d*i,t[1]=f*a+d*o,t[2]=f*s+d*h,t[3]=f*i-d*n,t[4]=f*o-d*a,t[5]=f*h-d*s,t[6]=u,t[7]=l,t[8]=c,t}function St(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Nt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r+r,o=n+n,h=a+a,u=r*i,l=n*i,c=n*o,d=a*i,f=a*o,_=a*h,g=s*i,m=s*o,p=s*h;return t[0]=1-c-_,t[3]=l-p,t[6]=d+m,t[1]=l+p,t[4]=1-u-_,t[7]=f-g,t[2]=d-m,t[5]=f+g,t[8]=1-u-c,t}function Ut(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15],M=r*o-n*i,v=r*h-a*i,b=r*u-s*i,x=n*h-a*o,E=n*u-s*o,y=a*u-s*h,A=l*g-c*_,w=l*m-d*_,R=l*p-f*_,T=c*m-d*g,C=c*p-f*g,O=d*p-f*m,L=M*O-v*C+b*T+x*R-E*w+y*A;return L?(L=1/L,t[0]=(o*O-h*C+u*T)*L,t[1]=(h*R-i*O-u*w)*L,t[2]=(i*C-o*R+u*A)*L,t[3]=(a*C-n*O-s*T)*L,t[4]=(r*O-a*R+s*w)*L,t[5]=(n*R-r*C-s*A)*L,t[6]=(g*y-m*E+p*x)*L,t[7]=(m*b-_*y-p*v)*L,t[8]=(_*E-g*b+p*M)*L,t):null}function Bt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Yt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Xt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function qt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Gt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function kt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],h=t[6],u=t[7],l=t[8],c=e[0],d=e[1],_=e[2],g=e[3],m=e[4],p=e[5],M=e[6],v=e[7],b=e[8];return Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-_)<=f*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(i-m)<=f*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-p)<=f*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(h-M)<=f*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(u-v)<=f*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-b)<=f*Math.max(1,Math.abs(l),Math.abs(b))}var Qt=Ct,Ht=Xt;function Zt(){var t=new _(16);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function zt(t){var e=new _(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,r,n,a,s,i,o,h,u,l,c,d,f,g,m){var p=new _(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=a,p[5]=s,p[6]=i,p[7]=o,p[8]=h,p[9]=u,p[10]=l,p[11]=c,p[12]=d,p[13]=f,p[14]=g,p[15]=m,p}function $t(t,e,r,n,a,s,i,o,h,u,l,c,d,f,_,g,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=d,t[12]=f,t[13]=_,t[14]=g,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],s=e[6],i=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=a,t[13]=i,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15],M=r*o-n*i,v=r*h-a*i,b=r*u-s*i,x=n*h-a*o,E=n*u-s*o,y=a*u-s*h,A=l*g-c*_,w=l*m-d*_,R=l*p-f*_,T=c*m-d*g,C=c*p-f*g,O=d*p-f*m,L=M*O-v*C+b*T+x*R-E*w+y*A;return L?(L=1/L,t[0]=(o*O-h*C+u*T)*L,t[1]=(a*C-n*O-s*T)*L,t[2]=(g*y-m*E+p*x)*L,t[3]=(d*E-c*y-f*x)*L,t[4]=(h*R-i*O-u*w)*L,t[5]=(r*O-a*R+s*w)*L,t[6]=(m*b-_*y-p*v)*L,t[7]=(l*y-d*b+f*v)*L,t[8]=(i*C-o*R+u*A)*L,t[9]=(n*R-r*C-s*A)*L,t[10]=(_*E-g*b+p*M)*L,t[11]=(c*b-l*E-f*M)*L,t[12]=(o*w-i*T-h*A)*L,t[13]=(r*T-n*w+a*A)*L,t[14]=(g*v-_*x-m*M)*L,t[15]=(l*x-c*v+d*M)*L,t):null}function ne(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],p=e[15];return t[0]=o*(d*p-f*m)-c*(h*p-u*m)+g*(h*f-u*d),t[1]=-(n*(d*p-f*m)-c*(a*p-s*m)+g*(a*f-s*d)),t[2]=n*(h*p-u*m)-o*(a*p-s*m)+g*(a*u-s*h),t[3]=-(n*(h*f-u*d)-o*(a*f-s*d)+c*(a*u-s*h)),t[4]=-(i*(d*p-f*m)-l*(h*p-u*m)+_*(h*f-u*d)),t[5]=r*(d*p-f*m)-l*(a*p-s*m)+_*(a*f-s*d),t[6]=-(r*(h*p-u*m)-i*(a*p-s*m)+_*(a*u-s*h)),t[7]=r*(h*f-u*d)-i*(a*f-s*d)+l*(a*u-s*h),t[8]=i*(c*p-f*g)-l*(o*p-u*g)+_*(o*f-u*c),t[9]=-(r*(c*p-f*g)-l*(n*p-s*g)+_*(n*f-s*c)),t[10]=r*(o*p-u*g)-i*(n*p-s*g)+_*(n*u-s*o),t[11]=-(r*(o*f-u*c)-i*(n*f-s*c)+l*(n*u-s*o)),t[12]=-(i*(c*m-d*g)-l*(o*m-h*g)+_*(o*d-h*c)),t[13]=r*(c*m-d*g)-l*(n*m-a*g)+_*(n*d-a*c),t[14]=-(r*(o*m-h*g)-i*(n*m-a*g)+_*(n*h-a*o)),t[15]=r*(o*d-h*c)-i*(n*d-a*c)+l*(n*h-a*o),t}function ae(t){var e=t[0],r=t[1],n=t[2],a=t[3],s=t[4],i=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],d=t[11],f=t[12],_=t[13],g=t[14],m=t[15];return(e*i-r*s)*(c*m-d*g)-(e*o-n*s)*(l*m-d*_)+(e*h-a*s)*(l*g-c*_)+(r*o-n*i)*(u*m-d*f)-(r*h-a*i)*(u*g-c*f)+(n*h-a*o)*(u*_-l*f)}function se(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],f=e[10],_=e[11],g=e[12],m=e[13],p=e[14],M=e[15],v=r[0],b=r[1],x=r[2],E=r[3];return t[0]=v*n+b*o+x*c+E*g,t[1]=v*a+b*h+x*d+E*m,t[2]=v*s+b*u+x*f+E*p,t[3]=v*i+b*l+x*_+E*M,v=r[4],b=r[5],x=r[6],E=r[7],t[4]=v*n+b*o+x*c+E*g,t[5]=v*a+b*h+x*d+E*m,t[6]=v*s+b*u+x*f+E*p,t[7]=v*i+b*l+x*_+E*M,v=r[8],b=r[9],x=r[10],E=r[11],t[8]=v*n+b*o+x*c+E*g,t[9]=v*a+b*h+x*d+E*m,t[10]=v*s+b*u+x*f+E*p,t[11]=v*i+b*l+x*_+E*M,v=r[12],b=r[13],x=r[14],E=r[15],t[12]=v*n+b*o+x*c+E*g,t[13]=v*a+b*h+x*d+E*m,t[14]=v*s+b*u+x*f+E*p,t[15]=v*i+b*l+x*_+E*M,t}function ie(t,e,r){var n,a,s,i,o,h,u,l,c,d,f,_,g=r[0],m=r[1],p=r[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*p+e[12],t[13]=e[1]*g+e[5]*m+e[9]*p+e[13],t[14]=e[2]*g+e[6]*m+e[10]*p+e[14],t[15]=e[3]*g+e[7]*m+e[11]*p+e[15]):(n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=e[8],d=e[9],f=e[10],_=e[11],t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=d,t[10]=f,t[11]=_,t[12]=n*g+o*m+c*p+e[12],t[13]=a*g+h*m+d*p+e[13],t[14]=s*g+u*m+f*p+e[14],t[15]=i*g+l*m+_*p+e[15]),t}function oe(t,e,r){var n=r[0],a=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,r,n){var a,s,i,o,h,u,l,c,d,_,g,m,p,M,v,b,x,E,y,A,w,R,T,C,O=n[0],L=n[1],S=n[2],P=Math.hypot(O,L,S);return P<f?null:(O*=P=1/P,L*=P,S*=P,a=Math.sin(r),i=1-(s=Math.cos(r)),o=e[0],h=e[1],u=e[2],l=e[3],c=e[4],d=e[5],_=e[6],g=e[7],m=e[8],p=e[9],M=e[10],v=e[11],b=O*O*i+s,x=L*O*i+S*a,E=S*O*i-L*a,y=O*L*i-S*a,A=L*L*i+s,w=S*L*i+O*a,R=O*S*i+L*a,T=L*S*i-O*a,C=S*S*i+s,t[0]=o*b+c*x+m*E,t[1]=h*b+d*x+p*E,t[2]=u*b+_*x+M*E,t[3]=l*b+g*x+v*E,t[4]=o*y+c*A+m*w,t[5]=h*y+d*A+p*w,t[6]=u*y+_*A+M*w,t[7]=l*y+g*A+v*w,t[8]=o*R+c*T+m*C,t[9]=h*R+d*T+p*C,t[10]=u*R+_*T+M*C,t[11]=l*R+g*T+v*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ue(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[4],i=e[5],o=e[6],h=e[7],u=e[8],l=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*a+u*n,t[5]=i*a+l*n,t[6]=o*a+c*n,t[7]=h*a+d*n,t[8]=u*a-s*n,t[9]=l*a-i*n,t[10]=c*a-o*n,t[11]=d*a-h*n,t}function le(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[0],i=e[1],o=e[2],h=e[3],u=e[8],l=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a-u*n,t[1]=i*a-l*n,t[2]=o*a-c*n,t[3]=h*a-d*n,t[8]=s*n+u*a,t[9]=i*n+l*a,t[10]=o*n+c*a,t[11]=h*n+d*a,t}function ce(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[0],i=e[1],o=e[2],h=e[3],u=e[4],l=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a+u*n,t[1]=i*a+l*n,t[2]=o*a+c*n,t[3]=h*a+d*n,t[4]=u*a-s*n,t[5]=l*a-i*n,t[6]=c*a-o*n,t[7]=d*a-h*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function fe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e,r){var n,a,s,i=r[0],o=r[1],h=r[2],u=Math.hypot(i,o,h);return u<f?null:(i*=u=1/u,o*=u,h*=u,n=Math.sin(e),s=1-(a=Math.cos(e)),t[0]=i*i*s+a,t[1]=o*i*s+h*n,t[2]=h*i*s-o*n,t[3]=0,t[4]=i*o*s-h*n,t[5]=o*o*s+a,t[6]=h*o*s+i*n,t[7]=0,t[8]=i*h*s+o*n,t[9]=o*h*s-i*n,t[10]=h*h*s+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ge(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=n+n,h=a+a,u=s+s,l=n*o,c=n*h,d=n*u,f=a*h,_=a*u,g=s*u,m=i*o,p=i*h,M=i*u;return t[0]=1-(f+g),t[1]=c+M,t[2]=d-p,t[3]=0,t[4]=c-M,t[5]=1-(l+g),t[6]=_+m,t[7]=0,t[8]=d+p,t[9]=_-m,t[10]=1-(l+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ve(t,e){var r=new _(3),n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=n*n+a*a+s*s+i*i;return c>0?(r[0]=2*(o*i+l*n+h*s-u*a)/c,r[1]=2*(h*i+l*a+u*n-o*s)/c,r[2]=2*(u*i+l*s+o*a-h*n)/c):(r[0]=2*(o*i+l*n+h*s-u*a),r[1]=2*(h*i+l*a+u*n-o*s),r[2]=2*(u*i+l*s+o*a-h*n)),Me(t,e,r),t}function be(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xe(t,e){var r=e[0],n=e[1],a=e[2],s=e[4],i=e[5],o=e[6],h=e[8],u=e[9],l=e[10];return t[0]=Math.hypot(r,n,a),t[1]=Math.hypot(s,i,o),t[2]=Math.hypot(h,u,l),t}function Ee(t,e){var r=new _(3);xe(r,e);var n=1/r[0],a=1/r[1],s=1/r[2],i=e[0]*n,o=e[1]*a,h=e[2]*s,u=e[4]*n,l=e[5]*a,c=e[6]*s,d=e[8]*n,f=e[9]*a,g=e[10]*s,m=i+l+g,p=0;return m>0?(p=2*Math.sqrt(m+1),t[3]=.25*p,t[0]=(c-f)/p,t[1]=(d-h)/p,t[2]=(o-u)/p):i>l&&i>g?(p=2*Math.sqrt(1+i-l-g),t[3]=(c-f)/p,t[0]=.25*p,t[1]=(o+u)/p,t[2]=(d+h)/p):l>g?(p=2*Math.sqrt(1+l-i-g),t[3]=(d-h)/p,t[0]=(o+u)/p,t[1]=.25*p,t[2]=(c+f)/p):(p=2*Math.sqrt(1+g-i-l),t[3]=(o-u)/p,t[0]=(d+h)/p,t[1]=(c+f)/p,t[2]=.25*p),t}function ye(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=e[3],h=a+a,u=s+s,l=i+i,c=a*h,d=a*u,f=a*l,_=s*u,g=s*l,m=i*l,p=o*h,M=o*u,v=o*l,b=n[0],x=n[1],E=n[2];return t[0]=(1-(_+m))*b,t[1]=(d+v)*b,t[2]=(f-M)*b,t[3]=0,t[4]=(d-v)*x,t[5]=(1-(c+m))*x,t[6]=(g+p)*x,t[7]=0,t[8]=(f+M)*E,t[9]=(g-p)*E,t[10]=(1-(c+_))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,a){var s=e[0],i=e[1],o=e[2],h=e[3],u=s+s,l=i+i,c=o+o,d=s*u,f=s*l,_=s*c,g=i*l,m=i*c,p=o*c,M=h*u,v=h*l,b=h*c,x=n[0],E=n[1],y=n[2],A=a[0],w=a[1],R=a[2],T=(1-(g+p))*x,C=(f+b)*x,O=(_-v)*x,L=(f-b)*E,S=(1-(d+p))*E,P=(m+M)*E,D=(_+v)*y,I=(m-M)*y,F=(1-(d+g))*y;return t[0]=T,t[1]=C,t[2]=O,t[3]=0,t[4]=L,t[5]=S,t[6]=P,t[7]=0,t[8]=D,t[9]=I,t[10]=F,t[11]=0,t[12]=r[0]+A-(T*A+L*w+D*R),t[13]=r[1]+w-(C*A+S*w+I*R),t[14]=r[2]+R-(O*A+P*w+F*R),t[15]=1,t}function we(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r+r,o=n+n,h=a+a,u=r*i,l=n*i,c=n*o,d=a*i,f=a*o,_=a*h,g=s*i,m=s*o,p=s*h;return t[0]=1-c-_,t[1]=l+p,t[2]=d-m,t[3]=0,t[4]=l-p,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Re(t,e,r,n,a,s,i){var o=1/(r-e),h=1/(a-n),u=1/(s-i);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*h,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(a+n)*h,t[10]=(i+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*s*2*u,t[15]=0,t}function Te(t,e,r,n,a){var s,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(s=1/(n-a),t[10]=(a+n)*s,t[14]=2*a*n*s):(t[10]=-1,t[14]=-2*n),t}function Ce(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),h=2/(i+o),u=2/(a+s);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(i-o)*h*.5,t[9]=(a-s)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Oe(t,e,r,n,a,s,i){var o=1/(e-r),h=1/(n-a),u=1/(s-i);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(a+n)*h,t[14]=(i+s)*u,t[15]=1,t}function Le(t,e,r,n){var a,s,i,o,h,u,l,c,d,_,g=e[0],m=e[1],p=e[2],M=n[0],v=n[1],b=n[2],x=r[0],E=r[1],y=r[2];return Math.abs(g-x)<f&&Math.abs(m-E)<f&&Math.abs(p-y)<f?te(t):(l=g-x,c=m-E,d=p-y,a=v*(d*=_=1/Math.hypot(l,c,d))-b*(c*=_),s=b*(l*=_)-M*d,i=M*c-v*l,(_=Math.hypot(a,s,i))?(a*=_=1/_,s*=_,i*=_):(a=0,s=0,i=0),o=c*i-d*s,h=d*a-l*i,u=l*s-c*a,(_=Math.hypot(o,h,u))?(o*=_=1/_,h*=_,u*=_):(o=0,h=0,u=0),t[0]=a,t[1]=o,t[2]=l,t[3]=0,t[4]=s,t[5]=h,t[6]=c,t[7]=0,t[8]=i,t[9]=u,t[10]=d,t[11]=0,t[12]=-(a*g+s*m+i*p),t[13]=-(o*g+h*m+u*p),t[14]=-(l*g+c*m+d*p),t[15]=1,t)}function Se(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=n[0],h=n[1],u=n[2],l=a-r[0],c=s-r[1],d=i-r[2],f=l*l+c*c+d*d;f>0&&(l*=f=1/Math.sqrt(f),c*=f,d*=f);var _=h*d-u*c,g=u*l-o*d,m=o*c-h*l;return(f=_*_+g*g+m*m)>0&&(_*=f=1/Math.sqrt(f),g*=f,m*=f),t[0]=_,t[1]=g,t[2]=m,t[3]=0,t[4]=c*m-d*g,t[5]=d*_-l*m,t[6]=l*g-c*_,t[7]=0,t[8]=l,t[9]=c,t[10]=d,t[11]=0,t[12]=a,t[13]=s,t[14]=i,t[15]=1,t}function Pe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ie(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Fe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ne(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ue(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function je(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],h=t[6],u=t[7],l=t[8],c=t[9],d=t[10],_=t[11],g=t[12],m=t[13],p=t[14],M=t[15],v=e[0],b=e[1],x=e[2],E=e[3],y=e[4],A=e[5],w=e[6],R=e[7],T=e[8],C=e[9],O=e[10],L=e[11],S=e[12],P=e[13],D=e[14],I=e[15];return Math.abs(r-v)<=f*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=f*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-x)<=f*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-E)<=f*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(i-y)<=f*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-A)<=f*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(h-w)<=f*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(u-R)<=f*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(l-T)<=f*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-C)<=f*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(d-O)<=f*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(_-L)<=f*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(g-S)<=f*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(m-P)<=f*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(p-D)<=f*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(M-I)<=f*Math.max(1,Math.abs(M),Math.abs(I))}var Ye=se,Ve=Fe;function Xe(){var t=new _(3);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qe(t){var e=new _(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ge(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function ke(t,e,r){var n=new _(3);return n[0]=t,n[1]=e,n[2]=r,n}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Qe(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function He(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Ze(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function ze(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ke(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ar(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function sr(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.hypot(r,n,a)}function ir(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function or(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ur(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function lr(t,e){var r=e[0],n=e[1],a=e[2],s=r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function cr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dr(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[0],o=r[1],h=r[2];return t[0]=a*h-s*o,t[1]=s*i-n*h,t[2]=n*o-a*i,t}function fr(t,e,r,n){var a=e[0],s=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t[2]=i+n*(r[2]-i),t}function _r(t,e,r,n,a,s){var i=s*s,o=i*(2*s-3)+1,h=i*(s-2)+s,u=i*(s-1),l=i*(3-2*s);return t[0]=e[0]*o+r[0]*h+n[0]*u+a[0]*l,t[1]=e[1]*o+r[1]*h+n[1]*u+a[1]*l,t[2]=e[2]*o+r[2]*h+n[2]*u+a[2]*l,t}function gr(t,e,r,n,a,s){var i=1-s,o=i*i,h=s*s,u=o*i,l=3*s*o,c=3*h*i,d=h*s;return t[0]=e[0]*u+r[0]*l+n[0]*c+a[0]*d,t[1]=e[1]*u+r[1]*l+n[1]*c+a[1]*d,t[2]=e[2]*u+r[2]*l+n[2]*c+a[2]*d,t}function mr(t,e){e=e||1;var r=2*g()*Math.PI,n=2*g()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t}function pr(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[3]*n+r[7]*a+r[11]*s+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*s+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*s+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*s+r[14])/i,t}function Mr(t,e,r){var n=e[0],a=e[1],s=e[2];return t[0]=n*r[0]+a*r[3]+s*r[6],t[1]=n*r[1]+a*r[4]+s*r[7],t[2]=n*r[2]+a*r[5]+s*r[8],t}function vr(t,e,r){var n=r[0],a=r[1],s=r[2],i=r[3],o=e[0],h=e[1],u=e[2],l=a*u-s*h,c=s*o-n*u,d=n*h-a*o,f=a*d-s*c,_=s*l-n*d,g=n*c-a*l,m=2*i;return l*=m,c*=m,d*=m,f*=2,_*=2,g*=2,t[0]=o+l+f,t[1]=h+c+_,t[2]=u+d+g,t}function br(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function xr(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Er(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function yr(t,e){var r=t[0],n=t[1],a=t[2],s=e[0],i=e[1],o=e[2],h=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(s*s+i*i+o*o),u=h&&cr(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function Ar(t){return t[0]=0,t[1]=0,t[2]=0,t}function wr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Tr(t,e){var r=t[0],n=t[1],a=t[2],s=e[0],i=e[1],o=e[2];return Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=f*Math.max(1,Math.abs(a),Math.abs(o))}var Cr,Or=Ze,Lr=ze,Sr=Ke,Pr=sr,Dr=ir,Ir=Ge,Fr=or,Nr=(Cr=Xe(),function(t,e,r,n,a,s){var i,o;for(e||(e=3),r||(r=0),o=n?Math.min(n*e+r,t.length):t.length,i=r;i<o;i+=e)Cr[0]=t[i],Cr[1]=t[i+1],Cr[2]=t[i+2],a(Cr,Cr,s),t[i]=Cr[0],t[i+1]=Cr[1],t[i+2]=Cr[2];return t});function Ur(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Br(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jr(t,e,r,n){var a=new _(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function Yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Vr(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function Xr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function qr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Gr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function kr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Wr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Qr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Hr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Zr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function zr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Kr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Jr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function $r(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return Math.hypot(r,n,a,s)}function tn(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+a*a+s*s}function en(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.hypot(e,r,n,a)}function rn(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function nn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function an(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*r+n*n+a*a+s*s;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=s*i,t}function on(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hn(t,e,r,n){var a=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],o=r[1]*n[2]-r[2]*n[1],h=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],l=e[0],c=e[1],d=e[2],f=e[3];return t[0]=c*u-d*h+f*o,t[1]=-l*u+d*i-f*s,t[2]=l*h-c*i+f*a,t[3]=-l*o+c*s-d*a,t}function un(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=e[3];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t[2]=i+n*(r[2]-i),t[3]=o+n*(r[3]-o),t}function ln(t,e){var r,n,a,s,i,o;e=e||1;do{i=(r=2*g()-1)*r+(n=2*g()-1)*n}while(i>=1);do{o=(a=2*g()-1)*a+(s=2*g()-1)*s}while(o>=1);var h=Math.sqrt((1-i)/o);return t[0]=e*r,t[1]=e*n,t[2]=e*a*h,t[3]=e*s*h,t}function cn(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*s+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*s+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*s+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*s+r[15]*i,t}function dn(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[0],o=r[1],h=r[2],u=r[3],l=u*n+o*s-h*a,c=u*a+h*n-i*s,d=u*s+i*a-o*n,f=-i*n-o*a-h*s;return t[0]=l*u+f*-i+c*-h-d*-o,t[1]=c*u+f*-o+d*-i-l*-h,t[2]=d*u+f*-h+l*-o-c*-i,t[3]=e[3],t}function fn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _n(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mn(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=e[0],o=e[1],h=e[2],u=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-u)<=f*Math.max(1,Math.abs(s),Math.abs(u))}var pn=qr,Mn=Gr,vn=kr,bn=$r,xn=tn,En=en,yn=rn,An=function(){var t=Ur();return function(e,r,n,a,s,i){var o,h;for(r||(r=4),n||(n=0),h=a?Math.min(a*r+n,e.length):e.length,o=n;o<h;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,i),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function wn(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Rn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Tn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Cn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>f?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function On(t,e){var r=aa(t,e);return Math.acos(2*r*r-1)}function Ln(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*l+i*o+a*u-s*h,t[1]=a*l+i*h+s*o-n*u,t[2]=s*l+i*u+n*h-a*o,t[3]=i*l-n*o-a*h-s*u,t}function Sn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+i*o,t[1]=a*h+s*o,t[2]=s*h-a*o,t[3]=i*h-n*o,t}function Pn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h-s*o,t[1]=a*h+i*o,t[2]=s*h+n*o,t[3]=i*h-a*o,t}function Dn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),h=Math.cos(r);return t[0]=n*h+a*o,t[1]=a*h-n*o,t[2]=s*h+i*o,t[3]=i*h-s*o,t}function In(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t}function Fn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=Math.sqrt(r*r+n*n+a*a),o=Math.exp(s),h=i>0?o*Math.sin(i)/i:0;return t[0]=r*h,t[1]=n*h,t[2]=a*h,t[3]=o*Math.cos(i),t}function Nn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=Math.sqrt(r*r+n*n+a*a),o=i>0?Math.atan2(i,s)/i:0;return t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=.5*Math.log(r*r+n*n+a*a+s*s),t}function Un(t,e,r){return Nn(t,e),na(t,t,r),Fn(t,t),t}function Bn(t,e,r,n){var a,s,i,o,h,u=e[0],l=e[1],c=e[2],d=e[3],_=r[0],g=r[1],m=r[2],p=r[3];return(s=u*_+l*g+c*m+d*p)<0&&(s=-s,_=-_,g=-g,m=-m,p=-p),1-s>f?(a=Math.acos(s),i=Math.sin(a),o=Math.sin((1-n)*a)/i,h=Math.sin(n*a)/i):(o=1-n,h=n),t[0]=o*u+h*_,t[1]=o*l+h*g,t[2]=o*c+h*m,t[3]=o*d+h*p,t}function jn(t){var e=g(),r=g(),n=g(),a=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=s*Math.sin(2*Math.PI*n),t[3]=s*Math.cos(2*Math.PI*n),t}function Yn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*r+n*n+a*a+s*s,o=i?1/i:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-a*o,t[3]=s*o,t}function Vn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Xn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var s=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*s+s]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*s+i]-e[3*i+s])*r,t[s]=(e[3*s+a]+e[3*a+s])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}function qn(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var s=Math.sin(e),i=Math.cos(e),o=Math.sin(r),h=Math.cos(r),u=Math.sin(n),l=Math.cos(n);return t[0]=s*h*l-i*o*u,t[1]=i*o*l+s*h*u,t[2]=i*h*u-s*o*l,t[3]=i*h*l+s*o*u,t}function Gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var kn,Wn,Qn,Hn,Zn,zn,Kn=Br,Jn=jr,$n=Yr,ta=Vr,ea=Xr,ra=Ln,na=Kr,aa=on,sa=un,ia=en,oa=ia,ha=rn,ua=ha,la=sn,ca=gn,da=mn,fa=(kn=Xe(),Wn=ke(1,0,0),Qn=ke(0,1,0),function(t,e,r){var n=cr(e,r);return n<-.999999?(dr(kn,Wn,e),Ir(kn)<1e-6&&dr(kn,Qn,e),lr(kn,kn),Tn(t,kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dr(kn,e,r),t[0]=kn[0],t[1]=kn[1],t[2]=kn[2],t[3]=1+n,la(t,t))}),_a=(Hn=wn(),Zn=wn(),function(t,e,r,n,a,s){return Bn(Hn,e,a,s),Bn(Zn,r,n,s),Bn(t,Hn,Zn,2*s*(1-s)),t}),ga=(zn=pt(),function(t,e,r,n){return zn[0]=r[0],zn[3]=r[1],zn[6]=r[2],zn[1]=n[0],zn[4]=n[1],zn[7]=n[2],zn[2]=-e[0],zn[5]=-e[1],zn[8]=-e[2],la(t,Xn(t,zn))});function ma(){var t=new _(8);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function pa(t){var e=new _(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ma(t,e,r,n,a,s,i,o){var h=new _(8);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=a,h[5]=s,h[6]=i,h[7]=o,h}function va(t,e,r,n,a,s,i){var o=new _(8);o[0]=t,o[1]=e,o[2]=r,o[3]=n;var h=.5*a,u=.5*s,l=.5*i;return o[4]=h*n+u*r-l*e,o[5]=u*n+l*t-h*r,o[6]=l*n+h*e-u*t,o[7]=-h*t-u*e-l*r,o}function ba(t,e,r){var n=.5*r[0],a=.5*r[1],s=.5*r[2],i=e[0],o=e[1],h=e[2],u=e[3];return t[0]=i,t[1]=o,t[2]=h,t[3]=u,t[4]=n*u+a*h-s*o,t[5]=a*u+s*i-n*h,t[6]=s*u+n*o-a*i,t[7]=-n*i-a*o-s*h,t}function xa(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ea(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ya(t,e){var r=wn();Ee(r,e);var n=new _(3);return be(n,e),ba(t,r,n),t}function Aa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function wa(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ra(t,e,r,n,a,s,i,o,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=h,t}var Ta=$n;function Ca(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Oa=$n;function La(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Sa(t,e){var r=e[4],n=e[5],a=e[6],s=e[7],i=-e[0],o=-e[1],h=-e[2],u=e[3];return t[0]=2*(r*u+s*i+n*h-a*o),t[1]=2*(n*u+s*o+a*i-r*h),t[2]=2*(a*u+s*h+r*o-n*i),t}function Pa(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=.5*r[0],h=.5*r[1],u=.5*r[2],l=e[4],c=e[5],d=e[6],f=e[7];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=i*o+a*u-s*h+l,t[5]=i*h+s*o-n*u+c,t[6]=i*u+n*h-a*o+d,t[7]=-n*o-a*h-s*u+f,t}function Da(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*i+l*n+h*s-u*a,d=h*i+l*a+u*n-o*s,f=u*i+l*s+o*a-h*n,_=l*i-o*n-h*a-u*s;return Sn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=c*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-c*s,t[6]=f*i+_*s+c*a-d*n,t[7]=_*i-c*n-d*a-f*s,t}function Ia(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*i+l*n+h*s-u*a,d=h*i+l*a+u*n-o*s,f=u*i+l*s+o*a-h*n,_=l*i-o*n-h*a-u*s;return Pn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=c*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-c*s,t[6]=f*i+_*s+c*a-d*n,t[7]=_*i-c*n-d*a-f*s,t}function Fa(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],h=e[5],u=e[6],l=e[7],c=o*i+l*n+h*s-u*a,d=h*i+l*a+u*n-o*s,f=u*i+l*s+o*a-h*n,_=l*i-o*n-h*a-u*s;return Dn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=c*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-c*s,t[6]=f*i+_*s+c*a-d*n,t[7]=_*i-c*n-d*a-f*s,t}function Na(t,e,r){var n=r[0],a=r[1],s=r[2],i=r[3],o=e[0],h=e[1],u=e[2],l=e[3];return t[0]=o*i+l*n+h*s-u*a,t[1]=h*i+l*a+u*n-o*s,t[2]=u*i+l*s+o*a-h*n,t[3]=l*i-o*n-h*a-u*s,o=e[4],h=e[5],u=e[6],l=e[7],t[4]=o*i+l*n+h*s-u*a,t[5]=h*i+l*a+u*n-o*s,t[6]=u*i+l*s+o*a-h*n,t[7]=l*i-o*n-h*a-u*s,t}function Ua(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],h=r[1],u=r[2],l=r[3];return t[0]=n*l+i*o+a*u-s*h,t[1]=a*l+i*h+s*o-n*u,t[2]=s*l+i*u+n*h-a*o,t[3]=i*l-n*o-a*h-s*u,o=r[4],h=r[5],u=r[6],l=r[7],t[4]=n*l+i*o+a*u-s*h,t[5]=a*l+i*h+s*o-n*u,t[6]=s*l+i*u+n*h-a*o,t[7]=i*l-n*o-a*h-s*u,t}function Ba(t,e,r,n){if(Math.abs(n)<f)return Aa(t,e);var a=Math.hypot(r[0],r[1],r[2]);n*=.5;var s=Math.sin(n),i=s*r[0]/a,o=s*r[1]/a,h=s*r[2]/a,u=Math.cos(n),l=e[0],c=e[1],d=e[2],_=e[3];t[0]=l*u+_*i+c*h-d*o,t[1]=c*u+_*o+d*i-l*h,t[2]=d*u+_*h+l*o-c*i,t[3]=_*u-l*i-c*o-d*h;var g=e[4],m=e[5],p=e[6],M=e[7];return t[4]=g*u+M*i+m*h-p*o,t[5]=m*u+M*o+p*i-g*h,t[6]=p*u+M*h+g*o-m*i,t[7]=M*u-g*i-m*o-p*h,t}function ja(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Ya(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[4],h=r[5],u=r[6],l=r[7],c=e[4],d=e[5],f=e[6],_=e[7],g=r[0],m=r[1],p=r[2],M=r[3];return t[0]=n*M+i*g+a*p-s*m,t[1]=a*M+i*m+s*g-n*p,t[2]=s*M+i*p+n*m-a*g,t[3]=i*M-n*g-a*m-s*p,t[4]=n*l+i*o+a*u-s*h+c*M+_*g+d*p-f*m,t[5]=a*l+i*h+s*o-n*u+d*M+_*m+f*g-c*p,t[6]=s*l+i*u+n*h-a*o+f*M+_*p+c*m-d*g,t[7]=i*l-n*o-a*h-s*u+_*M-c*g-d*m-f*p,t}var Va=Ya;function Xa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var qa=aa;function Ga(t,e,r,n){var a=1-n;return qa(e,r)<0&&(n=-n),t[0]=e[0]*a+r[0]*n,t[1]=e[1]*a+r[1]*n,t[2]=e[2]*a+r[2]*n,t[3]=e[3]*a+r[3]*n,t[4]=e[4]*a+r[4]*n,t[5]=e[5]*a+r[5]*n,t[6]=e[6]*a+r[6]*n,t[7]=e[7]*a+r[7]*n,t}function ka(t,e){var r=Za(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Wa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Qa=ia,Ha=Qa,Za=ha,za=Za;function Ka(t,e){var r=Za(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,a=e[1]/r,s=e[2]/r,i=e[3]/r,o=e[4],h=e[5],u=e[6],l=e[7],c=n*o+a*h+s*u+i*l;t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=(o-n*c)/r,t[5]=(h-a*c)/r,t[6]=(u-s*c)/r,t[7]=(l-i*c)/r}return t}function Ja(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $a(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ts(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],h=t[6],u=t[7],l=e[0],c=e[1],d=e[2],_=e[3],g=e[4],m=e[5],p=e[6],M=e[7];return Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-_)<=f*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(i-g)<=f*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(o-m)<=f*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(h-p)<=f*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(u-M)<=f*Math.max(1,Math.abs(u),Math.abs(M))}function es(){var t=new _(2);return _!=Float32Array&&(t[0]=0,t[1]=0),t}function rs(t){var e=new _(2);return e[0]=t[0],e[1]=t[1],e}function ns(t,e){var r=new _(2);return r[0]=t,r[1]=e,r}function as(t,e){return t[0]=e[0],t[1]=e[1],t}function ss(t,e,r){return t[0]=e,t[1]=r,t}function is(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function os(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function hs(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function us(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function ls(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function cs(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ds(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function fs(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function _s(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gs(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function ms(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function ps(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function Ms(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function vs(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function bs(t){var e=t[0],r=t[1];return e*e+r*r}function xs(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Es(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ys(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function As(t,e){return t[0]*e[0]+t[1]*e[1]}function ws(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Rs(t,e,r,n){var a=e[0],s=e[1];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t}function Ts(t,e){e=e||1;var r=2*g()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Cs(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t}function Os(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t}function Ls(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function Ss(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t}function Ps(t,e,r,n){var a=e[0]-r[0],s=e[1]-r[1],i=Math.sin(n),o=Math.cos(n);return t[0]=a*o-s*i+r[0],t[1]=a*i+s*o+r[1],t}function Ds(t,e){var r=t[0],n=t[1],a=e[0],s=e[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+s*s),o=i&&(r*a+n*s)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function Is(t){return t[0]=0,t[1]=0,t}function Fs(t){return"vec2("+t[0]+", "+t[1]+")"}function Ns(t,e){return t[0]===e[0]&&t[1]===e[1]}function Us(t,e){var r=t[0],n=t[1],a=e[0],s=e[1];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))}var Bs=vs,js=os,Ys=hs,Vs=us,Xs=ps,qs=Ms,Gs=bs,ks=function(){var t=es();return function(e,r,n,a,s,i){var o,h;for(r||(r=2),n||(n=0),h=a?Math.min(a*r+n,e.length):e.length,o=n;o<h;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,i),e[o]=t[0],e[o+1]=t[1];return e}}()}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(5590)})();
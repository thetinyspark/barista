(()=>{"use strict";var t={570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BLOB_TYPE=e.JSON_TYPE=e.SOUND_TYPE=e.VIDEO_TYPE=e.IMAGE_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=void 0;const n=r(4919);class a extends n.Emitter{constructor(){super(),this.uris=new Map,this._errorHandler=t=>{this.emit(e.LOAD_ERROR,t)},this.data=new Map,this.list=[]}getAll(){return this.data}queue(t,r=e.JSON_TYPE,n){this.list.push({uri:t,type:r,alias:n})}getQueue(){return this.list}freeQueue(){this.list=[]}loadQueue(){return Promise.all(this.list.map((t=>this.load(t.uri,t.type,t.alias)))).then((t=>(this.freeQueue(),t)))}getUris(){const t={};return this.uris.forEach(((e,r)=>{t[r]=e})),t}getUri(t){return this.uris.get(t)}get(t){return this.data.get(t)}load(t,r=e.JSON_TYPE,n){return this._loadBlob(t).then((t=>{switch(r){case e.IMAGE_TYPE:return a.blobToImage(t).catch(this._errorHandler);case e.JSON_TYPE:return a.blobToJSON(t).catch(this._errorHandler);case e.VIDEO_TYPE:return a.blobToVideo(t).catch(this._errorHandler);case e.SOUND_TYPE:return a.blobToSound(t).catch(this._errorHandler);default:return t}})).then((r=>(this.set(r,n,t),this.emit(e.LOAD_SUCCESS,r),r)))}set(t,e,r=""){this.uris.set(e,r),this.data.set(e,t)}delete(t){return this.getAll().delete(t)}destroy(){this.getAll().clear()}_loadBlob(t){return fetch(t).then((t=>{if(200===t.status)return t.blob();this._errorHandler(t.statusText)})).catch(this._errorHandler)}static blobToSound(t){return new Promise(((e,r)=>{const n=document.createElement("audio"),a=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),e(n)},i=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),r("unable to load audio from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",i),n.src=a,n.load()}))}static blobToJSON(t){return new Promise((e=>{const r=new FileReader;r.addEventListener("load",(()=>{e(JSON.parse(r.result.toString()))})),r.readAsText(t,"utf8")}))}static blobToImage(t){return new Promise(((e,r)=>{const n=new Image,a=t=>{n.removeEventListener("load",s),n.removeEventListener("error",a),r("unable to load image from source")},s=t=>{n.removeEventListener("load",s),n.removeEventListener("error",a),e(n)};n.addEventListener("load",s),n.addEventListener("error",a);const i=URL.createObjectURL(t);n.src=i}))}static blobToVideo(t){return new Promise(((e,r)=>{const n=document.createElement("video"),a=URL.createObjectURL(t),s=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),e(n)},i=t=>{n.removeEventListener("loadeddata",s),n.removeEventListener("error",i),r("unable to load video from source")};n.addEventListener("loadeddata",s),n.addEventListener("error",i),n.src=a,n.load()}))}}e.default=a,e.LOAD_ERROR="LOAD_ERROR",e.LOAD_SUCCESS="LOAD_SUCCESS",e.IMAGE_TYPE="IMAGE_TYPE",e.VIDEO_TYPE="VIDEO_TYPE",e.SOUND_TYPE="SOUND_TYPE",e.JSON_TYPE="JSON_TYPE",e.BLOB_TYPE="BLOB_TYPE"},5983:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VIDEO_TYPE=e.SOUND_TYPE=e.LOAD_SUCCESS=e.LOAD_ERROR=e.JSON_TYPE=e.IMAGE_TYPE=e.BLOB_TYPE=e.AssetsManager=void 0;const n=r(570);e.AssetsManager=n.default,Object.defineProperty(e,"BLOB_TYPE",{enumerable:!0,get:function(){return n.BLOB_TYPE}}),Object.defineProperty(e,"IMAGE_TYPE",{enumerable:!0,get:function(){return n.IMAGE_TYPE}}),Object.defineProperty(e,"JSON_TYPE",{enumerable:!0,get:function(){return n.JSON_TYPE}}),Object.defineProperty(e,"LOAD_ERROR",{enumerable:!0,get:function(){return n.LOAD_ERROR}}),Object.defineProperty(e,"LOAD_SUCCESS",{enumerable:!0,get:function(){return n.LOAD_SUCCESS}}),Object.defineProperty(e,"SOUND_TYPE",{enumerable:!0,get:function(){return n.SOUND_TYPE}}),Object.defineProperty(e,"VIDEO_TYPE",{enumerable:!0,get:function(){return n.VIDEO_TYPE}})},6033:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=void 0;const n=r(4919);class a extends n.Emitter{constructor(){super(...arguments),this._touches=[],this._pressed=[]}setTouches(t){this._touches=t}getTouches(){return this._touches}getTouchByKey(t){return this.getTouches().find((e=>e.key===t))||null}getTouchByValue(t){return this.getTouches().find((e=>e.value===t))||null}getPressedTouches(){return this._pressed}press(t,e=0){t.press(e),this._pressed.includes(t)||(this._pressed.push(t),this.emit(s.PRESS_KEY,t))}release(t,e=0){if(this._pressed.indexOf(t)>-1){this._pressed.splice(this._pressed.indexOf(t),1);const r=t.release(e);return this.emit(s.PRESS_KEY,t),r}return t.getElapsedTime()}}var s;e.default=a,function(t){t.PRESS_KEY="PRESS_KEY",t.RELEASE_KEY="RELEASE_KEY"}(s=e.GamePadTouchEvent||(e.GamePadTouchEvent={}))},5504:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="",e=""){this._pressing=!1,this._timestamp=0,this.value=e,this.key=t}get pressing(){return this._pressing}getElapsedTime(t=0){return this.pressing?t-this._timestamp:0}release(t=0){const e=this.getElapsedTime(t);return this._pressing=!1,e}press(t=0){this._pressing=!0,this._timestamp=t}}},4630:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MouseControlEvent=void 0;const n=r(2843),a=r(2727);var s;e.default=class{constructor(t){this._touchHandler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=0==t.touches.length?t.changedTouches[0].clientX:t.touches[0].clientX,n=0==t.touches.length?t.changedTouches[0].clientY:t.touches[0].clientY,a=r-e.x>>0,i=n-e.y>>0;switch(t.preventDefault(),t.type){case"touchstart":this.dispatchAt(a,i,s.MOUSE_CONTROL_DOWN);break;case"touchend":this.dispatchAt(a,i,s.MOUSE_CONTROL_UP);break;case"touchmove":this.dispatchAt(a,i,s.MOUSE_CONTROL_MOVE)}},this._handler=t=>{const e=this._stage.getCanvas().getBoundingClientRect(),r=t.clientX-e.x>>0,n=t.clientY-e.y>>0;switch(t.type){case"click":this.dispatchAt(r,n,s.MOUSE_CONTROL_CLICK);break;case"mouseup":this.dispatchAt(r,n,s.MOUSE_CONTROL_UP);break;case"mousedown":this.dispatchAt(r,n,s.MOUSE_CONTROL_DOWN);break;case"mousemove":this.dispatchAt(r,n,s.MOUSE_CONTROL_MOVE)}},this._stage=t}activate(){this.deactivate(),this._stage.getCanvas().addEventListener("click",this._handler),this._stage.getCanvas().addEventListener("mouseup",this._handler),this._stage.getCanvas().addEventListener("mousedown",this._handler),this._stage.getCanvas().addEventListener("mousemove",this._handler),this._stage.getCanvas().addEventListener("touchstart",this._touchHandler),this._stage.getCanvas().addEventListener("touchend",this._touchHandler),this._stage.getCanvas().addEventListener("touchmove",this._touchHandler)}deactivate(){this._stage.getCanvas().removeEventListener("click",this._handler),this._stage.getCanvas().removeEventListener("mouseup",this._handler),this._stage.getCanvas().removeEventListener("mousedown",this._handler),this._stage.getCanvas().removeEventListener("mousemove",this._handler),this._stage.getCanvas().removeEventListener("touchstart",this._touchHandler),this._stage.getCanvas().removeEventListener("touchend",this._touchHandler),this._stage.getCanvas().removeEventListener("touchmove",this._touchHandler)}_getObjectUnderPointRecursive(t,e,r){const s=r.getChildren();let i=s.length;for(;--i>-1;){const r=s[i];if(a.isDisplayObjectContainer(r)){const n=this._getObjectUnderPointRecursive(t,e,r);if(null!==n)return n}else if(r.mouseEventsEnabled&&n.default.collide(t,e,r))return r}return null}dispatchAt(t,e,r){const n=this._getObjectUnderPointRecursive(t,e,this._stage),a=null===n?this._stage:n;let s=a;for(;null!==s;)s.emit(r,{x:t,y:e,target:a}),s=s.parent}},function(t){t.MOUSE_CONTROL_CLICK="MOUSE_CONTROL_CLICK",t.MOUSE_CONTROL_MOVE="MOUSE_CONTROL_MOVE",t.MOUSE_CONTROL_UP="MOUSE_CONTROL_UP",t.MOUSE_CONTROL_DOWN="MOUSE_CONTROL_DOWN"}(s=e.MouseControlEvent||(e.MouseControlEvent={}))},7392:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GamePadTouchEvent=e.GamePadTouch=e.GamePad=e.MouseControlEvent=e.MouseControl=void 0;const n=r(4630);e.MouseControl=n.default,Object.defineProperty(e,"MouseControlEvent",{enumerable:!0,get:function(){return n.MouseControlEvent}});const a=r(6033);e.GamePad=a.default,Object.defineProperty(e,"GamePadTouchEvent",{enumerable:!0,get:function(){return a.GamePadTouchEvent}});const s=r(5504);e.GamePadTouch=s.default},5165:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationEvent=void 0;const n=r(4870);class a extends n.default{constructor(){super(...arguments),this._framesTextures=[],this._currentFrameIndex=0,this._playing=!1,this._forwarding=!0,this.loop=!1}play(){this._playing=!0,this._forwarding=!0}rewind(){this._playing=!0,this._forwarding=!1}stop(){this._playing=!1}render(t){if(super.render(t),this._playing){const t=this._forwarding?1:-1;this.goToFrame(this._currentFrameIndex+t)}}clearFrames(){this._currentFrameIndex=0,this._framesTextures=[]}setFrameTexture(t,e){this._framesTextures[t]=e}getCurrentFrameTexture(){let t=this.getFrameTexture(this.getCurrentFrameIndex());return null===t&&this._forwarding?t=this.getPreviousDefinedFrameTexture(this.getCurrentFrameIndex()):null!==t||this._forwarding||(t=this.getNextDefinedFrameTexture(this.getCurrentFrameIndex())),t}getFrameTexture(t){return this._framesTextures[t]||null}getPreviousDefinedFrameTexture(t){let e=null;for(;null===e&&t>-1;)e=this.getFrameTexture(t--);return e}getNextDefinedFrameTexture(t){let e=null;for(;null===e&&t<=this.getLastFrameIndex();)e=this.getFrameTexture(t++);return e}removeFrameTexture(t){this._framesTextures[t]=null}getAnimationLength(){return this._framesTextures.length}getLastFrameIndex(){return this.getAnimationLength()-1}getCurrentFrameIndex(){return this._currentFrameIndex}goToFrame(t){t=this.loop?(t=t>this.getLastFrameIndex()?0:t)<0?this.getLastFrameIndex():t:(t=t>this.getLastFrameIndex()?this.getLastFrameIndex():t)<0?0:t,this._currentFrameIndex=t,this.texture=this.getCurrentFrameTexture(),this.emit(s.PLAY_FRAME,this._currentFrameIndex)}static createFromTexturesAndFrames(t){const e=new a;return t.forEach((t=>{e.setFrameTexture(t.frame,t.texture)})),e}}var s;e.default=a,function(t){t.PLAY_FRAME="PLAY_FRAME"}(s=e.AnimationEvent||(e.AnimationEvent={}))},528:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870),a=r(887),s=r(2843);class i extends n.default{constructor(){super()}getRevertWorldMatrix(){const t=a.mat2d.create();return a.mat2d.invert(t,this.worldMatrix),t}getBounds(){return s.default.getBoundingRect(this)}}e.default=i},4870:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),a=r(4919),s=r(2041),i=r(351);class o extends a.Emitter{constructor(){super(...arguments),this.filters=[],this.texture=null,this.worldMatrix=n.mat2d.create(),this.matrix=n.mat2d.create(),this.x=0,this.y=0,this.opacity=1,this.worldOpacity=1,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.transformOrigin={x:0,y:0},this.parent=null,this.visible=!0,this.name="",this.mouseEventsEnabled=!0}snapshot(){const t=new s.default,e=this.matrix,r=this.worldMatrix,a=t.getCanvas(),i=t.getContext();return n.mat2d.identity(this.matrix),n.mat2d.identity(this.worldMatrix),a.width=this.width,a.height=this.height,t.add(this),t.draw(a,i),this.matrix=e,this.worldMatrix=r,t.getCanvas()}update(t,e=1){i.Geometry.updateTransform(t,this),this.opacity>1&&(this.opacity=1),this.opacity<0&&(this.opacity=0),this.worldOpacity=e*this.opacity}render(t){this.visible&&t.add(this)}static createFromTexture(t){const e=new o;return e.width=t.sw,e.height=t.sh,e.texture=t,e}}e.default=o},5055:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(4870);class a extends n.default{constructor(){super(...arguments),this._children=[]}addChild(t){this.contains(t)&&this.removeChild(t),this._children.push(t),t.parent=this}removeChild(t){const e=this.getChildIndex(t);return this.removeChildAt(e)}addChildAt(t,e){this.contains(t)&&this.removeChild(t);const r=this._children.splice(0,e);t.parent=this,this._children=[...r,t,...this._children]}removeChildAt(t){const e=this._children[t]||null;if(null===e)throw new Error("out of bound index for removeChildAt");return this._children.splice(t,1),e.parent=null,e}getChildren(){return this._children}getAllNestedChildrenIterative(){let t=[],e=[];for(e.push(this);e.length>0;){const r=e.shift(),n=t.indexOf(r)+1,a=t.splice(n);for(let n=0;n<r._children.length;n++){const a=r._children[n];t.push(a),void 0!==a.getChildren&&e.push(a)}t=t.concat(a)}return t}getAllNestedChildren(t=[]){for(let e=0;e<this._children.length;e++){const r=this._children[e];t.push(r),void 0!==r.getChildren&&r.getAllNestedChildren(t)}return t}getChildIndex(t){return this._children.indexOf(t)}contains(t){return t.parent===this&&this.getChildIndex(t)>-1}removeChildren(){for(;this._children.length>0;)this.removeChildAt(0)}update(t,e){super.update(t,e),this._children.forEach((t=>{t.update(this.worldMatrix,this.worldOpacity)}))}render(t){super.render(t),this.visible&&this._children.forEach((e=>{e.render(t)}))}}e.default=a},7632:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StageEvent=void 0;const n=r(887),a=r(2041),s=r(5055);class i extends s.default{constructor(){super(),this._camera=null,this._currentFrame=0,this._renderer=new a.default,this._clippingStrategy=null,this.autoUpdateMatrices=!0}setCamera(t){this._camera=t}getCamera(){return this._camera}setClippingStrategy(t){this._clippingStrategy=t}getClippingStrategy(){return this._clippingStrategy}getRenderer(){return this._renderer}setRenderer(t){this._renderer=t}getCanvas(){return this._renderer.getCanvas()}getContext(){return this._renderer.getContext()}getCurrentFrame(){return this._currentFrame}nextFrame(){this._currentFrame++,this.emit(o.ENTER_FRAME,this._currentFrame),!0===this.autoUpdateMatrices&&this.update(n.mat2d.create(),1),null!==this._clippingStrategy&&null!==this._camera&&this._clippingStrategy(this,this._camera),this._renderer.clear(),this.render(this._renderer),this._renderer.draw(this._renderer.getCanvas(),this._renderer.getContext()),this.emit(o.FRAME_END,this._currentFrame)}update(t,e){null!==this._camera&&(this._camera.update(t,1),t=this._camera.getRevertWorldMatrix()),super.update(t,e)}}var o;e.default=i,function(t){t.ENTER_FRAME="ENTER_FRAME",t.FRAME_END="FRAME_END"}(o=e.StageEvent||(e.StageEvent={}))},2359:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(7632),a=r(4870),s=r(5827),i=r(1057),o=r(978);class u extends a.default{constructor(){super(),this._stage=null,this._lastFrameTime=0,this._monitoring=!1,this._elapsedTime=0,this._enterFrame=t=>{this._elapsedTime=(new Date).getTime()-this._lastFrameTime,this._lastFrameTime=(new Date).getTime();const e=t.getPayload(),r=this._stage.getRenderer().getNumDrawCalls(),n=this._stage.getRenderer().getChildren().length;if(e%60==0){const t="fps: "+this.getFps()+", frame: "+e+", drawCalls: "+r+", quads: "+n,a=this._context;a.beginPath(),a.fillStyle="black",a.fillRect(0,0,this.width,this.height),a.fill(),a.font="20px Arial",a.fillStyle="red",a.fillText(t,0,Math.round(this.height/2)),a.closePath()}};const t=o.default.create();this.width=t.width=450,this.height=t.height=50,this.texture=new s.default("stats_texture",new i.default(t),0,0,t.width,t.height),this.texture.data.isDynamic=!0,this._context=this.texture.source.getContext("2d")}getStage(){return this._stage}setStage(t){this.stop(),this._stage=t}start(){null!==this._stage&&this._stage.subscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!0}stop(){null!==this._stage&&this._stage.unsubscribe(n.StageEvent.ENTER_FRAME,this._enterFrame),this._monitoring=!1}getFps(){return this._monitoring?Math.round(1e3/this._elapsedTime):-1}}e.default=u},5850:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.Stats=e.StageEvent=e.Stage=e.DisplayObjectContainer=e.DisplayObject=e.AnimationEvent=e.Animation=void 0;const n=r(5165);e.Animation=n.default,Object.defineProperty(e,"AnimationEvent",{enumerable:!0,get:function(){return n.AnimationEvent}});const a=r(4870);e.DisplayObject=a.default;const s=r(5055);e.DisplayObjectContainer=s.default;const i=r(7632);e.Stage=i.default,Object.defineProperty(e,"StageEvent",{enumerable:!0,get:function(){return i.StageEvent}});const o=r(2359);e.Stats=o.default;const u=r(528);e.Camera=u.default},4849:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},2041:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(978);e.default=class{constructor(){this._children=[],this._canvas=n.default.create(),this._context=this._canvas.getContext("2d")}getNumDrawCalls(){return this._children.length}getContext(){return this._context}getCanvas(){return this._canvas}add(t){this._children.push(t)}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){e.clearRect(0,0,t.width,t.height),this._children.forEach((t=>{if(null===t.texture)return;const r=t.worldMatrix;e.save(),e.globalAlpha=t.worldOpacity,e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),e.drawImage(t.texture.source,t.texture.sx,t.texture.sy,t.texture.sw,t.texture.sh,0,0,t.width,t.height),e.restore()}))}}},4367:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas2DRenderer=void 0;const n=r(2041);e.Canvas2DRenderer=n.default},9279:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},9332:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1261);e.default=class{constructor(t){this.id=0,this.fragmentShader=null,this.vertexShader=null,this.program=null,this.projectionPointer=0,this._init(t)}_init(t){let e=0,r=0,a=0,s=0,i=0,o=0,u=0,h=0,c=4*n.default.VERTEX_SIZE;if(this.fragmentShader=this._compile(t,this._getFragmentSource(),t.FRAGMENT_SHADER),this.vertexShader=this._compile(t,this._getVertexSource(),t.VERTEX_SHADER),null!=this.program&&t.deleteProgram(this.program),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error("Could not initialise shaders");t.useProgram(this.program),r=t.getAttribLocation(this.program,"worldOpacity"),e=t.getAttribLocation(this.program,"vertexPos"),s=t.getAttribLocation(this.program,"uvCoords"),i=t.getAttribLocation(this.program,"wmat1"),o=t.getAttribLocation(this.program,"wmat2"),a=t.getAttribLocation(this.program,"texturePos"),t.enableVertexAttribArray(a),t.enableVertexAttribArray(r),t.enableVertexAttribArray(e),t.enableVertexAttribArray(s),t.enableVertexAttribArray(i),t.enableVertexAttribArray(o),t.vertexAttribPointer(e,2,t.FLOAT,!1,c,0),t.vertexAttribPointer(s,2,t.FLOAT,!1,c,8),t.vertexAttribPointer(i,4,t.FLOAT,!1,c,16),t.vertexAttribPointer(o,2,t.FLOAT,!1,c,32),t.vertexAttribPointer(r,1,t.FLOAT,!1,c,40),t.vertexAttribPointer(a,1,t.FLOAT,!1,c,44),u=t.getUniformLocation(this.program,"uSamplers"),h=t.getUniformLocation(this.program,"uProjection");const l=[];for(let t=0;t<n.default.MAX_TEXTURES_UNITS;t++)l.push(t);t.uniform1iv(u,l),this.projectionPointer=h}_compile(t,e,r){const n=t.createShader(r);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(e+"*********"+t.getShaderInfoLog(n));return n}_getVertexSource(){return"\n\t\tattribute vec2 vertexPos;\n\t\tattribute vec2 uvCoords;\n\t\tattribute vec4 wmat1;\n\t\tattribute vec2 wmat2;\n\t\tattribute float worldOpacity;\n\t\tattribute float texturePos;\n\t\tvarying float textureIndex;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tuniform vec2 uProjection;\n\t\tconst vec3 center = vec3(-1.0, 1.0, 0);\n\n\n\n\t\tvoid main(void) {\n\n\t\t\tmat3 worldMatrix = mat3(\n\t\t\t\tvec3(wmat1.x, wmat1.z, wmat2.x),\n\t\t\t\tvec3(wmat1.y, wmat1.w, wmat2.y),\n\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t);\n\n\t\t\tvec3 tmp = vec3( vertexPos, 1.0) * worldMatrix;\n\t\t\tgl_Position = vec4((tmp / vec3(uProjection,1)) + center, 1.0);\n\n\t\t\tuvs = uvCoords;\n\t\t\ttextureIndex = texturePos;\n\n\t\t\tvColor = vec4(1.0, 1.0, 1.0, worldOpacity);\n\n\t\t}\n        "}_getFragmentSource(){let t="";for(let e=0;e<n.default.MAX_TEXTURES_UNITS;e++)e>0&&(t+="else "),t+=`if(index == ${e}){\n\t\t\t\tgl_FragColor = texture2D(uSamplers[${e}], uvs) * vColor.a;\n\t\t\t}`;return`\n\t\t#define numTextures ${n.default.MAX_TEXTURES_UNITS}\n\n\t\tprecision lowp float;\n\t\tvarying vec4 vColor;\n\t\tvarying vec2 uvs;\n\t\tvarying float textureIndex;\n\t\tuniform sampler2D uSamplers[numTextures];\n        \n\t\tvoid main(void) {\n\t\t\tint index = int(textureIndex);\n\t\t\t${t}\n\t\t}\n        `}}},904:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._textureChannel=[],this._context=null}reset(t,e){this._context=t,this._textureChannel=[];for(let t=0;t<e;t++)this._textureChannel.push({pos:t,id:this._context["TEXTURE"+t],data:null})}hasEmptyChannels(){return this.getEmptyChannels().length>0}getEmptyChannels(){return this._textureChannel.filter((t=>null===t.data))}getNonEmptyChannels(){return this._textureChannel.filter((t=>null!==t.data))}getChannelByUid(t){return this._textureChannel.find((e=>null!==e.data&&e.data.uid===t))||null}getChannels(){return this._textureChannel}getNonEmptyChannelsMappedByUid(){const t=new Map;return this.getNonEmptyChannels().forEach((e=>{t.set(e.data.uid,e)})),t}getChannelAt(t){return this._textureChannel[t]||null}isChannelEmptyAt(t){return null===this.getChannelAt(t).data}fillChannelAt(t,e){const r=this.getChannelAt(t);if(null===r)return!1;try{r.data=e,r.data.texturePos=t,this._context.activeTexture(r.id),this._context.bindTexture(this._context.TEXTURE_2D,e.getGlTexture(this._context))}catch(t){return console.log(t),!1}return!0}}},1261:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createIndexArray=e.createVertexArray=e.pushVerticesInto=e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL=e.MAX_TEXTURES_UNITS=e.NUM_VERTICES_PER_QUAD=e.INDICES_PER_QUAD=e.VERTEX_SIZE=void 0;const n=r(351);function a(t,e){let r=0,n=null,a=0,s=0,i=0,o=0,u=0,h=0,c=0,l=null,d=0,f=0,_=null,g=0;for(let m=0;m<t.length;m++)l=t[m],c=l.texture.data.texturePos,n=l.worldMatrix,d=l.width,f=l.height,_=l.texture,g=l.worldOpacity,a=n[0],s=n[1],i=n[2],o=n[3],u=n[4],h=n[5],e[r+0]=0,e[r+1]=0,e[r+2]=_.topLeftUv.u,e[r+3]=_.topLeftUv.v,e[r+4]=a,e[r+5]=s,e[r+6]=i,e[r+7]=o,e[r+8]=u,e[r+9]=h,e[r+10]=g,e[r+11]=c,e[r+12]=d,e[r+13]=0,e[r+14]=_.topRightUv.u,e[r+15]=_.topRightUv.v,e[r+16]=a,e[r+17]=s,e[r+18]=i,e[r+19]=o,e[r+20]=u,e[r+21]=h,e[r+22]=g,e[r+23]=c,e[r+24]=0,e[r+25]=f,e[r+26]=_.bottomLeftUv.u,e[r+27]=_.bottomLeftUv.v,e[r+28]=a,e[r+29]=s,e[r+30]=i,e[r+31]=o,e[r+32]=u,e[r+33]=h,e[r+34]=g,e[r+35]=c,e[r+36]=d,e[r+37]=f,e[r+38]=_.bottomRightUv.u,e[r+39]=_.bottomRightUv.v,e[r+40]=a,e[r+41]=s,e[r+42]=i,e[r+43]=o,e[r+44]=u,e[r+45]=h,e[r+46]=g,e[r+47]=c,r+=48}function s(){return new Float32Array(e.MAX_QUAD_PER_CALL*e.VERTEX_SIZE*e.NUM_VERTICES_PER_QUAD)}function i(){const t=e.MAX_QUAD_PER_CALL*e.INDICES_PER_QUAD,r=new Uint16Array(t);let n=0;for(let a=0;a<t;a+=e.INDICES_PER_QUAD)r[a+0]=n+0,r[a+1]=n+1,r[a+2]=n+2,r[a+3]=n+1,r[a+4]=n+2,r[a+5]=n+3,n+=e.NUM_VERTICES_PER_QUAD;return r}e.VERTEX_SIZE=12,e.INDICES_PER_QUAD=6,e.NUM_VERTICES_PER_QUAD=4,e.MAX_TEXTURES_UNITS=function(t){const e=n.CanvasUtils.create().getContext("webgl");return e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(),e.MAX_QUAD_PER_CALL=Math.floor(65535/e.INDICES_PER_QUAD),e.VERTEX_ARRAY_SIZE=e.MAX_QUAD_PER_CALL*e.NUM_VERTICES_PER_QUAD*e.VERTEX_SIZE,e.pushVerticesInto=a,e.createVertexArray=s,e.createIndexArray=i;class o{}e.default=o,o.VERTEX_SIZE=e.VERTEX_SIZE,o.NUM_VERTICES_PER_QUAD=e.NUM_VERTICES_PER_QUAD,o.MAX_TEXTURES_UNITS=e.MAX_TEXTURES_UNITS,o.MAX_QUAD_PER_CALL=e.MAX_QUAD_PER_CALL,o.VERTEX_ARRAY_SIZE=e.VERTEX_ARRAY_SIZE,o.INDICES_PER_QUAD=e.INDICES_PER_QUAD,o.pushVerticesInto=a,o.createVertexArray=s,o.createIndexArray=i},5798:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(9332),a=r(1261),s=r(978),i=r(767),o=r(904),u=r(1268);e.default=class{constructor(){this._children=[],this._drawCalls=0,this._init()}_init(){this._canvas=s.default.create(),this._context=this._canvas.getContext("webgl"),this._vertexArray=a.default.createVertexArray(),this._indexArray=a.default.createIndexArray(),this._vertexBuffer=this._context.createBuffer(),this._indexBuffer=this._context.createBuffer(),this._context.bindBuffer(this._context.ARRAY_BUFFER,this._vertexBuffer),this._context.bufferData(this._context.ARRAY_BUFFER,this._vertexArray,this._context.DYNAMIC_DRAW),this._context.bindBuffer(this._context.ELEMENT_ARRAY_BUFFER,this._indexBuffer),this._context.bufferData(this._context.ELEMENT_ARRAY_BUFFER,this._indexArray,this._context.STATIC_DRAW),this._currentShader=new n.default(this._context),this._context.disable(this._context.DEPTH_TEST),this._context.disable(this._context.CULL_FACE),this._context.blendFunc(this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA),this._context.enable(this._context.BLEND)}add(t){this._children.push(t)}getNumDrawCalls(){return this._drawCalls}getCanvas(){return this._canvas}getContext(){return this._context}getChildren(){return this._children}setChildren(t){this._children=t}clear(){this._children=[]}draw(t,e){const r=t.width/2,n=-t.height/2;e.uniform2f(this._currentShader.projectionPointer,r,n),e.clearColor(0,0,0,1),e.viewport(0,0,t.width,t.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=new o.default,i=this.batch(this._children);this._drawCalls=0,i.forEach((t=>{s.reset(e,a.default.MAX_TEXTURES_UNITS),Array.from(t.datas).forEach(((t,e)=>{s.fillChannelAt(e,t)})),t.subBatches.forEach((t=>{a.default.pushVerticesInto(t.objects,this._vertexArray),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertexArray),e.drawElements(e.TRIANGLES,t.objects.length*a.default.INDICES_PER_QUAD,e.UNSIGNED_SHORT,0),this._drawCalls++}))}))}batch(t){const e=i.default.create(t.filter((t=>null!==t.texture)),a.default.MAX_TEXTURES_UNITS);return e.forEach((t=>{t.subBatches=u.default.create(t.objects,a.default.MAX_QUAD_PER_CALL)})),e}}},1268:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.subBatches=[],this.full=!1,this.objects=[]}static create(t,e){const n=[];for(;t.length>0;){const a=new r;a.objects=t.splice(0,e),a.full=a.objects.length>=e,n.push(a)}return n.filter((t=>t.objects.length>0))}}e.default=r},767:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.subBatches=[],this.objects=[],this.uids=new Set,this.datas=new Set}static create(t,e){const n=[new r];let a=n[0],s=0;for(let i=0;i<t.length;i++){const o=t[i],u=o.texture.textureUid;a.uids.has(u)||(a.uids.size>=e&&(a.objects=t.slice(s,i),s=i,a=new r,n.push(a)),a.uids.add(u),a.datas.add(o.texture.data))}return a.objects=t.slice(s),n.filter((t=>t.objects.length>0))}}e.default=r},7379:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BatchDrawCall=e.BatchTexture=void 0;const n=r(1268);e.BatchDrawCall=n.default;const a=r(767);e.BatchTexture=a.default},3515:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pushVerticesInto=e.createVertexArray=e.createIndexArray=e.VERTEX_SIZE=e.VERTEX_ARRAY_SIZE=e.NUM_VERTICES_PER_QUAD=e.MAX_QUAD_PER_CALL=e.INDICES_PER_QUAD=e.TextureDataManager=e.WebGlConfig=e.Webgl2DRenderer=e.Default2DShader=void 0;const n=r(9332);e.Default2DShader=n.default;const a=r(5798);e.Webgl2DRenderer=a.default;const s=r(904);e.TextureDataManager=s.default;const i=r(1261);e.WebGlConfig=i.default,Object.defineProperty(e,"INDICES_PER_QUAD",{enumerable:!0,get:function(){return i.INDICES_PER_QUAD}}),Object.defineProperty(e,"MAX_QUAD_PER_CALL",{enumerable:!0,get:function(){return i.MAX_QUAD_PER_CALL}}),Object.defineProperty(e,"NUM_VERTICES_PER_QUAD",{enumerable:!0,get:function(){return i.NUM_VERTICES_PER_QUAD}}),Object.defineProperty(e,"VERTEX_ARRAY_SIZE",{enumerable:!0,get:function(){return i.VERTEX_ARRAY_SIZE}}),Object.defineProperty(e,"VERTEX_SIZE",{enumerable:!0,get:function(){return i.VERTEX_SIZE}}),Object.defineProperty(e,"createIndexArray",{enumerable:!0,get:function(){return i.createIndexArray}}),Object.defineProperty(e,"createVertexArray",{enumerable:!0,get:function(){return i.createVertexArray}}),Object.defineProperty(e,"pushVerticesInto",{enumerable:!0,get:function(){return i.pushVerticesInto}})},6902:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5827),a=r(978),s=r(5050),i=r(9319);e.default=class{constructor(t,e,r=[]){this._width=0,this._height=0,this._zones=[],this._textures=[],this._textureData=null,this._reset(t,e,r)}_sortZonesByAreaAsc(t,e){return t.getArea()>e.getArea()?-1:1}_sortSourcesByAreaAsc(t,e){return t.source.width*t.source.height>e.source.width*e.source.height?-1:1}_drawTextures(){const t=a.default.create(this._width,this._height),e=n.default.createFromSource("main",t),r=e.data.getSource().getContext("2d"),s=this.getZones().filter((t=>!t.isEmpty())),i=s.map((t=>({id:t.data.id,sx:t.x,sy:t.y,sw:t.width,sh:t.height})));return s.forEach((t=>{r.save(),r.drawImage(t.data.source,t.x,t.y,t.width,t.height),r.restore()})),this._textureData=e.data,e.createSubTextures(i)}_addSource(t){const e=this._findFreeZoneFor(t.source);if(null===e)return!1;let r=null,n=null;return t.source.width>t.source.height?(r=e.splitBottom(t.source.height),n=e.splitRight(t.source.width)):(n=e.splitRight(t.source.width),r=e.splitBottom(t.source.height)),e.data=t,null!==n&&n.getArea()>0&&this._zones.push(n),null!==r&&r.getArea()>0&&this._zones.push(r),!0}_findFreeZoneFor(t){return this._zones.sort(this._sortZonesByAreaAsc),this._zones.find((e=>e.canContain(t.width,t.height)&&e.isEmpty()))||null}_reset(t,e,r){this._width=s.default.getNextPowerOf2(t),this._height=s.default.getNextPowerOf2(e);const n=new i.default;n.x=0,n.y=0,n.width=this._width,n.height=this._height,n.data=null,this._zones=[n],r.sort(this._sortSourcesByAreaAsc),r.forEach((t=>{this._addSource(t)})),this._textures=this._drawTextures()}getTextureData(){return this._textureData}getTextures(){return this._textures}getZones(){return this._zones}getWidth(){return this._width}getHeight(){return this._height}}},5827:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1057);class a{constructor(t="",e,r=0,n=0,a=0,s=0){this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.topLeftUv={u:0,v:0},this.topRightUv={u:0,v:0},this.bottomLeftUv={u:0,v:0},this.bottomRightUv={u:0,v:0},this.id="",this._data=e,this.sx=r,this.sy=n,this.sw=a,this.sh=s,this.id=t,this.calcUv()}calcUv(){const t=this._data.getSource().width,e=this._data.getSource().height,r=this.sx/t,n=(this.sx+this.sw)/t,a=this.sy/e,s=(this.sy+this.sh)/e;this.topLeftUv.u=r,this.topLeftUv.v=a,this.topRightUv.u=n,this.topRightUv.v=a,this.bottomLeftUv.u=r,this.bottomLeftUv.v=s,this.bottomRightUv.u=n,this.bottomRightUv.v=s}get textureUid(){return this._data.uid}get data(){return this._data}get source(){return this._data.getSource()}createSubTexture(t,e,r,n,s){return new a(t,this._data,e,r,n,s)}createSubTextures(t){return t.map((t=>this.createSubTexture(t.id,t.sx,t.sy,t.sw,t.sh)))}static createFromSource(t,e){const r=new n.default(e);return e instanceof HTMLVideoElement&&(r.isDynamic=!0),new a(t,r,0,0,r.width,r.height)}}e.default=a},1057:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(978),a=r(5050);class s{constructor(t){this.width=0,this.height=0,this.texturePos=0,this._glTexture=null,this._isDynamic=!1,this._updateNextFrame=!1,this.setSource(t),this._uid="texture_data_"+s._counter++}setSource(t){const e=a.default.getNextPowerOf2(t.width),r=a.default.getNextPowerOf2(t.height),s=n.default.create(),i=s.getContext("2d");s.width=e,s.height=r,i.drawImage(t,0,0),this._source=s,this.width=e,this.height=r,this._updateNextFrame=!0}getSource(){return this._source}getGlTexture(t){return null===this._glTexture&&(this._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.bindTexture(t.TEXTURE_2D,null)),(this._isDynamic||this._updateNextFrame)&&(this._updateNextFrame=!1,t.bindTexture(t.TEXTURE_2D,this._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._source)),this._glTexture}get uid(){return this._uid}get isDynamic(){return this._isDynamic}set isDynamic(t){this._isDynamic=t}}e.default=s,s._counter=0},9319:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.data=null}isEmpty(){return null===this.data}_partialClone(){const t=new r;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}splitRight(t){if(t>=this.width)return null;const e=this._partialClone();return e.x+=t,e.width-=t,this.width=t,e}splitLeft(t){if(t>=this.width)return null;const e=this._partialClone();return this.x+=t,this.width-=t,e.width=t,e}splitBottom(t){if(t>=this.height)return null;const e=this._partialClone();return e.y+=t,e.height-=t,this.height=t,e}splitTop(t){if(t>=this.height)return null;const e=this._partialClone();return this.y+=t,this.height-=t,e.height=t,e}getArea(){return this.width*this.height}canContain(t,e){return t<=this.width&&e<=this.height}}e.default=r},1940:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Zone=e.TextureData=e.Texture=e.Spritesheet=void 0;const n=r(6902);e.Spritesheet=n.default;const a=r(5827);e.Texture=a.default;const s=r(1057);e.TextureData=s.default;const i=r(9319);e.Zone=i.default},978:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{static create(t=1,e=1){const r=document.createElement("canvas");return r.width=t,r.height=e,r}static fillRect(t,e,r,n,a,s){const i=t.getContext("2d");i.save(),i.beginPath(),i.fillStyle=e,i.fillRect(r,n,a,s),i.fill(),i.closePath(),i.restore()}static getCanvasPixels(t){const e=r.create(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),e.getContext("2d").getImageData(0,0,e.width,e.height).data}static getCanvasPixel(t,e,n){const a=r.getCanvasPixels(t),s=Math.floor(n*t.width*4)+4*e;return[a[s],a[s+1],a[s+2],a[s+3]]}static canvasPixelToRGBA(t){return{r:t[0],g:t[1],b:t[2],a:t[3]}}static pixelsAreTheSame(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}}e.default=r},2843:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(887),a=r(2727);class s{static getFastAngle(){const t=[];for(let e=0;e<=360;e++)t.push(e*this.TO_RADIANS);return t}static getFastSinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.sin(e*this.TO_RADIANS);return t}static getFastCosinus(){const t=this.getFastAngle();for(let e=0;e<t.length;e++)t[e]=Math.cos(e*this.TO_RADIANS);return t}static updateTransformAll(t,e){let r=t[0],a=t[1],i=t[2],o=t[3],u=t[4],h=t[5],c=n.mat2d.create(),l=n.mat2d.create(),d=n.mat2d.create(),f=null,_=null,g=0,m=0,M=0,p=0,v=0,b=0,E=0;for(let n=0;n<e.length;n++)f=e[n],l=f.matrix,d=f.worldMatrix,g=(f.rotation%360+360)%360>>0,m=s.FAST_SIN[g],M=s.FAST_COS[g],p=f.transformOrigin.x>>0,v=f.transformOrigin.y>>0,b=f.scaleX,E=f.scaleY,l[0]=M*b,l[1]=m*b,l[2]=-m*E,l[3]=M*E,l[4]=l[0]*-p+l[2]*-v+f.x+p,l[5]=l[1]*-p+l[3]*-v+f.y+v,f.parent!==_&&(c=null!==f.parent?f.parent.worldMatrix:t,_=f.parent,r=c[0],a=c[1],i=c[2],o=c[3],u=c[4],h=c[5]),d[0]=r*l[0]+i*l[1],d[1]=a*l[0]+o*l[1],d[2]=r*l[2]+i*l[3],d[3]=a*l[2]+o*l[3],d[4]=r*l[4]+i*l[5]+u,d[5]=a*l[4]+o*l[5]+h}static updateTransform(t,e){const r=e.matrix,n=e.worldMatrix,a=e.rotation<0?(360+e.rotation>>0)%360:(e.rotation>>0)%360;let s=r[0],i=r[1],o=r[2],u=r[3],h=r[4],c=r[5],l=t[0],d=t[1],f=t[2],_=t[3],g=t[4],m=t[5],M=0,p=0,v=0,b=0;r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e.x+e.transformOrigin.x>>0,r[5]=e.y+e.transformOrigin.y>>0,s=r[0],i=r[1],o=r[2],u=r[3],h=r[4],c=r[5],M=this.FAST_SIN[a],p=this.FAST_COS[a],r[0]=s*p+o*M,r[1]=i*p+u*M,r[2]=s*-M+o*p,r[3]=i*-M+u*p,r[4]=h,r[5]=c,s=r[0],i=r[1],o=r[2],u=r[3],h=r[4],c=r[5],v=e.scaleX,b=e.scaleY,r[0]=s*v,r[1]=i*v,r[2]=o*b,r[3]=u*b,r[4]=h,r[5]=c,s=r[0],i=r[1],o=r[2],u=r[3],h=r[4],c=r[5],v=-e.transformOrigin.x>>0,b=-e.transformOrigin.y>>0,r[0]=s,r[1]=i,r[2]=o,r[3]=u,r[4]=s*v+o*b+h,r[5]=i*v+u*b+c,l=r[0],d=r[1],f=r[2],_=r[3],g=r[4],m=r[5],s=t[0],i=t[1],o=t[2],u=t[3],h=t[4],c=t[5],n[0]=s*l+o*d,n[1]=i*l+u*d,n[2]=s*f+o*_,n[3]=i*f+u*_,n[4]=s*g+o*m+h,n[5]=i*g+u*m+c}static getHitbox(t){if(a.isDisplayObjectContainer(t)){const e=t.getChildren().map((t=>this.getHitbox(t))),r=[],n=[];e.forEach((t=>{r.push(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),n.push(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y)}));const a=Math.min(...r),s=Math.max(...r),i=Math.min(...n),o=Math.max(...n);return{topLeft:{x:a,y:i},topRight:{x:s,y:i},bottomLeft:{x:a,y:o},bottomRight:{x:s,y:o}}}{const e=t.worldMatrix;return{topLeft:this.transformPoint(0,0,e),topRight:this.transformPoint(t.width,0,e),bottomLeft:this.transformPoint(0,t.height,e),bottomRight:this.transformPoint(t.width,t.height,e)}}}static getBoundingRect(t){const e=this.getHitbox(t),r=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),n=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),a=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y);return{x:r,y:a,width:n-r,height:Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y)-a}}static transformPoint(t,e,r){return{x:Math.round(t*r[0]+e*r[2]+r[4]),y:Math.round(t*r[1]+e*r[3]+r[5])}}static collide(t,e,r){const n=this.getBoundingRect(r);return!(t<n.x||t>n.x+n.width||e<n.y||e>n.y+n.height)}}e.default=s,s.TO_RADIANS=Math.PI/180,s.FAST_ANGLES=s.getFastAngle(),s.FAST_SIN=s.getFastSinus(),s.FAST_COS=s.getFastCosinus()},5050:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getNextPowerOf2(t){let e=1;for(;e<t;)e*=2;return e}}},351:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=e.isWebGLAvailable=e.isDisplayObjectContainer=e.Geometry=e.CanvasUtils=void 0;const n=r(978);e.CanvasUtils=n.default;const a=r(2843);e.Geometry=a.default;const s=r(2727);Object.defineProperty(e,"isDisplayObjectContainer",{enumerable:!0,get:function(){return s.isDisplayObjectContainer}}),Object.defineProperty(e,"isWebGLAvailable",{enumerable:!0,get:function(){return s.isWebGLAvailable}});const i=r(5050);e.MathUtils=i.default},2727:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isWebGLAvailable=e.isDisplayObjectContainer=void 0;const n=r(978);e.isDisplayObjectContainer=function(t){return void 0!==t.getChildren},e.isWebGLAvailable=function(){return null!==n.default.create().getContext("webgl")}},5590:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(r(5983),e),a(r(7392),e),a(r(5850),e),a(r(4849),e),a(r(9279),e),a(r(4367),e),a(r(3515),e),a(r(7379),e),a(r(1940),e),a(r(351),e),a(r(4919),e),a(r(2576),e),a(r(5794),e),a(r(9510),e),a(r(8791),e),a(r(1035),e),a(r(7072),e),a(r(2677),e),a(r(3407),e),a(r(8433),e),r(887).glMatrix.setMatrixArrayType(Array)},7690:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.id="",this.state={}}}},9510:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameNode=void 0;const n=r(7690);e.GameNode=n.default},220:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this._map=[],this._numRows=0,this._numCols=0}reset(t,e){this._numRows=t,this._numCols=e,this._map=[];for(let r=0;r<t;r++){const t=[];for(let r=0;r<e;r++)t.push(null);this._map.push(t)}}destroy(){this._map=[],this._numRows=0,this._numCols=0}getNeighbours(t,e){return{topLeft:this.getTopLeft(t,e),top:this.getTop(t,e),topRight:this.getTopRight(t,e),left:this.getLeft(t,e),center:this.getAt(t,e),right:this.getRight(t,e),bottomLeft:this.getBottomLeft(t,e),bottom:this.getBottom(t,e),bottomRight:this.getBottomRight(t,e)}}getLeft(t,e){return this.getAt(t,e-1)}getRight(t,e){return this.getAt(t,e+1)}getBottom(t,e){return this.getAt(t+1,e)}getBottomLeft(t,e){return this.getAt(t+1,e-1)}getBottomRight(t,e){return this.getAt(t+1,e+1)}getTop(t,e){return this.getAt(t-1,e)}getTopLeft(t,e){return this.getAt(t-1,e-1)}getTopRight(t,e){return this.getAt(t-1,e+1)}getAt(t,e){return this.isOutOfBounds(t,e)?null:this._map[t][e]}addAt(t,e,r){this.isOutOfBounds(t,e)||(this._map[t][e]=r)}removeAt(t,e){this.isOutOfBounds(t,e)||(this._map[t][e]=null)}isOutOfBounds(t,e){return t>this.numRows-1||e>this.numCols-1||t<0||e<0}forEach(t){for(let e=0;e<this.numRows;e++)for(let r=0;r<this.numCols;r++)t(this._map[e][r],e,r)}map(t){const e=[];for(let r=0;r<this.numRows;r++){e[r]=[];for(let n=0;n<this.numCols;n++)e[r][n]=t(this._map[r][n],r,n)}return r.from(e)}extract(t,e,n,a){const s=[];e=e>this.numRows-1?this.numRows-1:e,a=a>this.numCols-1?this.numCols-1:a,n=n<0?0:n;for(let r=t=t<0?0:t;r<=e;r++){const t=[];for(let e=n;e<=a;e++)t.push(this.getAt(r,e));s.push(t)}return r.from(s)}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}static from(t){const e=new r,n=t.length,a=t[0]?.length||0;e.reset(n,a);for(let r=0;r<n;r++)for(let n=0;n<a;n++)e.addAt(r,n,t[r][n]);return e}}e.default=r},7569:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this._map=[],this._numRows=0,this._numCols=0,this._numLayers=0}reset(t,e,r){this._numRows=t,this._numCols=e,this._numLayers=r,this._map=[];for(let n=0;n<r;n++){const r=[];this._map.push(r);for(let n=0;n<t;n++){const t=[];r.push(t);for(let r=0;r<e;r++)t.push(null)}}}destroy(){this._map=[],this._numRows=0,this._numCols=0,this._numLayers=0}getAt(t,e,r){return this.isOutOfBounds(t,e,r)?null:this._map[r][t][e]}addAt(t,e,r,n){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=n)}removeAt(t,e,r){this.isOutOfBounds(t,e,r)||(this._map[r][t][e]=null)}isOutOfBounds(t,e,r){return t>this.numRows-1||e>this.numCols-1||r>this.numLayers-1||r<0||t<0||e<0}forEach(t){for(let e=0;e<this.numLayers;e++)for(let r=0;r<this.numRows;r++)for(let n=0;n<this.numCols;n++)t(this._map[e][r][n],r,n,e)}getNeighbours(t,e,r){return{topLeftFront:this.getTopLeftFront(t,e,r),topFront:this.getTopFront(t,e,r),topRightFront:this.getTopRightFront(t,e,r),leftFront:this.getLeftFront(t,e,r),centerFront:this.getFront(t,e,r),rightFront:this.getRightFront(t,e,r),bottomLeftFront:this.getBottomLeftFront(t,e,r),bottomFront:this.getBottomFront(t,e,r),bottomRightFront:this.getBottomRightFront(t,e,r),topLeftBack:this.getTopLeftBack(t,e,r),topBack:this.getTopBack(t,e,r),topRightBack:this.getTopRightBack(t,e,r),leftBack:this.getLeftBack(t,e,r),centerBack:this.getBack(t,e,r),rightBack:this.getRightBack(t,e,r),bottomLeftBack:this.getBottomLeftBack(t,e,r),bottomBack:this.getBottomBack(t,e,r),bottomRightBack:this.getBottomRightBack(t,e,r),topLeft:this.getTopLeft(t,e,r),top:this.getTop(t,e,r),topRight:this.getTopRight(t,e,r),left:this.getLeft(t,e,r),center:this.getAt(t,e,r),right:this.getRight(t,e,r),bottomLeft:this.getBottomLeft(t,e,r),bottom:this.getBottom(t,e,r),bottomRight:this.getBottomRight(t,e,r)}}getLeftFront(t,e,r){return this.getAt(t,e-1,r-1)}getRightFront(t,e,r){return this.getAt(t,e+1,r-1)}getBottomFront(t,e,r){return this.getAt(t+1,e,r-1)}getBottomLeftFront(t,e,r){return this.getAt(t+1,e-1,r-1)}getBottomRightFront(t,e,r){return this.getAt(t+1,e+1,r-1)}getTopFront(t,e,r){return this.getAt(t-1,e,r-1)}getTopLeftFront(t,e,r){return this.getAt(t-1,e-1,r-1)}getTopRightFront(t,e,r){return this.getAt(t-1,e+1,r-1)}getFront(t,e,r){return this.getAt(t,e,r-1)}getBack(t,e,r){return this.getAt(t,e,r+1)}getLeftBack(t,e,r){return this.getAt(t,e-1,r+1)}getRightBack(t,e,r){return this.getAt(t,e+1,r+1)}getBottomBack(t,e,r){return this.getAt(t+1,e,r+1)}getBottomLeftBack(t,e,r){return this.getAt(t+1,e-1,r+1)}getBottomRightBack(t,e,r){return this.getAt(t+1,e+1,r+1)}getTopBack(t,e,r){return this.getAt(t-1,e,r+1)}getTopLeftBack(t,e,r){return this.getAt(t-1,e-1,r+1)}getTopRightBack(t,e,r){return this.getAt(t-1,e+1,r+1)}getLeft(t,e,r){return this.getAt(t,e-1,r)}getRight(t,e,r){return this.getAt(t,e+1,r)}getBottom(t,e,r){return this.getAt(t+1,e,r)}getBottomLeft(t,e,r){return this.getAt(t+1,e-1,r)}getBottomRight(t,e,r){return this.getAt(t+1,e+1,r)}getTop(t,e,r){return this.getAt(t-1,e,r)}getTopLeft(t,e,r){return this.getAt(t-1,e-1,r)}getTopRight(t,e,r){return this.getAt(t-1,e+1,r)}map(t){const e=[];for(let r=0;r<this.numLayers;r++){e[r]=[];for(let n=0;n<this.numRows;n++){e[r][n]=[];for(let a=0;a<this.numCols;a++)e[r][n][a]=t(this._map[r][n][a],n,a,r)}}return r.from(e)}extract(t,e,n,a,s,i){const o=[];i=i>this.numLayers-1?this.numLayers-1:i,e=e>this.numRows-1?this.numRows-1:e,a=a>this.numCols-1?this.numCols-1:a,t=t<0?0:t,n=n<0?0:n;for(let r=s=s<0?0:s;r<=i;r++){const s=[];for(let i=t;i<=e;i++){const t=[];for(let e=n;e<=a;e++)t.push(this.getAt(i,e,r));s.push(t)}o.push(s)}return r.from(o)}static from(t){const e=new r,n=t.length,a=t[0]?.length||0,s=t[0]?.[0]?.length||0;e.reset(a,s,n);for(let r=0;r<n;r++)for(let n=0;n<a;n++)for(let a=0;a<s;a++)e.addAt(n,a,r,t[r][n][a]);return e}get numLayers(){return this._numLayers}get numCols(){return this._numCols}get numRows(){return this._numRows}get data(){return this._map}}e.default=r},8791:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid3D=e.Grid2D=void 0;const n=r(220);e.Grid2D=n.default;const a=r(7569);e.Grid3D=a.default},557:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._maxWeight=0,this._maxItems=0,this._items=[],this.reset(0,0)}reset(t,e){this.maxWeight=e,this.maxItems=t,this._items=[]}add(t){return this.remainingSpace>0&&this.remainingWeight>=t.weight&&(this._items.push(t),!0)}getAllByCategory(t){return this._items.filter((e=>e.category===t))}getAllCategories(){const t=this._items.map((t=>t.category)),e=new Set(t);return Array.from(e)}getAllGroupByCategory(){return this.getAllCategories().map((t=>({category:t,items:this.getAllByCategory(t)})))}remove(t){const e=this._items.indexOf(t);return e>-1?(this._items.splice(e,1),t):null}contains(t){return this._items.indexOf(t)>-1}get remainingSpace(){return this.maxItems-this._items.length}get totalWeight(){let t=0;for(let e of this._items)t+=e.weight;return t}get numItems(){return this._items.length}get remainingWeight(){return this.maxWeight-this.totalWeight}get maxWeight(){return this._maxWeight}set maxWeight(t){this._maxWeight=t<0?0:t}get maxItems(){return this._maxItems}set maxItems(t){this._maxItems=t<0?0:t}}},1035:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Inventory=void 0;const n=r(557);e.Inventory=n.default},5430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),a=r(9510),s=r(8126);e.default=class{constructor(){this._grid=null,this._currentRow=0,this._currentCol=0}reset(t,e,r,i){this._pathCoords=[],this._grid=new n.Grid2D,this._grid.reset(t,e),this._currentRow=r,this._currentCol=i,this._grid.forEach(((t,e,r)=>{const n=new a.GameNode;n.state.type=e%2==0||r%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol;t.getAt(r,n).state.type=s.default.FREE;const a=[{wall:this._grid.getLeft(r,n),target:this._grid.getLeft(r,n-1),row:r,col:n-2},{wall:this._grid.getRight(r,n),target:this._grid.getRight(r,n+1),row:r,col:n+2},{wall:this._grid.getTop(r,n),target:this._grid.getTop(r-1,n),row:r-2,col:n},{wall:this._grid.getBottom(r,n),target:this._grid.getBottom(r+1,n),row:r+2,col:n}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(a.length>0){const t=a[Math.round(Math.random()*(a.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n]),this._currentRow=t.row,this._currentCol=t.col}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1]}else this._currentRow=null,this._currentCol=null}}},4781:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(8791),a=r(9510),s=r(8126);e.default=class{constructor(){this._grid=null,this._currentRow=0,this._currentCol=0,this._currentLayer=0}reset(t,e,r,i,o,u){this._pathCoords=[],this._grid=new n.Grid3D,this._grid.reset(t,e,r),this._currentRow=i,this._currentCol=o,this._currentLayer=u,this._grid.forEach(((t,e,r,n)=>{const i=new a.GameNode;i.state.type=e%2==0||r%2==0||n%2==0?s.default.WALL:s.default.BLOCK,this._grid.addAt(e,r,n,i)}))}getRows(){return this._grid.numRows}getCols(){return this._grid.numCols}getLayers(){return this._grid.numLayers}getCurrentNode(){return this._grid.getAt(this._currentRow,this._currentCol,this._currentLayer)}getData(){return this._grid.data}isFinished(){return null===this._currentRow&&null===this._currentCol&&null===this._currentLayer}finalize(){for(;!this.isFinished();)this.step()}step(){if(this.isFinished())return;const t=this._grid,e=this._pathCoords,r=this._currentRow,n=this._currentCol,a=this._currentLayer;t.getAt(r,n,a).state.type=s.default.FREE;const i=[{wall:this._grid.getAt(r,n-1,a),target:this._grid.getAt(r,n-2,a),row:r,col:n-2,layer:a},{wall:this._grid.getAt(r,n+1,a),target:this._grid.getAt(r,n+2,a),row:r,col:n+2,layer:a},{wall:this._grid.getAt(r-1,n,a),target:this._grid.getAt(r-2,n,a),row:r-2,col:n,layer:a},{wall:this._grid.getAt(r+1,n,a),target:this._grid.getAt(r+2,n,a),row:r+2,col:n,layer:a},{wall:this._grid.getAt(r,n,a-1),target:this._grid.getAt(r,n,a-2),row:r,col:n,layer:a-2},{wall:this._grid.getAt(r,n,a+1),target:this._grid.getAt(r,n,a+2),row:r,col:n,layer:a+2}].filter((t=>null!==t.wall&&null!==t.target&&t.target.state.type===s.default.BLOCK));if(i.length>0){const t=i[Math.round(Math.random()*(i.length-1))];t.wall.state.type=s.default.FREE,t.target.state.type=s.default.FREE,e.push([r,n,a]),this._currentRow=t.row,this._currentCol=t.col,this._currentLayer=t.layer}else if(e.length>0){let t=e.pop();this._currentRow=t[0],this._currentCol=t[1],this._currentLayer=t[2]}else this._currentRow=null,this._currentCol=null,this._currentLayer=null}}},8126:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WALL="WALL",t.FREE="FREE",t.BLOCK="BLOCK"}(r||(r={})),e.default=r},3078:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),a=r(9510);e.default=class{constructor(){this.opened=[],this.closed=[]}createGraphe(t,e){const r=new n.Grid2D;return r.reset(t.numRows,t.numCols),t.forEach(((t,n,s)=>{const i=new a.GameNode;i.state.row=n,i.state.col=s,i.state.g=0,i.state.f=0,i.state.h=0,i.state.walkable=t===e,i.state.parent=null,r.addAt(n,s,i)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r)=>{t&&(t.state.row=e,t.state.col=r,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,a=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const i=[t.getLeft(r.state.row,r.state.col),t.getRight(r.state.row,r.state.col),t.getTop(r.state.row,r.state.col),t.getBottom(r.state.row,r.state.col)];a&&i.push(t.getTopLeft(r.state.row,r.state.col),t.getTopRight(r.state.row,r.state.col),t.getBottomLeft(r.state.row,r.state.col),t.getBottomRight(r.state.row,r.state.col)),i.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const a=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,i=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col))*e.NODE_DISTANCE_VALUE,o=i+s;(a&&s<t.state.g||!a)&&(t.state.parent=r,t.state.g=s,t.state.h=i,t.state.f=o,a||this._addToOpenList(t))}))}const i=[];if(this.opened.length>0){let t=n;for(;t!=r;)i.unshift(t),t=t.state.parent;i.unshift(r)}return i}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},6217:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NODE_DISTANCE_VALUE=void 0;const n=r(8791),a=r(9510);e.default=class{constructor(){this.opened=[],this.closed=[]}createGraphe(t,e){const r=new n.Grid3D;return r.reset(t.numRows,t.numCols,t.numLayers),t.forEach(((t,n,s,i)=>{const o=new a.GameNode;o.state.row=n,o.state.col=s,o.state.layer=i,o.state.g=0,o.state.f=0,o.state.h=0,o.state.walkable=t===e,o.state.parent=null,r.addAt(n,s,i,o)})),r}resetGraphe(t){this.opened=new Array,this.closed=new Array,t.forEach(((t,e,r,n)=>{t&&(t.state.row=e,t.state.col=r,t.state.layer=n,t.state.g=0,t.state.f=0,t.state.h=0,t.state.parent=null)}))}findPath(t,r,n,a=!1){this.opened=new Array,this.closed=new Array,this._addToOpenList(r);let s=!0;for(;s;){if(this.opened.sort(((t,e)=>t.state.f<e.state.f?-1:1)),0===this.opened.length||this.opened[0]===n){s=!1;break}const r=this.opened[0];this._addToCloseList(r);const i=[t.getLeft(r.state.row,r.state.col,r.state.layer),t.getRight(r.state.row,r.state.col,r.state.layer),t.getTop(r.state.row,r.state.col,r.state.layer),t.getBottom(r.state.row,r.state.col,r.state.layer),t.getBack(r.state.row,r.state.col,r.state.layer),t.getFront(r.state.row,r.state.col,r.state.layer)];a&&i.push(t.getTopLeftBack(r.state.row,r.state.col,r.state.layer),t.getTopRightBack(r.state.row,r.state.col,r.state.layer),t.getBottomLeftBack(r.state.row,r.state.col,r.state.layer),t.getBottomRightBack(r.state.row,r.state.col,r.state.layer),t.getTopLeftFront(r.state.row,r.state.col,r.state.layer),t.getTopRightFront(r.state.row,r.state.col,r.state.layer),t.getBottomLeftFront(r.state.row,r.state.col,r.state.layer),t.getBottomRightFront(r.state.row,r.state.col,r.state.layer),t.getTopLeft(r.state.row,r.state.col,r.state.layer),t.getTopRight(r.state.row,r.state.col,r.state.layer),t.getBottomLeft(r.state.row,r.state.col,r.state.layer),t.getBottomRight(r.state.row,r.state.col,r.state.layer)),i.filter((t=>null!==t)).forEach((t=>{if(this._isOnCloseList(t)||!t.state||!t.state.walkable)return;const a=this._isOnOpenList(t),s=r.state.g+e.NODE_DISTANCE_VALUE,i=(Math.abs(n.state.row-t.state.row)+Math.abs(n.state.col-t.state.col)+Math.abs(n.state.layer-t.state.layer))*e.NODE_DISTANCE_VALUE,o=i+s;(a&&s<t.state.g||!a)&&(t.state.parent=r,t.state.g=s,t.state.h=i,t.state.f=o,a||this._addToOpenList(t))}))}const i=[];if(this.opened.length>0){let t=n;for(;t!=r;)i.unshift(t),t=t.state.parent;i.unshift(r)}return i}_addToCloseList(t){const e=this.opened.indexOf(t);e>-1&&this.opened.splice(e,1),this.closed.push(t)}_addToOpenList(t){const e=this.closed.indexOf(t);e>-1&&this.closed.splice(e,1),this.opened.push(t)}_isOnOpenList(t){return this.opened.indexOf(t)>-1}_isOnCloseList(t){return this.closed.indexOf(t)>-1}},e.NODE_DISTANCE_VALUE=10},9170:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this._states=[],this._current=null}addState(t){this._states.push(t)}removeState(t){this._states.splice(this._states.indexOf(t),1)}reset(){this._current=null,this._states=[]}hasState(t){return null!==this.getStateById(t)}getStateById(t){return this._states.find((e=>e.id===t))||null}dispatch(t){const e=this.getCurrentState();if(null===e)return;const r=e.actions.find((e=>e.name===t))||null;if(null===r)return;const n=this.getStateById(r.target);this.setCurrentState(n)}getCurrentState(){return this._current||null}setCurrentState(t){this.hasState(t.id)||this.addState(t),this._current=t}getStates(){return this._states}}},5794:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FiniteStateMachine=void 0;const n=r(9170);e.FiniteStateMachine=n.default},2576:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFinder3D=e.PathFinder2D=e.MazeNodeType=e.Maze3D=e.Maze2D=void 0;const n=r(5430);e.Maze2D=n.default;const a=r(4781);e.Maze3D=a.default;const s=r(8126);e.MazeNodeType=s.default;const i=r(3078);e.PathFinder2D=i.default;const o=r(6217);e.PathFinder3D=o.default},7072:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.makeIsometric=void 0;const n=r(5587);e.makeIsometric=n.default},5587:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5084);e.default=function(t){return class extends t{constructor(...t){super(...t),this.isoNode=new n.default}syncWithNode(){null!==this.isoNode&&(this.y=this.isoNode.isoY-this.isoNode.isoZ-this.isoNode.offsetY,this.x=this.isoNode.isoX-this.isoNode.offsetX)}}}},5084:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(1777),a=r(7690);class s extends a.default{constructor(){super(...arguments),this.isoX=0,this.isoY=0,this.isoZ=0,this.row=0,this.col=0,this.cellWidth=64,this.cellHeight=32,this.width=64,this.height=64}get offsetY(){return this.height-this.cellHeight}get offsetX(){return this.width-this.cellWidth>>1}resetRowAndColFromCoordinates(){const t=n.screenToIso(this.isoX,this.isoY,this.cellWidth,this.cellHeight);this.col=t.col,this.row=t.row}resetCoordinatesFromRowAndCol(){const t=n.isoToScreen(this.row,this.col,this.cellWidth,this.cellHeight);this.isoX=t.x,this.isoY=t.y,this.isoZ=0}}e.default=s},2677:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoNode=void 0;const n=r(5084);e.IsoNode=n.default},3407:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.screenToIso=e.isoToScreen=e.isoSort=void 0;const n=r(1777);Object.defineProperty(e,"isoSort",{enumerable:!0,get:function(){return n.isoSort}}),Object.defineProperty(e,"isoToScreen",{enumerable:!0,get:function(){return n.isoToScreen}}),Object.defineProperty(e,"screenToIso",{enumerable:!0,get:function(){return n.screenToIso}})},1777:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isoSort=e.isoToScreen=e.screenToIso=void 0,e.screenToIso=function(t,e,r,n){let a={row:0,col:0},s=e/n,i=t/r;return a.col=s+i,a.row=s-i,a},e.isoToScreen=function(t,e,r,n){return{x:.5*r*(e-t)>>0,y:(e+t)*(.5*n)>>0}},e.isoSort=function(t,e){return t.isoNode&&e.isoNode?t.isoNode.isoY===e.isoNode.isoY?t.isoNode.isoZ<e.isoNode.isoZ?-1:1:t.isoNode.isoY<e.isoNode.isoY?-1:1:-1}},5043:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=r(5055),a=r(1777);class s extends n.default{constructor(){super(...arguments),this.sortAuto=!1}sort(){this.getChildren().sort(a.isoSort)}render(t){this.sortAuto&&this.sort(),super.render(t)}}e.default=s},8433:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IsoMap=void 0;const n=r(5043);e.IsoMap=n.default},4570:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(6060),a=function(){function t(){this._observers=new Map}return t.prototype.emit=function(t,e){var r=this._observers.get(t)||[],a=new n.default(t,this,e);r.forEach((function(t){t(a)}))},t.prototype.hasObservers=function(t){return void 0!==this._observers.get(t)},t.prototype.unsubscribe=function(t,e){if(this.isObserver(t,e)){var r=this._observers.get(t);r.splice(r.indexOf(e),1)}},t.prototype.isObserver=function(t,e){return(this._observers.get(t)||[]).indexOf(e)>-1},t.prototype.subscribe=function(t,e){if(this.isObserver(t,e))return!1;var r=this._observers.get(t)||[];return r.push(e),this._observers.set(t,r),!0},t.prototype.unsubscribeAll=function(){this._observers=new Map},t}();e.default=a},6060:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){this._type=t,this._emitter=e,this._payload=r}return t.prototype.getEventType=function(){return this._type},t.prototype.getEmitter=function(){return this._emitter},t.prototype.getPayload=function(){return this._payload},t}();e.default=r},4919:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Notification=e.Emitter=void 0;var n=r(4570);e.Emitter=n.default;var a=r(6060);e.Notification=a.default},887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>a,mat2d:()=>s,mat3:()=>i,mat4:()=>o,quat:()=>c,quat2:()=>l,vec2:()=>d,vec3:()=>u,vec4:()=>h});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>_,EPSILON:()=>f,RANDOM:()=>g,equals:()=>v,setMatrixArrayType:()=>m,toRadian:()=>p});var a={};r.r(a),r.d(a,{LDU:()=>N,add:()=>B,adjoint:()=>O,clone:()=>E,copy:()=>x,create:()=>b,determinant:()=>C,equals:()=>Y,exactEquals:()=>V,frob:()=>U,fromRotation:()=>D,fromScaling:()=>I,fromValues:()=>A,identity:()=>y,invert:()=>w,mul:()=>G,multiply:()=>L,multiplyScalar:()=>X,multiplyScalarAndAdd:()=>q,rotate:()=>S,scale:()=>P,set:()=>R,str:()=>F,sub:()=>k,subtract:()=>j,transpose:()=>T});var s={};r.r(s),r.d(s,{add:()=>ht,clone:()=>W,copy:()=>Z,create:()=>Q,determinant:()=>$,equals:()=>_t,exactEquals:()=>ft,frob:()=>ut,fromRotation:()=>at,fromScaling:()=>st,fromTranslation:()=>it,fromValues:()=>z,identity:()=>H,invert:()=>J,mul:()=>gt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>dt,rotate:()=>et,scale:()=>rt,set:()=>K,str:()=>ot,sub:()=>mt,subtract:()=>ct,translate:()=>nt});var i={};r.r(i),r.d(i,{add:()=>Yt,adjoint:()=>Tt,clone:()=>vt,copy:()=>bt,create:()=>Mt,determinant:()=>wt,equals:()=>Qt,exactEquals:()=>kt,frob:()=>Vt,fromMat2d:()=>Ft,fromMat4:()=>pt,fromQuat:()=>Ut,fromRotation:()=>Dt,fromScaling:()=>It,fromTranslation:()=>Pt,fromValues:()=>Et,identity:()=>yt,invert:()=>Rt,mul:()=>Wt,multiply:()=>Ot,multiplyScalar:()=>qt,multiplyScalarAndAdd:()=>Gt,normalFromMat4:()=>Nt,projection:()=>Bt,rotate:()=>Lt,scale:()=>St,set:()=>xt,str:()=>jt,sub:()=>Zt,subtract:()=>Xt,translate:()=>Ct,transpose:()=>At});var o={};r.r(o),r.d(o,{add:()=>Ie,adjoint:()=>ne,clone:()=>zt,copy:()=>Kt,create:()=>Ht,determinant:()=>ae,equals:()=>je,exactEquals:()=>Be,frob:()=>De,fromQuat:()=>Re,fromQuat2:()=>ve,fromRotation:()=>_e,fromRotationTranslation:()=>pe,fromRotationTranslationScale:()=>ye,fromRotationTranslationScaleOrigin:()=>Ae,fromScaling:()=>fe,fromTranslation:()=>de,fromValues:()=>Jt,fromXRotation:()=>ge,fromYRotation:()=>me,fromZRotation:()=>Me,frustum:()=>Te,getRotation:()=>xe,getScaling:()=>Ee,getTranslation:()=>be,identity:()=>te,invert:()=>re,lookAt:()=>Le,mul:()=>Ve,multiply:()=>se,multiplyScalar:()=>Ue,multiplyScalarAndAdd:()=>Ne,ortho:()=>Ce,perspective:()=>we,perspectiveFromFieldOfView:()=>Oe,rotate:()=>ue,rotateX:()=>he,rotateY:()=>ce,rotateZ:()=>le,scale:()=>oe,set:()=>$t,str:()=>Pe,sub:()=>Ye,subtract:()=>Fe,targetTo:()=>Se,translate:()=>ie,transpose:()=>ee});var u={};r.r(u),r.d(u,{add:()=>Ze,angle:()=>yr,bezier:()=>gr,ceil:()=>Je,clone:()=>qe,copy:()=>Qe,create:()=>Xe,cross:()=>dr,dist:()=>Pr,distance:()=>sr,div:()=>Sr,divide:()=>Ke,dot:()=>lr,equals:()=>wr,exactEquals:()=>Tr,floor:()=>$e,forEach:()=>Ur,fromValues:()=>ke,hermite:()=>_r,inverse:()=>hr,len:()=>Ir,length:()=>Ge,lerp:()=>fr,max:()=>er,min:()=>tr,mul:()=>Lr,multiply:()=>ze,negate:()=>ur,normalize:()=>cr,random:()=>mr,rotateX:()=>br,rotateY:()=>Er,rotateZ:()=>xr,round:()=>rr,scale:()=>nr,scaleAndAdd:()=>ar,set:()=>We,sqrDist:()=>Dr,sqrLen:()=>Fr,squaredDistance:()=>ir,squaredLength:()=>or,str:()=>Rr,sub:()=>Cr,subtract:()=>He,transformMat3:()=>pr,transformMat4:()=>Mr,transformQuat:()=>vr,zero:()=>Ar});var h={};r.r(h),r.d(h,{add:()=>Xr,ceil:()=>Qr,clone:()=>Br,copy:()=>Vr,create:()=>Nr,cross:()=>un,dist:()=>bn,distance:()=>$r,div:()=>vn,divide:()=>kr,dot:()=>on,equals:()=>mn,exactEquals:()=>gn,floor:()=>Wr,forEach:()=>An,fromValues:()=>jr,inverse:()=>an,len:()=>xn,length:()=>en,lerp:()=>hn,max:()=>Hr,min:()=>Zr,mul:()=>pn,multiply:()=>Gr,negate:()=>nn,normalize:()=>sn,random:()=>cn,round:()=>zr,scale:()=>Kr,scaleAndAdd:()=>Jr,set:()=>Yr,sqrDist:()=>En,sqrLen:()=>yn,squaredDistance:()=>tn,squaredLength:()=>rn,str:()=>_n,sub:()=>Mn,subtract:()=>qr,transformMat4:()=>ln,transformQuat:()=>dn,zero:()=>fn});var c={};r.r(c),r.d(c,{add:()=>ea,calculateW:()=>In,clone:()=>Kn,conjugate:()=>Yn,copy:()=>$n,create:()=>Rn,dot:()=>aa,equals:()=>da,exactEquals:()=>la,exp:()=>Fn,fromEuler:()=>qn,fromMat3:()=>Xn,fromValues:()=>Jn,getAngle:()=>Cn,getAxisAngle:()=>On,identity:()=>Tn,invert:()=>Vn,len:()=>oa,length:()=>ia,lerp:()=>sa,ln:()=>Un,mul:()=>ra,multiply:()=>Ln,normalize:()=>ca,pow:()=>Nn,random:()=>jn,rotateX:()=>Sn,rotateY:()=>Pn,rotateZ:()=>Dn,rotationTo:()=>fa,scale:()=>na,set:()=>ta,setAxes:()=>ga,setAxisAngle:()=>wn,slerp:()=>Bn,sqlerp:()=>_a,sqrLen:()=>ha,squaredLength:()=>ua,str:()=>Gn});var l={};r.r(l),r.d(l,{add:()=>ja,clone:()=>Ma,conjugate:()=>Qa,copy:()=>Aa,create:()=>ma,dot:()=>qa,equals:()=>ts,exactEquals:()=>$a,fromMat4:()=>ya,fromRotation:()=>xa,fromRotationTranslation:()=>ba,fromRotationTranslationValues:()=>va,fromTranslation:()=>Ea,fromValues:()=>pa,getDual:()=>Oa,getReal:()=>wa,getTranslation:()=>Sa,identity:()=>Ra,invert:()=>ka,len:()=>Za,length:()=>Wa,lerp:()=>Ga,mul:()=>Ya,multiply:()=>Va,normalize:()=>Ka,rotateAroundAxis:()=>Ba,rotateByQuatAppend:()=>Ua,rotateByQuatPrepend:()=>Na,rotateX:()=>Da,rotateY:()=>Ia,rotateZ:()=>Fa,scale:()=>Xa,set:()=>Ta,setDual:()=>La,setReal:()=>Ca,sqrLen:()=>za,squaredLength:()=>Ha,str:()=>Ja,translate:()=>Pa});var d={};r.r(d),r.d(d,{add:()=>is,angle:()=>Ds,ceil:()=>cs,clone:()=>rs,copy:()=>as,create:()=>es,cross:()=>Rs,dist:()=>Xs,distance:()=>Ms,div:()=>Ys,divide:()=>hs,dot:()=>As,equals:()=>Ns,exactEquals:()=>Us,floor:()=>ls,forEach:()=>ks,fromValues:()=>ns,inverse:()=>xs,len:()=>Bs,length:()=>vs,lerp:()=>Ts,max:()=>fs,min:()=>ds,mul:()=>Vs,multiply:()=>us,negate:()=>Es,normalize:()=>ys,random:()=>ws,rotate:()=>Ps,round:()=>_s,scale:()=>gs,scaleAndAdd:()=>ms,set:()=>ss,sqrDist:()=>qs,sqrLen:()=>Gs,squaredDistance:()=>ps,squaredLength:()=>bs,str:()=>Fs,sub:()=>js,subtract:()=>os,transformMat2:()=>Os,transformMat2d:()=>Cs,transformMat3:()=>Ls,transformMat4:()=>Ss,zero:()=>Is});var f=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,g=Math.random;function m(t){_=t}var M=Math.PI/180;function p(t){return t*M}function v(t,e){return Math.abs(t-e)<=f*Math.max(1,Math.abs(t),Math.abs(e))}function b(){var t=new _(4);return _!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function E(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){var a=new _(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function R(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function T(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function w(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*s-a*n;return i?(i=1/i,t[0]=s*i,t[1]=-n*i,t[2]=-a*i,t[3]=r*i,t):null}function O(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function C(t){return t[0]*t[3]-t[2]*t[1]}function L(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*o+s*u,t[1]=a*o+i*u,t[2]=n*h+s*c,t[3]=a*h+i*c,t}function S(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+s*o,t[1]=a*u+i*o,t[2]=n*-o+s*u,t[3]=a*-o+i*u,t}function P(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],u=r[1];return t[0]=n*o,t[1]=a*o,t[2]=s*u,t[3]=i*u,t}function D(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function F(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U(t){return Math.hypot(t[0],t[1],t[2],t[3])}function N(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function B(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Y(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=f*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-h)<=f*Math.max(1,Math.abs(s),Math.abs(h))}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function q(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=L,k=j;function Q(){var t=new _(6);return _!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function W(t){var e=new _(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z(t,e,r,n,a,s){var i=new _(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=a,i[5]=s,i}function K(t,e,r,n,a,s,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t}function J(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=r*s-n*a;return u?(u=1/u,t[0]=s*u,t[1]=-n*u,t[2]=-a*u,t[3]=r*u,t[4]=(a*o-s*i)*u,t[5]=(n*i-r*o)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=r[0],c=r[1],l=r[2],d=r[3],f=r[4],_=r[5];return t[0]=n*h+s*c,t[1]=a*h+i*c,t[2]=n*l+s*d,t[3]=a*l+i*d,t[4]=n*f+s*_+o,t[5]=a*f+i*_+u,t}function et(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=Math.sin(r),c=Math.cos(r);return t[0]=n*c+s*h,t[1]=a*c+i*h,t[2]=n*-h+s*c,t[3]=a*-h+i*c,t[4]=o,t[5]=u,t}function rt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n*h,t[1]=a*h,t[2]=s*c,t[3]=i*c,t[4]=o,t[5]=u,t}function nt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=n*h+s*c+o,t[5]=a*h+i*c+u,t}function at(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function st(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ht(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ct(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function _t(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],u=e[0],h=e[1],c=e[2],l=e[3],d=e[4],_=e[5];return Math.abs(r-u)<=f*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-h)<=f*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-l)<=f*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-d)<=f*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-_)<=f*Math.max(1,Math.abs(o),Math.abs(_))}var gt=tt,mt=ct;function Mt(){var t=new _(9);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function pt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new _(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Et(t,e,r,n,a,s,i,o,u){var h=new _(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=a,h[5]=s,h[6]=i,h[7]=o,h[8]=u,h}function xt(t,e,r,n,a,s,i,o,u,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=u,t[8]=h,t}function yt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Rt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=c*i-o*h,d=-c*s+o*u,f=h*s-i*u,_=r*l+n*d+a*f;return _?(_=1/_,t[0]=l*_,t[1]=(-c*n+a*h)*_,t[2]=(o*n-a*i)*_,t[3]=d*_,t[4]=(c*r-a*u)*_,t[5]=(-o*r+a*s)*_,t[6]=f*_,t[7]=(-h*r+n*u)*_,t[8]=(i*r-n*s)*_,t):null}function Tt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],h=e[7],c=e[8];return t[0]=i*c-o*h,t[1]=a*h-n*c,t[2]=n*o-a*i,t[3]=o*u-s*c,t[4]=r*c-a*u,t[5]=a*s-r*o,t[6]=s*h-i*u,t[7]=n*u-r*h,t[8]=r*i-n*s,t}function wt(t){var e=t[0],r=t[1],n=t[2],a=t[3],s=t[4],i=t[5],o=t[6],u=t[7],h=t[8];return e*(h*s-i*u)+r*(-h*a+i*o)+n*(u*a-s*o)}function Ot(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],d=r[0],f=r[1],_=r[2],g=r[3],m=r[4],M=r[5],p=r[6],v=r[7],b=r[8];return t[0]=d*n+f*i+_*h,t[1]=d*a+f*o+_*c,t[2]=d*s+f*u+_*l,t[3]=g*n+m*i+M*h,t[4]=g*a+m*o+M*c,t[5]=g*s+m*u+M*l,t[6]=p*n+v*i+b*h,t[7]=p*a+v*o+b*c,t[8]=p*s+v*u+b*l,t}function Ct(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],d=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=o,t[5]=u,t[6]=d*n+f*i+h,t[7]=d*a+f*o+c,t[8]=d*s+f*u+l,t}function Lt(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*n+d*i,t[1]=f*a+d*o,t[2]=f*s+d*u,t[3]=f*i-d*n,t[4]=f*o-d*a,t[5]=f*u-d*s,t[6]=h,t[7]=c,t[8]=l,t}function St(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ut(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r+r,o=n+n,u=a+a,h=r*i,c=n*i,l=n*o,d=a*i,f=a*o,_=a*u,g=s*i,m=s*o,M=s*u;return t[0]=1-l-_,t[3]=c-M,t[6]=d+m,t[1]=c+M,t[4]=1-h-_,t[7]=f-g,t[2]=d-m,t[5]=f+g,t[8]=1-h-l,t}function Nt(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],M=e[15],p=r*o-n*i,v=r*u-a*i,b=r*h-s*i,E=n*u-a*o,x=n*h-s*o,y=a*h-s*u,A=c*g-l*_,R=c*m-d*_,T=c*M-f*_,w=l*m-d*g,O=l*M-f*g,C=d*M-f*m,L=p*C-v*O+b*w+E*T-x*R+y*A;return L?(L=1/L,t[0]=(o*C-u*O+h*w)*L,t[1]=(u*T-i*C-h*R)*L,t[2]=(i*O-o*T+h*A)*L,t[3]=(a*O-n*C-s*w)*L,t[4]=(r*C-a*T+s*R)*L,t[5]=(n*T-r*O-s*A)*L,t[6]=(g*y-m*x+M*E)*L,t[7]=(m*b-_*y-M*v)*L,t[8]=(_*x-g*b+M*p)*L,t):null}function Bt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Vt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Yt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Xt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function qt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Gt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function kt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Qt(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],u=t[6],h=t[7],c=t[8],l=e[0],d=e[1],_=e[2],g=e[3],m=e[4],M=e[5],p=e[6],v=e[7],b=e[8];return Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-_)<=f*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(i-m)<=f*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-M)<=f*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(u-p)<=f*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(h-v)<=f*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(c-b)<=f*Math.max(1,Math.abs(c),Math.abs(b))}var Wt=Ot,Zt=Xt;function Ht(){var t=new _(16);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function zt(t){var e=new _(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,r,n,a,s,i,o,u,h,c,l,d,f,g,m){var M=new _(16);return M[0]=t,M[1]=e,M[2]=r,M[3]=n,M[4]=a,M[5]=s,M[6]=i,M[7]=o,M[8]=u,M[9]=h,M[10]=c,M[11]=l,M[12]=d,M[13]=f,M[14]=g,M[15]=m,M}function $t(t,e,r,n,a,s,i,o,u,h,c,l,d,f,_,g,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=u,t[8]=h,t[9]=c,t[10]=l,t[11]=d,t[12]=f,t[13]=_,t[14]=g,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],s=e[6],i=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=a,t[13]=i,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],M=e[15],p=r*o-n*i,v=r*u-a*i,b=r*h-s*i,E=n*u-a*o,x=n*h-s*o,y=a*h-s*u,A=c*g-l*_,R=c*m-d*_,T=c*M-f*_,w=l*m-d*g,O=l*M-f*g,C=d*M-f*m,L=p*C-v*O+b*w+E*T-x*R+y*A;return L?(L=1/L,t[0]=(o*C-u*O+h*w)*L,t[1]=(a*O-n*C-s*w)*L,t[2]=(g*y-m*x+M*E)*L,t[3]=(d*x-l*y-f*E)*L,t[4]=(u*T-i*C-h*R)*L,t[5]=(r*C-a*T+s*R)*L,t[6]=(m*b-_*y-M*v)*L,t[7]=(c*y-d*b+f*v)*L,t[8]=(i*O-o*T+h*A)*L,t[9]=(n*T-r*O-s*A)*L,t[10]=(_*x-g*b+M*p)*L,t[11]=(l*b-c*x-f*p)*L,t[12]=(o*R-i*w-u*A)*L,t[13]=(r*w-n*R+a*A)*L,t[14]=(g*v-_*E-m*p)*L,t[15]=(c*E-l*v+d*p)*L,t):null}function ne(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],u=e[6],h=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],M=e[15];return t[0]=o*(d*M-f*m)-l*(u*M-h*m)+g*(u*f-h*d),t[1]=-(n*(d*M-f*m)-l*(a*M-s*m)+g*(a*f-s*d)),t[2]=n*(u*M-h*m)-o*(a*M-s*m)+g*(a*h-s*u),t[3]=-(n*(u*f-h*d)-o*(a*f-s*d)+l*(a*h-s*u)),t[4]=-(i*(d*M-f*m)-c*(u*M-h*m)+_*(u*f-h*d)),t[5]=r*(d*M-f*m)-c*(a*M-s*m)+_*(a*f-s*d),t[6]=-(r*(u*M-h*m)-i*(a*M-s*m)+_*(a*h-s*u)),t[7]=r*(u*f-h*d)-i*(a*f-s*d)+c*(a*h-s*u),t[8]=i*(l*M-f*g)-c*(o*M-h*g)+_*(o*f-h*l),t[9]=-(r*(l*M-f*g)-c*(n*M-s*g)+_*(n*f-s*l)),t[10]=r*(o*M-h*g)-i*(n*M-s*g)+_*(n*h-s*o),t[11]=-(r*(o*f-h*l)-i*(n*f-s*l)+c*(n*h-s*o)),t[12]=-(i*(l*m-d*g)-c*(o*m-u*g)+_*(o*d-u*l)),t[13]=r*(l*m-d*g)-c*(n*m-a*g)+_*(n*d-a*l),t[14]=-(r*(o*m-u*g)-i*(n*m-a*g)+_*(n*u-a*o)),t[15]=r*(o*d-u*l)-i*(n*d-a*l)+c*(n*u-a*o),t}function ae(t){var e=t[0],r=t[1],n=t[2],a=t[3],s=t[4],i=t[5],o=t[6],u=t[7],h=t[8],c=t[9],l=t[10],d=t[11],f=t[12],_=t[13],g=t[14],m=t[15];return(e*i-r*s)*(l*m-d*g)-(e*o-n*s)*(c*m-d*_)+(e*u-a*s)*(c*g-l*_)+(r*o-n*i)*(h*m-d*f)-(r*u-a*i)*(h*g-l*f)+(n*u-a*o)*(h*_-c*f)}function se(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],g=e[12],m=e[13],M=e[14],p=e[15],v=r[0],b=r[1],E=r[2],x=r[3];return t[0]=v*n+b*o+E*l+x*g,t[1]=v*a+b*u+E*d+x*m,t[2]=v*s+b*h+E*f+x*M,t[3]=v*i+b*c+E*_+x*p,v=r[4],b=r[5],E=r[6],x=r[7],t[4]=v*n+b*o+E*l+x*g,t[5]=v*a+b*u+E*d+x*m,t[6]=v*s+b*h+E*f+x*M,t[7]=v*i+b*c+E*_+x*p,v=r[8],b=r[9],E=r[10],x=r[11],t[8]=v*n+b*o+E*l+x*g,t[9]=v*a+b*u+E*d+x*m,t[10]=v*s+b*h+E*f+x*M,t[11]=v*i+b*c+E*_+x*p,v=r[12],b=r[13],E=r[14],x=r[15],t[12]=v*n+b*o+E*l+x*g,t[13]=v*a+b*u+E*d+x*m,t[14]=v*s+b*h+E*f+x*M,t[15]=v*i+b*c+E*_+x*p,t}function ie(t,e,r){var n,a,s,i,o,u,h,c,l,d,f,_,g=r[0],m=r[1],M=r[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*M+e[12],t[13]=e[1]*g+e[5]*m+e[9]*M+e[13],t[14]=e[2]*g+e[6]*m+e[10]*M+e[14],t[15]=e[3]*g+e[7]*m+e[11]*M+e[15]):(n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=n*g+o*m+l*M+e[12],t[13]=a*g+u*m+d*M+e[13],t[14]=s*g+h*m+f*M+e[14],t[15]=i*g+c*m+_*M+e[15]),t}function oe(t,e,r){var n=r[0],a=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,r,n){var a,s,i,o,u,h,c,l,d,_,g,m,M,p,v,b,E,x,y,A,R,T,w,O,C=n[0],L=n[1],S=n[2],P=Math.hypot(C,L,S);return P<f?null:(C*=P=1/P,L*=P,S*=P,a=Math.sin(r),i=1-(s=Math.cos(r)),o=e[0],u=e[1],h=e[2],c=e[3],l=e[4],d=e[5],_=e[6],g=e[7],m=e[8],M=e[9],p=e[10],v=e[11],b=C*C*i+s,E=L*C*i+S*a,x=S*C*i-L*a,y=C*L*i-S*a,A=L*L*i+s,R=S*L*i+C*a,T=C*S*i+L*a,w=L*S*i-C*a,O=S*S*i+s,t[0]=o*b+l*E+m*x,t[1]=u*b+d*E+M*x,t[2]=h*b+_*E+p*x,t[3]=c*b+g*E+v*x,t[4]=o*y+l*A+m*R,t[5]=u*y+d*A+M*R,t[6]=h*y+_*A+p*R,t[7]=c*y+g*A+v*R,t[8]=o*T+l*w+m*O,t[9]=u*T+d*w+M*O,t[10]=h*T+_*w+p*O,t[11]=c*T+g*w+v*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function he(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[4],i=e[5],o=e[6],u=e[7],h=e[8],c=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*a+h*n,t[5]=i*a+c*n,t[6]=o*a+l*n,t[7]=u*a+d*n,t[8]=h*a-s*n,t[9]=c*a-i*n,t[10]=l*a-o*n,t[11]=d*a-u*n,t}function ce(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[0],i=e[1],o=e[2],u=e[3],h=e[8],c=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a-h*n,t[1]=i*a-c*n,t[2]=o*a-l*n,t[3]=u*a-d*n,t[8]=s*n+h*a,t[9]=i*n+c*a,t[10]=o*n+l*a,t[11]=u*n+d*a,t}function le(t,e,r){var n=Math.sin(r),a=Math.cos(r),s=e[0],i=e[1],o=e[2],u=e[3],h=e[4],c=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a+h*n,t[1]=i*a+c*n,t[2]=o*a+l*n,t[3]=u*a+d*n,t[4]=h*a-s*n,t[5]=c*a-i*n,t[6]=l*a-o*n,t[7]=d*a-u*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function fe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e,r){var n,a,s,i=r[0],o=r[1],u=r[2],h=Math.hypot(i,o,u);return h<f?null:(i*=h=1/h,o*=h,u*=h,n=Math.sin(e),s=1-(a=Math.cos(e)),t[0]=i*i*s+a,t[1]=o*i*s+u*n,t[2]=u*i*s-o*n,t[3]=0,t[4]=i*o*s-u*n,t[5]=o*o*s+a,t[6]=u*o*s+i*n,t[7]=0,t[8]=i*u*s+o*n,t[9]=o*u*s-i*n,t[10]=u*u*s+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ge(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=n+n,u=a+a,h=s+s,c=n*o,l=n*u,d=n*h,f=a*u,_=a*h,g=s*h,m=i*o,M=i*u,p=i*h;return t[0]=1-(f+g),t[1]=l+p,t[2]=d-M,t[3]=0,t[4]=l-p,t[5]=1-(c+g),t[6]=_+m,t[7]=0,t[8]=d+M,t[9]=_-m,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ve(t,e){var r=new _(3),n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=n*n+a*a+s*s+i*i;return l>0?(r[0]=2*(o*i+c*n+u*s-h*a)/l,r[1]=2*(u*i+c*a+h*n-o*s)/l,r[2]=2*(h*i+c*s+o*a-u*n)/l):(r[0]=2*(o*i+c*n+u*s-h*a),r[1]=2*(u*i+c*a+h*n-o*s),r[2]=2*(h*i+c*s+o*a-u*n)),pe(t,e,r),t}function be(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ee(t,e){var r=e[0],n=e[1],a=e[2],s=e[4],i=e[5],o=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(r,n,a),t[1]=Math.hypot(s,i,o),t[2]=Math.hypot(u,h,c),t}function xe(t,e){var r=new _(3);Ee(r,e);var n=1/r[0],a=1/r[1],s=1/r[2],i=e[0]*n,o=e[1]*a,u=e[2]*s,h=e[4]*n,c=e[5]*a,l=e[6]*s,d=e[8]*n,f=e[9]*a,g=e[10]*s,m=i+c+g,M=0;return m>0?(M=2*Math.sqrt(m+1),t[3]=.25*M,t[0]=(l-f)/M,t[1]=(d-u)/M,t[2]=(o-h)/M):i>c&&i>g?(M=2*Math.sqrt(1+i-c-g),t[3]=(l-f)/M,t[0]=.25*M,t[1]=(o+h)/M,t[2]=(d+u)/M):c>g?(M=2*Math.sqrt(1+c-i-g),t[3]=(d-u)/M,t[0]=(o+h)/M,t[1]=.25*M,t[2]=(l+f)/M):(M=2*Math.sqrt(1+g-i-c),t[3]=(o-h)/M,t[0]=(d+u)/M,t[1]=(l+f)/M,t[2]=.25*M),t}function ye(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=e[3],u=a+a,h=s+s,c=i+i,l=a*u,d=a*h,f=a*c,_=s*h,g=s*c,m=i*c,M=o*u,p=o*h,v=o*c,b=n[0],E=n[1],x=n[2];return t[0]=(1-(_+m))*b,t[1]=(d+v)*b,t[2]=(f-p)*b,t[3]=0,t[4]=(d-v)*E,t[5]=(1-(l+m))*E,t[6]=(g+M)*E,t[7]=0,t[8]=(f+p)*x,t[9]=(g-M)*x,t[10]=(1-(l+_))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,a){var s=e[0],i=e[1],o=e[2],u=e[3],h=s+s,c=i+i,l=o+o,d=s*h,f=s*c,_=s*l,g=i*c,m=i*l,M=o*l,p=u*h,v=u*c,b=u*l,E=n[0],x=n[1],y=n[2],A=a[0],R=a[1],T=a[2],w=(1-(g+M))*E,O=(f+b)*E,C=(_-v)*E,L=(f-b)*x,S=(1-(d+M))*x,P=(m+p)*x,D=(_+v)*y,I=(m-p)*y,F=(1-(d+g))*y;return t[0]=w,t[1]=O,t[2]=C,t[3]=0,t[4]=L,t[5]=S,t[6]=P,t[7]=0,t[8]=D,t[9]=I,t[10]=F,t[11]=0,t[12]=r[0]+A-(w*A+L*R+D*T),t[13]=r[1]+R-(O*A+S*R+I*T),t[14]=r[2]+T-(C*A+P*R+F*T),t[15]=1,t}function Re(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r+r,o=n+n,u=a+a,h=r*i,c=n*i,l=n*o,d=a*i,f=a*o,_=a*u,g=s*i,m=s*o,M=s*u;return t[0]=1-l-_,t[1]=c+M,t[2]=d-m,t[3]=0,t[4]=c-M,t[5]=1-h-_,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Te(t,e,r,n,a,s,i){var o=1/(r-e),u=1/(a-n),h=1/(s-i);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(a+n)*u,t[10]=(i+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*s*2*h,t[15]=0,t}function we(t,e,r,n,a){var s,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(s=1/(n-a),t[10]=(a+n)*s,t[14]=2*a*n*s):(t[10]=-1,t[14]=-2*n),t}function Oe(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+o),h=2/(a+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(i-o)*u*.5,t[9]=(a-s)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ce(t,e,r,n,a,s,i){var o=1/(e-r),u=1/(n-a),h=1/(s-i);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*o,t[13]=(a+n)*u,t[14]=(i+s)*h,t[15]=1,t}function Le(t,e,r,n){var a,s,i,o,u,h,c,l,d,_,g=e[0],m=e[1],M=e[2],p=n[0],v=n[1],b=n[2],E=r[0],x=r[1],y=r[2];return Math.abs(g-E)<f&&Math.abs(m-x)<f&&Math.abs(M-y)<f?te(t):(c=g-E,l=m-x,d=M-y,a=v*(d*=_=1/Math.hypot(c,l,d))-b*(l*=_),s=b*(c*=_)-p*d,i=p*l-v*c,(_=Math.hypot(a,s,i))?(a*=_=1/_,s*=_,i*=_):(a=0,s=0,i=0),o=l*i-d*s,u=d*a-c*i,h=c*s-l*a,(_=Math.hypot(o,u,h))?(o*=_=1/_,u*=_,h*=_):(o=0,u=0,h=0),t[0]=a,t[1]=o,t[2]=c,t[3]=0,t[4]=s,t[5]=u,t[6]=l,t[7]=0,t[8]=i,t[9]=h,t[10]=d,t[11]=0,t[12]=-(a*g+s*m+i*M),t[13]=-(o*g+u*m+h*M),t[14]=-(c*g+l*m+d*M),t[15]=1,t)}function Se(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=n[0],u=n[1],h=n[2],c=a-r[0],l=s-r[1],d=i-r[2],f=c*c+l*l+d*d;f>0&&(c*=f=1/Math.sqrt(f),l*=f,d*=f);var _=u*d-h*l,g=h*c-o*d,m=o*l-u*c;return(f=_*_+g*g+m*m)>0&&(_*=f=1/Math.sqrt(f),g*=f,m*=f),t[0]=_,t[1]=g,t[2]=m,t[3]=0,t[4]=l*m-d*g,t[5]=d*_-c*m,t[6]=c*g-l*_,t[7]=0,t[8]=c,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=s,t[14]=i,t[15]=1,t}function Pe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ie(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Fe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ue(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ne(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function je(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],u=t[6],h=t[7],c=t[8],l=t[9],d=t[10],_=t[11],g=t[12],m=t[13],M=t[14],p=t[15],v=e[0],b=e[1],E=e[2],x=e[3],y=e[4],A=e[5],R=e[6],T=e[7],w=e[8],O=e[9],C=e[10],L=e[11],S=e[12],P=e[13],D=e[14],I=e[15];return Math.abs(r-v)<=f*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=f*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-E)<=f*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-x)<=f*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(i-y)<=f*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-A)<=f*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(u-R)<=f*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(h-T)<=f*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(c-w)<=f*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-O)<=f*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(d-C)<=f*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(_-L)<=f*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(g-S)<=f*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(m-P)<=f*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(M-D)<=f*Math.max(1,Math.abs(M),Math.abs(D))&&Math.abs(p-I)<=f*Math.max(1,Math.abs(p),Math.abs(I))}var Ve=se,Ye=Fe;function Xe(){var t=new _(3);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qe(t){var e=new _(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ge(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function ke(t,e,r){var n=new _(3);return n[0]=t,n[1]=e,n[2]=r,n}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function We(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ze(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function He(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function ze(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ke(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ar(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function sr(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.hypot(r,n,a)}function ir(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function or(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function hr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function cr(t,e){var r=e[0],n=e[1],a=e[2],s=r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function lr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dr(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[0],o=r[1],u=r[2];return t[0]=a*u-s*o,t[1]=s*i-n*u,t[2]=n*o-a*i,t}function fr(t,e,r,n){var a=e[0],s=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t[2]=i+n*(r[2]-i),t}function _r(t,e,r,n,a,s){var i=s*s,o=i*(2*s-3)+1,u=i*(s-2)+s,h=i*(s-1),c=i*(3-2*s);return t[0]=e[0]*o+r[0]*u+n[0]*h+a[0]*c,t[1]=e[1]*o+r[1]*u+n[1]*h+a[1]*c,t[2]=e[2]*o+r[2]*u+n[2]*h+a[2]*c,t}function gr(t,e,r,n,a,s){var i=1-s,o=i*i,u=s*s,h=o*i,c=3*s*o,l=3*u*i,d=u*s;return t[0]=e[0]*h+r[0]*c+n[0]*l+a[0]*d,t[1]=e[1]*h+r[1]*c+n[1]*l+a[1]*d,t[2]=e[2]*h+r[2]*c+n[2]*l+a[2]*d,t}function mr(t,e){e=e||1;var r=2*g()*Math.PI,n=2*g()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t}function Mr(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[3]*n+r[7]*a+r[11]*s+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*s+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*s+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*s+r[14])/i,t}function pr(t,e,r){var n=e[0],a=e[1],s=e[2];return t[0]=n*r[0]+a*r[3]+s*r[6],t[1]=n*r[1]+a*r[4]+s*r[7],t[2]=n*r[2]+a*r[5]+s*r[8],t}function vr(t,e,r){var n=r[0],a=r[1],s=r[2],i=r[3],o=e[0],u=e[1],h=e[2],c=a*h-s*u,l=s*o-n*h,d=n*u-a*o,f=a*d-s*l,_=s*c-n*d,g=n*l-a*c,m=2*i;return c*=m,l*=m,d*=m,f*=2,_*=2,g*=2,t[0]=o+c+f,t[1]=u+l+_,t[2]=h+d+g,t}function br(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Er(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function xr(t,e,r,n){var a=[],s=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function yr(t,e){var r=t[0],n=t[1],a=t[2],s=e[0],i=e[1],o=e[2],u=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(s*s+i*i+o*o),h=u&&lr(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function Ar(t){return t[0]=0,t[1]=0,t[2]=0,t}function Rr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function wr(t,e){var r=t[0],n=t[1],a=t[2],s=e[0],i=e[1],o=e[2];return Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=f*Math.max(1,Math.abs(a),Math.abs(o))}var Or,Cr=He,Lr=ze,Sr=Ke,Pr=sr,Dr=ir,Ir=Ge,Fr=or,Ur=(Or=Xe(),function(t,e,r,n,a,s){var i,o;for(e||(e=3),r||(r=0),o=n?Math.min(n*e+r,t.length):t.length,i=r;i<o;i+=e)Or[0]=t[i],Or[1]=t[i+1],Or[2]=t[i+2],a(Or,Or,s),t[i]=Or[0],t[i+1]=Or[1],t[i+2]=Or[2];return t});function Nr(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Br(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jr(t,e,r,n){var a=new _(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function Vr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Yr(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function Xr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function qr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Gr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function kr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Qr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Wr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Zr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Hr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function zr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Kr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Jr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function $r(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return Math.hypot(r,n,a,s)}function tn(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+a*a+s*s}function en(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.hypot(e,r,n,a)}function rn(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function nn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function an(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*r+n*n+a*a+s*s;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=s*i,t}function on(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function un(t,e,r,n){var a=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],o=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],h=r[2]*n[3]-r[3]*n[2],c=e[0],l=e[1],d=e[2],f=e[3];return t[0]=l*h-d*u+f*o,t[1]=-c*h+d*i-f*s,t[2]=c*u-l*i+f*a,t[3]=-c*o+l*s-d*a,t}function hn(t,e,r,n){var a=e[0],s=e[1],i=e[2],o=e[3];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t[2]=i+n*(r[2]-i),t[3]=o+n*(r[3]-o),t}function cn(t,e){var r,n,a,s,i,o;e=e||1;do{i=(r=2*g()-1)*r+(n=2*g()-1)*n}while(i>=1);do{o=(a=2*g()-1)*a+(s=2*g()-1)*s}while(o>=1);var u=Math.sqrt((1-i)/o);return t[0]=e*r,t[1]=e*n,t[2]=e*a*u,t[3]=e*s*u,t}function ln(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*s+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*s+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*s+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*s+r[15]*i,t}function dn(t,e,r){var n=e[0],a=e[1],s=e[2],i=r[0],o=r[1],u=r[2],h=r[3],c=h*n+o*s-u*a,l=h*a+u*n-i*s,d=h*s+i*a-o*n,f=-i*n-o*a-u*s;return t[0]=c*h+f*-i+l*-u-d*-o,t[1]=l*h+f*-o+d*-i-c*-u,t[2]=d*h+f*-u+c*-o-l*-i,t[3]=e[3],t}function fn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _n(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mn(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=f*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-h)<=f*Math.max(1,Math.abs(s),Math.abs(h))}var Mn=qr,pn=Gr,vn=kr,bn=$r,En=tn,xn=en,yn=rn,An=function(){var t=Nr();return function(e,r,n,a,s,i){var o,u;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,i),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function Rn(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function wn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function On(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>f?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Cn(t,e){var r=aa(t,e);return Math.acos(2*r*r-1)}function Ln(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+i*o+a*h-s*u,t[1]=a*c+i*u+s*o-n*h,t[2]=s*c+i*h+n*u-a*o,t[3]=i*c-n*o-a*u-s*h,t}function Sn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*o,t[1]=a*u+s*o,t[2]=s*u-a*o,t[3]=i*u-n*o,t}function Pn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u-s*o,t[1]=a*u+i*o,t[2]=s*u+n*o,t[3]=i*u-a*o,t}function Dn(t,e,r){r*=.5;var n=e[0],a=e[1],s=e[2],i=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*o,t[1]=a*u-n*o,t[2]=s*u+i*o,t[3]=i*u-s*o,t}function In(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t}function Fn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=Math.sqrt(r*r+n*n+a*a),o=Math.exp(s),u=i>0?o*Math.sin(i)/i:0;return t[0]=r*u,t[1]=n*u,t[2]=a*u,t[3]=o*Math.cos(i),t}function Un(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=Math.sqrt(r*r+n*n+a*a),o=i>0?Math.atan2(i,s)/i:0;return t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=.5*Math.log(r*r+n*n+a*a+s*s),t}function Nn(t,e,r){return Un(t,e),na(t,t,r),Fn(t,t),t}function Bn(t,e,r,n){var a,s,i,o,u,h=e[0],c=e[1],l=e[2],d=e[3],_=r[0],g=r[1],m=r[2],M=r[3];return(s=h*_+c*g+l*m+d*M)<0&&(s=-s,_=-_,g=-g,m=-m,M=-M),1-s>f?(a=Math.acos(s),i=Math.sin(a),o=Math.sin((1-n)*a)/i,u=Math.sin(n*a)/i):(o=1-n,u=n),t[0]=o*h+u*_,t[1]=o*c+u*g,t[2]=o*l+u*m,t[3]=o*d+u*M,t}function jn(t){var e=g(),r=g(),n=g(),a=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=s*Math.sin(2*Math.PI*n),t[3]=s*Math.cos(2*Math.PI*n),t}function Vn(t,e){var r=e[0],n=e[1],a=e[2],s=e[3],i=r*r+n*n+a*a+s*s,o=i?1/i:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-a*o,t[3]=s*o,t}function Yn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Xn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var s=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*s+s]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*s+i]-e[3*i+s])*r,t[s]=(e[3*s+a]+e[3*a+s])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}function qn(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var s=Math.sin(e),i=Math.cos(e),o=Math.sin(r),u=Math.cos(r),h=Math.sin(n),c=Math.cos(n);return t[0]=s*u*c-i*o*h,t[1]=i*o*c+s*u*h,t[2]=i*u*h-s*o*c,t[3]=i*u*c+s*o*h,t}function Gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var kn,Qn,Wn,Zn,Hn,zn,Kn=Br,Jn=jr,$n=Vr,ta=Yr,ea=Xr,ra=Ln,na=Kr,aa=on,sa=hn,ia=en,oa=ia,ua=rn,ha=ua,ca=sn,la=gn,da=mn,fa=(kn=Xe(),Qn=ke(1,0,0),Wn=ke(0,1,0),function(t,e,r){var n=lr(e,r);return n<-.999999?(dr(kn,Qn,e),Ir(kn)<1e-6&&dr(kn,Wn,e),cr(kn,kn),wn(t,kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dr(kn,e,r),t[0]=kn[0],t[1]=kn[1],t[2]=kn[2],t[3]=1+n,ca(t,t))}),_a=(Zn=Rn(),Hn=Rn(),function(t,e,r,n,a,s){return Bn(Zn,e,a,s),Bn(Hn,r,n,s),Bn(t,Zn,Hn,2*s*(1-s)),t}),ga=(zn=Mt(),function(t,e,r,n){return zn[0]=r[0],zn[3]=r[1],zn[6]=r[2],zn[1]=n[0],zn[4]=n[1],zn[7]=n[2],zn[2]=-e[0],zn[5]=-e[1],zn[8]=-e[2],ca(t,Xn(t,zn))});function ma(){var t=new _(8);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ma(t){var e=new _(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function pa(t,e,r,n,a,s,i,o){var u=new _(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=a,u[5]=s,u[6]=i,u[7]=o,u}function va(t,e,r,n,a,s,i){var o=new _(8);o[0]=t,o[1]=e,o[2]=r,o[3]=n;var u=.5*a,h=.5*s,c=.5*i;return o[4]=u*n+h*r-c*e,o[5]=h*n+c*t-u*r,o[6]=c*n+u*e-h*t,o[7]=-u*t-h*e-c*r,o}function ba(t,e,r){var n=.5*r[0],a=.5*r[1],s=.5*r[2],i=e[0],o=e[1],u=e[2],h=e[3];return t[0]=i,t[1]=o,t[2]=u,t[3]=h,t[4]=n*h+a*u-s*o,t[5]=a*h+s*i-n*u,t[6]=s*h+n*o-a*i,t[7]=-n*i-a*o-s*u,t}function Ea(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ya(t,e){var r=Rn();xe(r,e);var n=new _(3);return be(n,e),ba(t,r,n),t}function Aa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ra(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ta(t,e,r,n,a,s,i,o,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=s,t[5]=i,t[6]=o,t[7]=u,t}var wa=$n;function Oa(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ca=$n;function La(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Sa(t,e){var r=e[4],n=e[5],a=e[6],s=e[7],i=-e[0],o=-e[1],u=-e[2],h=e[3];return t[0]=2*(r*h+s*i+n*u-a*o),t[1]=2*(n*h+s*o+a*i-r*u),t[2]=2*(a*h+s*u+r*o-n*i),t}function Pa(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=.5*r[0],u=.5*r[1],h=.5*r[2],c=e[4],l=e[5],d=e[6],f=e[7];return t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=i*o+a*h-s*u+c,t[5]=i*u+s*o-n*h+l,t[6]=i*h+n*u-a*o+d,t[7]=-n*o-a*u-s*h+f,t}function Da(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*i+c*n+u*s-h*a,d=u*i+c*a+h*n-o*s,f=h*i+c*s+o*a-u*n,_=c*i-o*n-u*a-h*s;return Sn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=l*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-l*s,t[6]=f*i+_*s+l*a-d*n,t[7]=_*i-l*n-d*a-f*s,t}function Ia(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*i+c*n+u*s-h*a,d=u*i+c*a+h*n-o*s,f=h*i+c*s+o*a-u*n,_=c*i-o*n-u*a-h*s;return Pn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=l*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-l*s,t[6]=f*i+_*s+l*a-d*n,t[7]=_*i-l*n-d*a-f*s,t}function Fa(t,e,r){var n=-e[0],a=-e[1],s=-e[2],i=e[3],o=e[4],u=e[5],h=e[6],c=e[7],l=o*i+c*n+u*s-h*a,d=u*i+c*a+h*n-o*s,f=h*i+c*s+o*a-u*n,_=c*i-o*n-u*a-h*s;return Dn(t,e,r),n=t[0],a=t[1],s=t[2],i=t[3],t[4]=l*i+_*n+d*s-f*a,t[5]=d*i+_*a+f*n-l*s,t[6]=f*i+_*s+l*a-d*n,t[7]=_*i-l*n-d*a-f*s,t}function Ua(t,e,r){var n=r[0],a=r[1],s=r[2],i=r[3],o=e[0],u=e[1],h=e[2],c=e[3];return t[0]=o*i+c*n+u*s-h*a,t[1]=u*i+c*a+h*n-o*s,t[2]=h*i+c*s+o*a-u*n,t[3]=c*i-o*n-u*a-h*s,o=e[4],u=e[5],h=e[6],c=e[7],t[4]=o*i+c*n+u*s-h*a,t[5]=u*i+c*a+h*n-o*s,t[6]=h*i+c*s+o*a-u*n,t[7]=c*i-o*n-u*a-h*s,t}function Na(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+i*o+a*h-s*u,t[1]=a*c+i*u+s*o-n*h,t[2]=s*c+i*h+n*u-a*o,t[3]=i*c-n*o-a*u-s*h,o=r[4],u=r[5],h=r[6],c=r[7],t[4]=n*c+i*o+a*h-s*u,t[5]=a*c+i*u+s*o-n*h,t[6]=s*c+i*h+n*u-a*o,t[7]=i*c-n*o-a*u-s*h,t}function Ba(t,e,r,n){if(Math.abs(n)<f)return Aa(t,e);var a=Math.hypot(r[0],r[1],r[2]);n*=.5;var s=Math.sin(n),i=s*r[0]/a,o=s*r[1]/a,u=s*r[2]/a,h=Math.cos(n),c=e[0],l=e[1],d=e[2],_=e[3];t[0]=c*h+_*i+l*u-d*o,t[1]=l*h+_*o+d*i-c*u,t[2]=d*h+_*u+c*o-l*i,t[3]=_*h-c*i-l*o-d*u;var g=e[4],m=e[5],M=e[6],p=e[7];return t[4]=g*h+p*i+m*u-M*o,t[5]=m*h+p*o+M*i-g*u,t[6]=M*h+p*u+g*o-m*i,t[7]=p*h-g*i-m*o-M*u,t}function ja(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Va(t,e,r){var n=e[0],a=e[1],s=e[2],i=e[3],o=r[4],u=r[5],h=r[6],c=r[7],l=e[4],d=e[5],f=e[6],_=e[7],g=r[0],m=r[1],M=r[2],p=r[3];return t[0]=n*p+i*g+a*M-s*m,t[1]=a*p+i*m+s*g-n*M,t[2]=s*p+i*M+n*m-a*g,t[3]=i*p-n*g-a*m-s*M,t[4]=n*c+i*o+a*h-s*u+l*p+_*g+d*M-f*m,t[5]=a*c+i*u+s*o-n*h+d*p+_*m+f*g-l*M,t[6]=s*c+i*h+n*u-a*o+f*p+_*M+l*m-d*g,t[7]=i*c-n*o-a*u-s*h+_*p-l*g-d*m-f*M,t}var Ya=Va;function Xa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var qa=aa;function Ga(t,e,r,n){var a=1-n;return qa(e,r)<0&&(n=-n),t[0]=e[0]*a+r[0]*n,t[1]=e[1]*a+r[1]*n,t[2]=e[2]*a+r[2]*n,t[3]=e[3]*a+r[3]*n,t[4]=e[4]*a+r[4]*n,t[5]=e[5]*a+r[5]*n,t[6]=e[6]*a+r[6]*n,t[7]=e[7]*a+r[7]*n,t}function ka(t,e){var r=Ha(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Qa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Wa=ia,Za=Wa,Ha=ua,za=Ha;function Ka(t,e){var r=Ha(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,a=e[1]/r,s=e[2]/r,i=e[3]/r,o=e[4],u=e[5],h=e[6],c=e[7],l=n*o+a*u+s*h+i*c;t[0]=n,t[1]=a,t[2]=s,t[3]=i,t[4]=(o-n*l)/r,t[5]=(u-a*l)/r,t[6]=(h-s*l)/r,t[7]=(c-i*l)/r}return t}function Ja(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $a(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ts(t,e){var r=t[0],n=t[1],a=t[2],s=t[3],i=t[4],o=t[5],u=t[6],h=t[7],c=e[0],l=e[1],d=e[2],_=e[3],g=e[4],m=e[5],M=e[6],p=e[7];return Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-_)<=f*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(i-g)<=f*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(o-m)<=f*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-M)<=f*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-p)<=f*Math.max(1,Math.abs(h),Math.abs(p))}function es(){var t=new _(2);return _!=Float32Array&&(t[0]=0,t[1]=0),t}function rs(t){var e=new _(2);return e[0]=t[0],e[1]=t[1],e}function ns(t,e){var r=new _(2);return r[0]=t,r[1]=e,r}function as(t,e){return t[0]=e[0],t[1]=e[1],t}function ss(t,e,r){return t[0]=e,t[1]=r,t}function is(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function os(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function us(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function hs(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function cs(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ls(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ds(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function fs(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function _s(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gs(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function ms(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Ms(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function ps(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function vs(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function bs(t){var e=t[0],r=t[1];return e*e+r*r}function Es(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xs(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ys(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function As(t,e){return t[0]*e[0]+t[1]*e[1]}function Rs(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Ts(t,e,r,n){var a=e[0],s=e[1];return t[0]=a+n*(r[0]-a),t[1]=s+n*(r[1]-s),t}function ws(t,e){e=e||1;var r=2*g()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Os(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t}function Cs(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t}function Ls(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function Ss(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t}function Ps(t,e,r,n){var a=e[0]-r[0],s=e[1]-r[1],i=Math.sin(n),o=Math.cos(n);return t[0]=a*o-s*i+r[0],t[1]=a*i+s*o+r[1],t}function Ds(t,e){var r=t[0],n=t[1],a=e[0],s=e[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+s*s),o=i&&(r*a+n*s)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function Is(t){return t[0]=0,t[1]=0,t}function Fs(t){return"vec2("+t[0]+", "+t[1]+")"}function Us(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ns(t,e){var r=t[0],n=t[1],a=e[0],s=e[1];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))}var Bs=vs,js=os,Vs=us,Ys=hs,Xs=Ms,qs=ps,Gs=bs,ks=function(){var t=es();return function(e,r,n,a,s,i){var o,u;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,i),e[o]=t[0],e[o+1]=t[1];return e}}()}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(5590)})();